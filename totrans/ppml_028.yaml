- en: Traits
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://rust-exercises.com/100-exercises/04_traits/01_trait.html](https://rust-exercises.com/100-exercises/04_traits/01_trait.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Let''s look again at our `Ticket` type:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: All our tests, so far, have been making assertions using `Ticket`'s fields.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: What if we wanted to compare two `Ticket` instances directly?
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'The compiler will stop us:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: '`Ticket` is a new type. Out of the box, there is **no behavior attached to
    it**.'
  prefs: []
  type: TYPE_NORMAL
- en: Rust doesn't magically infer how to compare two `Ticket` instances just because
    they contain `String`s.
  prefs: []
  type: TYPE_NORMAL
- en: 'The Rust compiler is nudging us in the right direction though: it''s suggesting
    that we might be missing an implementation of `PartialEq`. `PartialEq` is a **trait**!'
  prefs: []
  type: TYPE_NORMAL
- en: '[What are traits?](#what-are-traits)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Traits are Rust's way of defining **interfaces**.
  prefs: []
  type: TYPE_NORMAL
- en: A trait defines a set of methods that a type must implement to satisfy the trait's
    contract.
  prefs: []
  type: TYPE_NORMAL
- en: '[Defining a trait](#defining-a-trait)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'The syntax for a trait definition goes like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'We might, for example, define a trait named `MaybeZero` that requires its implementors
    to define an `is_zero` method:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: '[Implementing a trait](#implementing-a-trait)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To implement a trait for a type we use the `impl` keyword, just like we do
    for regular^([1](#footnote-inherent)) methods, but the syntax is a bit different:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'For example, to implement the `MaybeZero` trait for a custom number type, `WrappingU32`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: '[Invoking a trait method](#invoking-a-trait-method)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'To invoke a trait method, we use the `.` operator, just like we do with regular
    methods:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: 'To invoke a trait method, two things must be true:'
  prefs: []
  type: TYPE_NORMAL
- en: The type must implement the trait.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The trait must be in scope.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'To satisfy the latter, you may have to add a `use` statement for the trait:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: 'This is not necessary if:'
  prefs: []
  type: TYPE_NORMAL
- en: The trait is defined in the same module where the invocation occurs.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The trait is defined in the standard library's **prelude**. The prelude is a
    set of traits and types that are automatically imported into every Rust program.
    It's as if `use std::prelude::*;` was added at the beginning of every Rust module.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You can find the list of traits and types in the prelude in the [Rust documentation](https://doc.rust-lang.org/std/prelude/index.html).
  prefs: []
  type: TYPE_NORMAL
- en: '[Exercise](#exercise)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The exercise for this section is located in [`04_traits/01_trait`](https://github.com/mainmatter/100-exercises-to-learn-rust/tree/main/exercises/04_traits/01_trait)
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: A method defined directly on a type, without using a trait, is also known as
    an **inherent method**. [↩](#fr-inherent-1)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
