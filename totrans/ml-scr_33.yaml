- en: Math
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 数学
- en: 原文：[https://dafriedman97.github.io/mlbook/content/appendix/math.html](https://dafriedman97.github.io/mlbook/content/appendix/math.html)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://dafriedman97.github.io/mlbook/content/appendix/math.html](https://dafriedman97.github.io/mlbook/content/appendix/math.html)
- en: '\[ \newcommand{\sumN}{\sum_{n = 1}^N} \newcommand{\sumn}{\sum_n} \newcommand{\prodN}{\prod_{n
    = 1}^N} \newcommand{\by}{\mathbf{y}} \newcommand{\bX}{\mathbf{X}} \newcommand{\bx}{\mathbf{x}}
    \newcommand{\bu}{\mathbf{u}} \newcommand{\bv}{\mathbf{v}} \newcommand{\bbeta}{\boldsymbol{\beta}}
    \newcommand{\btheta}{\boldsymbol{\theta}} \newcommand{\bbetahat}{\boldsymbol{\hat{\beta}}}
    \newcommand{\bthetahat}{\boldsymbol{\hat{\theta}}} \newcommand{\bSigma}{\boldsymbol{\Sigma}}
    \newcommand{\bphi}{\boldsymbol{\phi}} \newcommand{\bPhi}{\boldsymbol{\Phi}} \newcommand{\bT}{\mathbf{T}}
    \newcommand{\dadb}[2]{\frac{\partial #1}{\partial #2}} \newcommand{\iid}{\overset{\small{\text{i.i.d.}}}{\sim}}
    \]'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: '\[ \newcommand{\sumN}{\sum_{n = 1}^N} \newcommand{\sumn}{\sum_n} \newcommand{\prodN}{\prod_{n
    = 1}^N} \newcommand{\by}{\mathbf{y}} \newcommand{\bX}{\mathbf{X}} \newcommand{\bx}{\mathbf{x}}
    \newcommand{\bu}{\mathbf{u}} \newcommand{\bv}{\mathbf{v}} \newcommand{\bbeta}{\boldsymbol{\beta}}
    \newcommand{\btheta}{\boldsymbol{\theta}} \newcommand{\bbetahat}{\boldsymbol{\hat{\beta}}}
    \newcommand{\bthetahat}{\boldsymbol{\hat{\theta}}} \newcommand{\bSigma}{\boldsymbol{\Sigma}}
    \newcommand{\bphi}{\boldsymbol{\phi}} \newcommand{\bPhi}{\boldsymbol{\Phi}} \newcommand{\bT}{\mathbf{T}}
    \newcommand{\dadb}[2]{\frac{\partial #1}{\partial #2}} \newcommand{\iid}{\overset{\small{\text{i.i.d.}}}{\sim}}
    \]'
- en: For a book on mathematical derivations, this text assumes knowledge of relatively
    few mathematical methods. Most of the mathematical background required is summarized
    in the three following sections on calculus, matrices, and matrix calculus.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 对于一本关于数学推导的书，本文假设对相对较少的数学方法有所了解。所需的数学背景主要总结在以下三个部分：微积分、矩阵和矩阵微积分。
- en: Calculus
  id: totrans-4
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 微积分
- en: The most important mathematical prerequisite for this book is calculus. Almost
    all of the methods covered involve minimizing a loss function or maximizing a
    likelihood function, done by taking the function’s derivative with respect to
    one or more parameters and setting it equal to 0.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 本书最重要的数学先决条件是微积分。几乎所有的方法都涉及最小化损失函数或最大化似然函数，这通过将函数对一个或多个参数的导数设为0来实现。
- en: 'Let’s start by reviewing some of the most common derivatives used in this book:'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从回顾本书中常用的一些导数开始：
- en: \[\begin{split} \begin{align*} f(x) &= x^a \rightarrow f'(x) = ax^{a-1} \\ f(x)
    &= \exp(x) \rightarrow f'(x) = \exp(x) \\ f(x) &= \log(x) \rightarrow f'(x) =
    \frac{1}{x} \\ f(x) &= |x| \rightarrow f'(x) = \begin{cases} 1, & x > 0 \\ -1,
    & x < 0,\end{cases} \\ \end{align*} \end{split}\]
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \begin{align*} f(x) &= x^a \rightarrow f'(x) = ax^{a-1} \\ f(x)
    &= \exp(x) \rightarrow f'(x) = \exp(x) \\ f(x) &= \log(x) \rightarrow f'(x) =
    \frac{1}{x} \\ f(x) &= |x| \rightarrow f'(x) = \begin{cases} 1, & x > 0 \\ -1,
    & x < 0,\end{cases} \\ \end{align*} \end{split}\]
- en: 'We will also often use the sum, product, and quotient rules:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还将经常使用求和、乘积和商的法则：
- en: \[\begin{split} \begin{align*} f(x) &= g(x) + h(x) \rightarrow f'(x) = g'(x)
    + h'(x) \\ f(x) &= g(x)\cdot h(x) \rightarrow f'(x)= g'(x)h(x) + g(x)h'(x)\\ f(x)
    &= g(x)/h(x) \rightarrow f'(x) = \frac{h(x)g'(x) - g(x)h'(x)}{h(x)^2}. \end{align*}
    \end{split}\]
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \begin{align*} f(x) &= g(x) + h(x) \rightarrow f'(x) = g'(x)
    + h'(x) \\ f(x) &= g(x)\cdot h(x) \rightarrow f'(x)= g'(x)h(x) + g(x)h'(x)\\ f(x)
    &= g(x)/h(x) \rightarrow f'(x) = \frac{h(x)g'(x) - g(x)h'(x)}{h(x)^2}. \end{align*}
    \end{split}\]
- en: 'Finally, we will heavily rely on the chain rule:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们将主要依赖链式法则：
- en: \[ f(x) = g(h(x)) \rightarrow f'(x) = g'(h(x))h'(x). \]
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: \[ f(x) = g(h(x)) \rightarrow f'(x) = g'(h(x))h'(x). \]
- en: As an example of the chain rule, suppose \(f(x) = \log(x^2)\). Let \(h(x) =
    x^2\), meaning \(f(x) = \log(h(x))\). Then
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 作为链式法则的一个例子，假设 \(f(x) = \log(x^2)\)。设 \(h(x) = x^2\)，意味着 \(f(x) = \log(h(x))\)。那么
- en: \[ f'(x) = \frac{1}{h(x)}h'(x) = \frac{1}{x^2}\cdot2x = \frac{2}{x}. \]
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: \[ f'(x) = \frac{1}{h(x)}h'(x) = \frac{1}{x^2}\cdot2x = \frac{2}{x}. \]
- en: Matrices
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 矩阵
- en: While little linear algebra is used in this book, matrix and vector representations
    of data are very common. The most important matrix and vector operations are reviewed
    below.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然这本书中很少使用线性代数，但数据的矩阵和向量表示非常常见。以下简要回顾了最重要的矩阵和向量运算。
- en: Let \(\mathbf{u}\) and \(\mathbf{v}\) be two column vectors of length \(D\).
    The **dot product** of \(\mathbf{u}\) and \(\mathbf{v}\) is a scalar value given
    by
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 设 \(\mathbf{u}\) 和 \(\mathbf{v}\) 是长度为 \(D\) 的两个列向量。\(\mathbf{u}\) 和 \(\mathbf{v}\)
    的**点积**是一个由以下公式给出的标量值
- en: \[ \mathbf{u} \cdot \mathbf{v} = \mathbf{u}^\top \mathbf{v} = \sum_{d = 1}^D
    u_d v_d = u_1v_1 + u_2v_2 + \dots + u_Dv_D. \]
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \mathbf{u} \cdot \mathbf{v} = \mathbf{u}^\top \mathbf{v} = \sum_{d = 1}^D
    u_d v_d = u_1v_1 + u_2v_2 + \dots + u_Dv_D. \]
- en: If \(\bv\) is a vector of features (with a leading 1 appended for the intercept
    term) and \(\bu\) is a vector of weights, this dot product is also referred to
    as a *linear combination* of the predictors in \(\bv\).
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 \(\bv\) 是一个特征向量（为截距项添加一个前导1），\(\bu\) 是一个权重向量，这个点积也被称为 \(\bv\) 中预测因子的*线性组合*。
- en: The **L1 norm** and **L2 norm** measure a vector’s magnitude. For a vector \(\bu\),
    these are given respectively by
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: '**L1范数**和**L2范数**衡量向量的幅度。对于一个向量 \(\bu\)，这些分别由'
- en: \[\begin{split} \begin{align} ||\bu||_1 &= \sum_{d = 1}^D |u_d| \\ ||\bu||_2
    &= \sqrt{\sum_{d = 1}^D u_d^2}. \\ \end{align} \end{split}\]
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \begin{align} ||\bu||_1 &= \sum_{d = 1}^D |u_d| \\ ||\bu||_2
    &= \sqrt{\sum_{d = 1}^D u_d^2}. \\ \end{align} \end{split}\]
- en: Let \(\mathbf{A}\) be a \((N \times D)\) matrix defined as
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 设 \(\mathbf{A}\) 为一个定义为 \((N \times D)\) 的矩阵
- en: \[\begin{split} \mathbf{A} = \begin{pmatrix} A_{11} & A_{12} & ... & A_{1D}
    \\ A_{21} & A_{22} & ... & A_{2D} \\ & & ... & \\ A_{N1} & A_{N2} & ... & A_{ND}
    \end{pmatrix} \end{split}\]
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \mathbf{A} = \begin{pmatrix} A_{11} & A_{12} & ... & A_{1D}
    \\ A_{21} & A_{22} & ... & A_{2D} \\ & & ... & \\ A_{N1} & A_{N2} & ... & A_{ND}
    \end{pmatrix} \end{split}\]
- en: The transpose of \(\mathbf{A}\) is a \((D \times N)\) matrix given by
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: \(\mathbf{A}\) 的转置是一个 \((D \times N)\) 矩阵，表示为
- en: \[\begin{split} \mathbf{A}^T = \begin{pmatrix} A_{11} & A_{21} & ... & A_{N1}
    \\ A_{12} & A_{22} & ... & A_{N2} \\ & & ... & \\ A_{1D} & A_{2D} & ... & A_{ND}
    \end{pmatrix} \end{split}\]
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \mathbf{A}^T = \begin{pmatrix} A_{11} & A_{21} & ... & A_{N1}
    \\ A_{12} & A_{22} & ... & A_{N2} \\ & & ... & \\ A_{1D} & A_{2D} & ... & A_{ND}
    \end{pmatrix} \end{split}\]
- en: If \(\mathbf{A}\) is a square \((N \times N)\) matrix, its inverse, given by
    \(\mathbf{A}^{-1}\), is the matrix such that
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 \(\mathbf{A}\) 是一个方阵 \((N \times N)\)，其逆矩阵 \(\mathbf{A}^{-1}\) 是一个矩阵，使得
- en: \[ \mathbf{A}\mathbf{A}^{-1} = \mathbf{A}^{-1}\mathbf{A} = I_N. \]
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \mathbf{A}\mathbf{A}^{-1} = \mathbf{A}^{-1}\mathbf{A} = I_N. \]
- en: Matrix Calculus
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 矩阵微积分
- en: Dealing with multiple parameters, multiple observations, and sometimes multiple
    loss functions, we will often have to take multiple derivatives at once in this
    book. This is done with matrix calculus.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 处理多个参数、多个观测值以及有时多个损失函数，在这本书中我们经常需要同时求多个导数。这是通过矩阵微积分完成的。
- en: In this book, we will use the [numerator layout](https://en.wikipedia.org/wiki/Matrix_calculus#Numerator-layout_notation)
    convention for matrix derivatives. This is most easily shown with examples. First,
    let \(a\) be a scalar and \(\mathbf{u}\) be a vector of length \(I\). The derivative
    of \(a\) with respect to \(\bu\) is given by
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 在这本书中，我们将使用矩阵导数的[分子布局](https://en.wikipedia.org/wiki/Matrix_calculus#Numerator-layout_notation)约定。这可以通过例子最简单地展示。首先，设
    \(a\) 是一个标量，\(\mathbf{u}\) 是一个长度为 \(I\) 的向量。\(a\) 对 \(\mathbf{u}\) 的导数表示为
- en: \[ \dadb{a}{\mathbf{u}} = \begin{pmatrix} \dadb{a}{u_1} & .. & \dadb{a}{u_I}\end{pmatrix}
    \in \R^{I}, \]
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \dadb{a}{\mathbf{u}} = \begin{pmatrix} \dadb{a}{u_1} & .. & \dadb{a}{u_I}\end{pmatrix}
    \in \R^{I}, \]
- en: and the derivative of \(\bu\) with respect to \(a\) is given by
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 以及 \(\bu\) 对 \(a\) 的导数表示为
- en: \[\begin{split} \dadb{\bu}{a} = \begin{pmatrix} \dadb{u_1}{a} \\ ... \\ \dadb{u_I}{a}
    \end{pmatrix} \R^I. \end{split}\]
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \dadb{\bu}{a} = \begin{pmatrix} \dadb{u_1}{a} \\ ... \\ \dadb{u_I}{a}
    \end{pmatrix} \R^I. \end{split}\]
- en: Note that in either case, the first dimension of the derivative is determined
    by what’s in the numerator. Similarly, letting \(\bv\) be a vector of length \(J\),
    the derivative of \(\bu\) with respect to \(\bv\) is given with
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，在两种情况下，导数的第一个维度由分子中的内容决定。同样，设 \(\bv\) 是一个长度为 \(J\) 的向量，\(\bu\) 对 \(\bv\)
    的导数表示为
- en: \[\begin{split} \dadb{\bu}{\bv} = \begin{pmatrix} \dadb{u_1}{v_1} & ... & \dadb{u_1}{v_J}
    \\ & ... & \\ \dadb{u_I}{v_1} & ... & \dadb{u_I}{v_J}\end{pmatrix} \in \R^{I \times
    J}. \end{split}\]
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \dadb{\bu}{\bv} = \begin{pmatrix} \dadb{u_1}{v_1} & ... & \dadb{u_1}{v_J}
    \\ & ... & \\ \dadb{u_I}{v_1} & ... & \dadb{u_I}{v_J}\end{pmatrix} \in \R^{I \times
    J}. \end{split}\]
- en: We will also have to take derivatives of or with respect to matrices. Let \(\bX\)
    be a \((N \times D)\) matrix. The derivative of \(\bX\) with respect to a constant
    \(a\) is given by
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还必须对矩阵求导或相对于矩阵求导。设 \(\bX\) 为一个 \((N \times D)\) 的矩阵。\(\bX\) 对常数 \(a\) 的导数表示为
- en: \[\begin{split} \dadb{\bX}{a} = \begin{pmatrix} \dadb{X_{11}}{a} & ... & \dadb{X_{1D}}{a}
    \\ & ... & \\ \dadb{X_{N1}}{a} & ... & \dadb{X_{ND}}{a}\end{pmatrix} \in \R^{N
    \times D}, \end{split}\]
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \dadb{\bX}{a} = \begin{pmatrix} \dadb{X_{11}}{a} & ... & \dadb{X_{1D}}{a}
    \\ & ... & \\ \dadb{X_{N1}}{a} & ... & \dadb{X_{ND}}{a}\end{pmatrix} \in \R^{N
    \times D}, \end{split}\]
- en: and conversely the derivative of \(a\) with respect to \(\bX\) is given by
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，\(a\) 对 \(\bX\) 的导数表示为
- en: \[\begin{split} \dadb{a}{\bX} = \begin{pmatrix} \dadb{a}{X_{11}} & ... & \dadb{a}{X_{1D}}
    \\ & ... & \\ \dadb{a}{X_{N1}} & ... & \dadb{a}{X_{ND}} \end{pmatrix} \in \R^{N
    \times D}. \end{split}\]
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \dadb{a}{\bX} = \begin{pmatrix} \dadb{a}{X_{11}} & ... & \dadb{a}{X_{1D}}
    \\ & ... & \\ \dadb{a}{X_{N1}} & ... & \dadb{a}{X_{ND}} \end{pmatrix} \in \R^{N
    \times D}. \end{split}\]
- en: Finally, we will occasionally need to take derivatives of vectors with respect
    to matrices or vice versa. This results in a *tensor* of 3 or more dimensions.
    Two examples are given below. First, the derivative of \(\bu \in \R^I\) with respect
    to \(\bX \in \R^{N \times D}\) is given by
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们偶尔需要求向量相对于矩阵或反之的导数。这会导致一个3维或更高维的**张量**。下面给出了两个例子。首先，\(\bu \in \R^I\)相对于\(\bX
    \in \R^{N \times D}\)的导数由以下公式给出
- en: \[\begin{split} \dadb{\bu}{\bX} = \begin{pmatrix} \begin{pmatrix} \dadb{u_1}{X_{11}}
    & ... & \dadb{u_1}{X_{1D}} \\ & ... & \\ \dadb{u_1}{X_{N1}} & ... & \dadb{u_1}{X_{ND}}
    \end{pmatrix} & ... & \begin{pmatrix} \dadb{u_I}{X_{11}} & ... & \dadb{u_I}{X_{1D}}
    \\ & ... & \\ \dadb{u_I}{X_{N1}} & ... & \dadb{u_I}{X_{ND}} \end{pmatrix} \end{pmatrix}
    \in \R^{I \times N \times D}, \end{split}\]
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \dadb{\bu}{\bX} = \begin{pmatrix} \begin{pmatrix} \dadb{u_1}{X_{11}}
    & ... & \dadb{u_1}{X_{1D}} \\ & ... & \\ \dadb{u_1}{X_{N1}} & ... & \dadb{u_1}{X_{ND}}
    \end{pmatrix} & ... & \begin{pmatrix} \dadb{u_I}{X_{11}} & ... & \dadb{u_I}{X_{1D}}
    \\ & ... & \\ \dadb{u_I}{X_{N1}} & ... & \dadb{u_I}{X_{ND}} \end{pmatrix} \end{pmatrix}
    \in \R^{I \times N \times D}, \end{split}\]
- en: and the derivative of \(\bX\) with respect to \(\bu\) is given by
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 并且，\(\bX\)相对于\(\bu\)的导数由以下公式给出
- en: \[\begin{split} \dadb{\bX}{\bu} = \begin{pmatrix} \begin{pmatrix} \dadb{X_{11}}{u_1}
    & ... & \dadb{X_{11}}{u_I} \end{pmatrix} & ... & \begin{pmatrix} \dadb{X_{1D}}{u_1}
    & ... & \dadb{X_{1D}}{u_I}\end{pmatrix} \\ & ... & \\ \begin{pmatrix}\dadb{X_{N1}}{u_1}
    & ... & \dadb{X_{N1}}{u_I} \end{pmatrix} & ... & \begin{pmatrix}\dadb{X_{ND}}{u_1}
    & ... & \dadb{X_{ND}}{u_I}\end{pmatrix} \\ \end{pmatrix} \in \R^{N \times D \times
    I}. \end{split}\]
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \dadb{\bX}{\bu} = \begin{pmatrix} \begin{pmatrix} \dadb{X_{11}}{u_1}
    & ... & \dadb{X_{11}}{u_I} \end{pmatrix} & ... & \begin{pmatrix} \dadb{X_{1D}}{u_1}
    & ... & \dadb{X_{1D}}{u_I}\end{pmatrix} \\ & ... & \\ \begin{pmatrix}\dadb{X_{N1}}{u_1}
    & ... & \dadb{X_{N1}}{u_I} \end{pmatrix} & ... & \begin{pmatrix}\dadb{X_{ND}}{u_1}
    & ... & \dadb{X_{ND}}{u_I}\end{pmatrix} \\ \end{pmatrix} \in \R^{N \times D \times
    I}. \end{split}\]
- en: Notice again that what we are taking the derivative *of* determines the first
    dimension(s) of the derivative and what we are taking the derivative with respect
    *to* determines the last.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 再次注意，我们所求的导数的**被导数**决定了导数的第一维数，而我们求导数的**导数**决定了导数的最后一维数。
- en: Calculus
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 微积分
- en: The most important mathematical prerequisite for this book is calculus. Almost
    all of the methods covered involve minimizing a loss function or maximizing a
    likelihood function, done by taking the function’s derivative with respect to
    one or more parameters and setting it equal to 0.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 本书最重要的数学先决条件是微积分。几乎所有的方法都涉及到最小化损失函数或最大化似然函数，这通常是通过求函数对一个或多个参数的导数并将其设置为0来实现的。
- en: 'Let’s start by reviewing some of the most common derivatives used in this book:'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们先回顾一下本书中常用的一些导数：
- en: \[\begin{split} \begin{align*} f(x) &= x^a \rightarrow f'(x) = ax^{a-1} \\ f(x)
    &= \exp(x) \rightarrow f'(x) = \exp(x) \\ f(x) &= \log(x) \rightarrow f'(x) =
    \frac{1}{x} \\ f(x) &= |x| \rightarrow f'(x) = \begin{cases} 1, & x > 0 \\ -1,
    & x < 0,\end{cases} \\ \end{align*} \end{split}\]
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \begin{align*} f(x) &= x^a \rightarrow f'(x) = ax^{a-1} \\ f(x)
    &= \exp(x) \rightarrow f'(x) = \exp(x) \\ f(x) &= \log(x) \rightarrow f'(x) =
    \frac{1}{x} \\ f(x) &= |x| \rightarrow f'(x) = \begin{cases} 1, & x > 0 \\ -1,
    & x < 0,\end{cases} \\ \end{align*} \end{split}\]
- en: 'We will also often use the sum, product, and quotient rules:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还将经常使用求和、乘积和商的法则：
- en: \[\begin{split} \begin{align*} f(x) &= g(x) + h(x) \rightarrow f'(x) = g'(x)
    + h'(x) \\ f(x) &= g(x)\cdot h(x) \rightarrow f'(x)= g'(x)h(x) + g(x)h'(x)\\ f(x)
    &= g(x)/h(x) \rightarrow f'(x) = \frac{h(x)g'(x) - g(x)h'(x)}{h(x)^2}. \end{align*}
    \end{split}\]
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \begin{align*} f(x) &= g(x) + h(x) \rightarrow f'(x) = g'(x)
    + h'(x) \\ f(x) &= g(x)\cdot h(x) \rightarrow f'(x)= g'(x)h(x) + g(x)h'(x)\\ f(x)
    &= g(x)/h(x) \rightarrow f'(x) = \frac{h(x)g'(x) - g(x)h'(x)}{h(x)^2}. \end{align*}
    \end{split}\]
- en: 'Finally, we will heavily rely on the chain rule:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们将大量依赖链式法则：
- en: \[ f(x) = g(h(x)) \rightarrow f'(x) = g'(h(x))h'(x). \]
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: \[ f(x) = g(h(x)) \rightarrow f'(x) = g'(h(x))h'(x). \]
- en: As an example of the chain rule, suppose \(f(x) = \log(x^2)\). Let \(h(x) =
    x^2\), meaning \(f(x) = \log(h(x))\). Then
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 作为链式法则的一个例子，假设 \(f(x) = \log(x^2)\)。令 \(h(x) = x^2\)，意味着 \(f(x) = \log(h(x))\)。那么
- en: \[ f'(x) = \frac{1}{h(x)}h'(x) = \frac{1}{x^2}\cdot2x = \frac{2}{x}. \]
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: \[ f'(x) = \frac{1}{h(x)}h'(x) = \frac{1}{x^2}\cdot2x = \frac{2}{x}. \]
- en: Matrices
  id: totrans-54
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 矩阵
- en: While little linear algebra is used in this book, matrix and vector representations
    of data are very common. The most important matrix and vector operations are reviewed
    below.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然在这本书中很少使用线性代数，但数据的矩阵和向量表示非常常见。下面回顾了最重要的矩阵和向量运算。
- en: Let \(\mathbf{u}\) and \(\mathbf{v}\) be two column vectors of length \(D\).
    The **dot product** of \(\mathbf{u}\) and \(\mathbf{v}\) is a scalar value given
    by
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 设 \(\mathbf{u}\) 和 \(\mathbf{v}\) 是长度为 \(D\) 的两个列向量。\(\mathbf{u}\) 和 \(\mathbf{v}\)
    的**点积**是一个标量值，表示为
- en: \[ \mathbf{u} \cdot \mathbf{v} = \mathbf{u}^\top \mathbf{v} = \sum_{d = 1}^D
    u_d v_d = u_1v_1 + u_2v_2 + \dots + u_Dv_D. \]
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \mathbf{u} \cdot \mathbf{v} = \mathbf{u}^\top \mathbf{v} = \sum_{d = 1}^D
    u_d v_d = u_1v_1 + u_2v_2 + \dots + u_Dv_D. \]
- en: If \(\bv\) is a vector of features (with a leading 1 appended for the intercept
    term) and \(\bu\) is a vector of weights, this dot product is also referred to
    as a *linear combination* of the predictors in \(\bv\).
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 \(\bv\) 是一个特征向量（为截距项添加一个前导1），而 \(\bu\) 是一个权重向量，这个点积也被称为 \(\bv\) 中预测因子的**线性组合**。
- en: The **L1 norm** and **L2 norm** measure a vector’s magnitude. For a vector \(\bu\),
    these are given respectively by
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '**L1范数**和**L2范数**衡量向量的幅度。对于一个向量 \(\bu\)，这些分别表示为'
- en: \[\begin{split} \begin{align} ||\bu||_1 &= \sum_{d = 1}^D |u_d| \\ ||\bu||_2
    &= \sqrt{\sum_{d = 1}^D u_d^2}. \\ \end{align} \end{split}\]
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \begin{align} ||\bu||_1 &= \sum_{d = 1}^D |u_d| \\ ||\bu||_2
    &= \sqrt{\sum_{d = 1}^D u_d^2}. \\ \end{align} \end{split}\]
- en: Let \(\mathbf{A}\) be a \((N \times D)\) matrix defined as
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 设 \(\mathbf{A}\) 为一个 \((N \times D)\) 矩阵，定义为
- en: \[\begin{split} \mathbf{A} = \begin{pmatrix} A_{11} & A_{12} & ... & A_{1D}
    \\ A_{21} & A_{22} & ... & A_{2D} \\ & & ... & \\ A_{N1} & A_{N2} & ... & A_{ND}
    \end{pmatrix} \end{split}\]
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \mathbf{A} = \begin{pmatrix} A_{11} & A_{12} & ... & A_{1D}
    \\ A_{21} & A_{22} & ... & A_{2D} \\ & & ... & \\ A_{N1} & A_{N2} & ... & A_{ND}
    \end{pmatrix} \end{split}\]
- en: The transpose of \(\mathbf{A}\) is a \((D \times N)\) matrix given by
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: \(\mathbf{A}\) 的转置是一个 \((D \times N)\) 矩阵，表示为
- en: \[\begin{split} \mathbf{A}^T = \begin{pmatrix} A_{11} & A_{21} & ... & A_{N1}
    \\ A_{12} & A_{22} & ... & A_{N2} \\ & & ... & \\ A_{1D} & A_{2D} & ... & A_{ND}
    \end{pmatrix} \end{split}\]
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \mathbf{A}^T = \begin{pmatrix} A_{11} & A_{21} & ... & A_{N1}
    \\ A_{12} & A_{22} & ... & A_{N2} \\ & & ... & \\ A_{1D} & A_{2D} & ... & A_{ND}
    \end{pmatrix} \end{split}\]
- en: If \(\mathbf{A}\) is a square \((N \times N)\) matrix, its inverse, given by
    \(\mathbf{A}^{-1}\), is the matrix such that
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 \(\mathbf{A}\) 是一个平方 \((N \times N)\) 矩阵，其逆矩阵 \(\mathbf{A}^{-1}\) 是一个矩阵，使得
- en: \[ \mathbf{A}\mathbf{A}^{-1} = \mathbf{A}^{-1}\mathbf{A} = I_N. \]
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \mathbf{A}\mathbf{A}^{-1} = \mathbf{A}^{-1}\mathbf{A} = I_N. \]
- en: Matrix Calculus
  id: totrans-67
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 矩阵微积分
- en: Dealing with multiple parameters, multiple observations, and sometimes multiple
    loss functions, we will often have to take multiple derivatives at once in this
    book. This is done with matrix calculus.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 处理多个参数、多个观测值以及有时多个损失函数时，在这本书中我们经常需要同时计算多个导数。这是通过矩阵微积分完成的。
- en: In this book, we will use the [numerator layout](https://en.wikipedia.org/wiki/Matrix_calculus#Numerator-layout_notation)
    convention for matrix derivatives. This is most easily shown with examples. First,
    let \(a\) be a scalar and \(\mathbf{u}\) be a vector of length \(I\). The derivative
    of \(a\) with respect to \(\bu\) is given by
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 在这本书中，我们将使用 [分子布局](https://en.wikipedia.org/wiki/Matrix_calculus#Numerator-layout_notation)
    的约定来表示矩阵导数。这可以通过例子最简单地展示。首先，设 \(a\) 是一个标量，\(\mathbf{u}\) 是一个长度为 \(I\) 的向量。\(a\)
    关于 \(\bu\) 的导数由以下给出
- en: \[ \dadb{a}{\mathbf{u}} = \begin{pmatrix} \dadb{a}{u_1} & .. & \dadb{a}{u_I}\end{pmatrix}
    \in \R^{I}, \]
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: \[ \dadb{a}{\mathbf{u}} = \begin{pmatrix} \dadb{a}{u_1} & .. & \dadb{a}{u_I}\end{pmatrix}
    \in \R^{I}, \]
- en: and the derivative of \(\bu\) with respect to \(a\) is given by
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: \(\bu\) 关于 \(a\) 的导数由以下给出
- en: \[\begin{split} \dadb{\bu}{a} = \begin{pmatrix} \dadb{u_1}{a} \\ ... \\ \dadb{u_I}{a}
    \end{pmatrix} \R^I. \end{split}\]
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \dadb{\bu}{a} = \begin{pmatrix} \dadb{u_1}{a} \\ ... \\ \dadb{u_I}{a}
    \end{pmatrix} \R^I. \end{split}\]
- en: Note that in either case, the first dimension of the derivative is determined
    by what’s in the numerator. Similarly, letting \(\bv\) be a vector of length \(J\),
    the derivative of \(\bu\) with respect to \(\bv\) is given with
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 注意，在两种情况下，导数的第一维由分子中的内容决定。同样，设 \(\bv\) 是一个长度为 \(J\) 的向量，\(\bu\) 关于 \(\bv\) 的导数用以下表示
- en: \[\begin{split} \dadb{\bu}{\bv} = \begin{pmatrix} \dadb{u_1}{v_1} & ... & \dadb{u_1}{v_J}
    \\ & ... & \\ \dadb{u_I}{v_1} & ... & \dadb{u_I}{v_J}\end{pmatrix} \in \R^{I \times
    J}. \end{split}\]
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \dadb{\bu}{\bv} = \begin{pmatrix} \dadb{u_1}{v_1} & ... & \dadb{u_1}{v_J}
    \\ & ... & \\ \dadb{u_I}{v_1} & ... & \dadb{u_I}{v_J}\end{pmatrix} \in \R^{I \times
    J}. \end{split}\]
- en: We will also have to take derivatives of or with respect to matrices. Let \(\bX\)
    be a \((N \times D)\) matrix. The derivative of \(\bX\) with respect to a constant
    \(a\) is given by
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还必须对矩阵进行求导或相对于矩阵求导。设 \(\bX\) 为一个 \((N \times D)\) 矩阵。\(\bX\) 对常数 \(a\) 的导数由以下公式给出
- en: \[\begin{split} \dadb{\bX}{a} = \begin{pmatrix} \dadb{X_{11}}{a} & ... & \dadb{X_{1D}}{a}
    \\ & ... & \\ \dadb{X_{N1}}{a} & ... & \dadb{X_{ND}}{a}\end{pmatrix} \in \R^{N
    \times D}, \end{split}\]
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \dadb{\bX}{a} = \begin{pmatrix} \dadb{X_{11}}{a} & ... & \dadb{X_{1D}}{a}
    \\ & ... & \\ \dadb{X_{N1}}{a} & ... & \dadb{X_{ND}}{a}\end{pmatrix} \in \R^{N
    \times D}, \end{split}\]
- en: and conversely the derivative of \(a\) with respect to \(\bX\) is given by
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 相反，\(a\) 对 \(\bX\) 的导数由以下公式给出
- en: \[\begin{split} \dadb{a}{\bX} = \begin{pmatrix} \dadb{a}{X_{11}} & ... & \dadb{a}{X_{1D}}
    \\ & ... & \\ \dadb{a}{X_{N1}} & ... & \dadb{a}{X_{ND}} \end{pmatrix} \in \R^{N
    \times D}. \end{split}\]
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \dadb{a}{\bX} = \begin{pmatrix} \dadb{a}{X_{11}} & ... & \dadb{a}{X_{1D}}
    \\ & ... & \\ \dadb{a}{X_{N1}} & ... & \dadb{a}{X_{ND}} \end{pmatrix} \in \R^{N
    \times D}. \end{split}\]
- en: Finally, we will occasionally need to take derivatives of vectors with respect
    to matrices or vice versa. This results in a *tensor* of 3 or more dimensions.
    Two examples are given below. First, the derivative of \(\bu \in \R^I\) with respect
    to \(\bX \in \R^{N \times D}\) is given by
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们有时需要求向量和矩阵之间的导数，或者反之。这会导致一个3维或更多维的**张量**。以下给出两个例子。首先，\(\bu \in \R^I\) 对
    \(\bX \in \R^{N \times D}\) 的导数由以下公式给出
- en: \[\begin{split} \dadb{\bu}{\bX} = \begin{pmatrix} \begin{pmatrix} \dadb{u_1}{X_{11}}
    & ... & \dadb{u_1}{X_{1D}} \\ & ... & \\ \dadb{u_1}{X_{N1}} & ... & \dadb{u_1}{X_{ND}}
    \end{pmatrix} & ... & \begin{pmatrix} \dadb{u_I}{X_{11}} & ... & \dadb{u_I}{X_{1D}}
    \\ & ... & \\ \dadb{u_I}{X_{N1}} & ... & \dadb{u_I}{X_{ND}} \end{pmatrix} \end{pmatrix}
    \in \R^{I \times N \times D}, \end{split}\]
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \dadb{\bu}{\bX} = \begin{pmatrix} \begin{pmatrix} \dadb{u_1}{X_{11}}
    & ... & \dadb{u_1}{X_{1D}} \\ & ... & \\ \dadb{u_1}{X_{N1}} & ... & \dadb{u_1}{X_{ND}}
    \end{pmatrix} & ... & \begin{pmatrix} \dadb{u_I}{X_{11}} & ... & \dadb{u_I}{X_{1D}}
    \\ & ... & \\ \dadb{u_I}{X_{N1}} & ... & \dadb{u_I}{X_{ND}} \end{pmatrix} \end{pmatrix}
    \in \R^{I \times N \times D}, \end{split}\]
- en: and the derivative of \(\bX\) with respect to \(\bu\) is given by
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: \(\bX\) 对 \(\bu\) 的导数由以下公式给出
- en: \[\begin{split} \dadb{\bX}{\bu} = \begin{pmatrix} \begin{pmatrix} \dadb{X_{11}}{u_1}
    & ... & \dadb{X_{11}}{u_I} \end{pmatrix} & ... & \begin{pmatrix} \dadb{X_{1D}}{u_1}
    & ... & \dadb{X_{1D}}{u_I}\end{pmatrix} \\ & ... & \\ \begin{pmatrix}\dadb{X_{N1}}{u_1}
    & ... & \dadb{X_{N1}}{u_I} \end{pmatrix} & ... & \begin{pmatrix}\dadb{X_{ND}}{u_1}
    & ... & \dadb{X_{ND}}{u_I}\end{pmatrix} \\ \end{pmatrix} \in \R^{N \times D \times
    I}. \end{split}\]
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: \[\begin{split} \dadb{\bX}{\bu} = \begin{pmatrix} \begin{pmatrix} \dadb{X_{11}}{u_1}
    & ... & \dadb{X_{11}}{u_I} \end{pmatrix} & ... & \begin{pmatrix} \dadb{X_{1D}}{u_1}
    & ... & \dadb{X_{1D}}{u_I}\end{pmatrix} \\ & ... & \\ \begin{pmatrix}\dadb{X_{N1}}{u_1}
    & ... & \dadb{X_{N1}}{u_I} \end{pmatrix} & ... & \begin{pmatrix}\dadb{X_{ND}}{u_1}
    & ... & \dadb{X_{ND}}{u_I}\end{pmatrix} \\ \end{pmatrix} \in \R^{N \times D \times
    I}. \end{split}\]
- en: Notice again that what we are taking the derivative *of* determines the first
    dimension(s) of the derivative and what we are taking the derivative with respect
    *to* determines the last.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 再次注意，我们所求的导数的**被导数**决定了导数的第一维（或几维），而我们求导的**相对于**决定了导数的最后一维。
