- en: The Drop trait
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://rust-exercises.com/100-exercises/04_traits/13_drop.html](https://rust-exercises.com/100-exercises/04_traits/13_drop.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'When we introduced [destructors](/100-exercises/03_ticket_v1/11_destructor),
    we mentioned that the `drop` function:'
  prefs: []
  type: TYPE_NORMAL
- en: reclaims the memory occupied by the type (i.e. `std::mem::size_of` bytes)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: cleans up any additional resources that the value might be managing (e.g. the
    heap buffer of a `String`)
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Step 2\. is where the `Drop` trait comes in.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: The `Drop` trait is a mechanism for you to define *additional* cleanup logic
    for your types, beyond what the compiler does for you automatically.
  prefs: []
  type: TYPE_NORMAL
- en: Whatever you put in the `drop` method will be executed when the value goes out
    of scope.
  prefs: []
  type: TYPE_NORMAL
- en: '[`Drop` and `Copy`](#drop-and-copy)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When talking about the `Copy` trait, we said that a type can't implement `Copy`
    if it manages additional resources beyond the `std::mem::size_of` bytes that it
    occupies in memory.
  prefs: []
  type: TYPE_NORMAL
- en: 'You might wonder: how does the compiler know if a type manages additional resources?
    That''s right: `Drop` trait implementations!'
  prefs: []
  type: TYPE_NORMAL
- en: If your type has an explicit `Drop` implementation, the compiler will assume
    that your type has additional resources attached to it and won't allow you to
    implement `Copy`.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'The compiler will complain with this error message:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '[Exercise](#exercise)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The exercise for this section is located in [`04_traits/13_drop`](https://github.com/mainmatter/100-exercises-to-learn-rust/tree/main/exercises/04_traits/13_drop)
  prefs: []
  type: TYPE_NORMAL
