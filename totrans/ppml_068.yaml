- en: Slices
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://rust-exercises.com/100-exercises/06_ticket_management/10_slices.html](https://rust-exercises.com/100-exercises/06_ticket_management/10_slices.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Let''s go back to the memory layout of a `Vec`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: We already remarked how `String` is just a `Vec<u8>` in disguise.
  prefs: []
  type: TYPE_NORMAL
- en: 'The similarity should prompt you to ask: "What''s the equivalent of `&str`
    for `Vec`?"'
  prefs: []
  type: TYPE_NORMAL
- en: '[`&[T]`](#t)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '`[T]` is a **slice** of a contiguous sequence of elements of type `T`.'
  prefs: []
  type: TYPE_NORMAL
- en: It's most commonly used in its borrowed form, `&[T]`.
  prefs: []
  type: TYPE_NORMAL
- en: 'There are various ways to create a slice reference from a `Vec`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: '`Vec` implements the `Deref` trait using `[T]` as the target type, so you can
    use slice methods on a `Vec` directly thanks to deref coercion:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: '[Memory layout](#memory-layout)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: A `&[T]` is a **fat pointer**, just like `&str`.
  prefs: []
  type: TYPE_NORMAL
- en: It consists of a pointer to the first element of the slice and the length of
    the slice.
  prefs: []
  type: TYPE_NORMAL
- en: 'If you have a `Vec` with three elements:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'and then create a slice reference:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: 'you''ll get this memory layout:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: '[`&Vec<T>` vs `&[T]`](#vect-vs-t)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: When you need to pass an immutable reference to a `Vec` to a function, prefer
    `&[T]` over `&Vec<T>`.
  prefs: []
  type: TYPE_NORMAL
- en: This allows the function to accept any kind of slice, not necessarily one backed
    by a `Vec`.
  prefs: []
  type: TYPE_NORMAL
- en: 'For example, you can then pass a subset of the elements in a `Vec`. But it
    goes further than that—you could also pass a **slice of an array**:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'Array slices and `Vec` slices are the same type: they''re fat pointers to a
    contiguous sequence of elements. In the case of arrays, the pointer points to
    the stack rather than the heap, but that doesn''t matter when it comes to using
    the slice.'
  prefs: []
  type: TYPE_NORMAL
- en: '[Exercise](#exercise)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The exercise for this section is located in [`06_ticket_management/10_slices`](https://github.com/mainmatter/100-exercises-to-learn-rust/tree/main/exercises/06_ticket_management/10_slices)
  prefs: []
  type: TYPE_NORMAL
