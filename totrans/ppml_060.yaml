- en: Vectors
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://rust-exercises.com/100-exercises/06_ticket_management/02_vec.html](https://rust-exercises.com/100-exercises/06_ticket_management/02_vec.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: 'Arrays'' strength is also their weakness: their size must be known upfront,
    at compile-time. If you try to create an array with a size that''s only known
    at runtime, you''ll get a compilation error:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Arrays wouldn't work for our ticket management system—we don't know how many
    tickets we'll need to store at compile-time. This is where `Vec` comes in.
  prefs: []
  type: TYPE_NORMAL
- en: '[`Vec`](#vec)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '`Vec` is a growable array type, provided by the standard library.'
  prefs: []
  type: TYPE_NORMAL
- en: 'You can create an empty array using the `Vec::new` function:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'You would then push elements into the vector using the `push` method:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: New values are added to the end of the vector.
  prefs: []
  type: TYPE_NORMAL
- en: 'You can also create an initialized vector using the `vec!` macro, if you know
    the values at creation time:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: '[Accessing elements](#accessing-elements)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The syntax for accessing elements is the same as with arrays:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: The index must be of type `usize`.
  prefs: []
  type: TYPE_NORMAL
- en: 'You can also use the `get` method, which returns an `Option<&T>`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: Access is bounds-checked, just like element access with arrays. It has O(1)
    complexity.
  prefs: []
  type: TYPE_NORMAL
- en: '[Memory layout](#memory-layout)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '`Vec` is a heap-allocated data structure.'
  prefs: []
  type: TYPE_NORMAL
- en: When you create a `Vec`, it allocates memory on the heap to store the elements.
  prefs: []
  type: TYPE_NORMAL
- en: 'If you run the following code:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: 'you''ll get the following memory layout:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: '`Vec` keeps track of three things:'
  prefs: []
  type: TYPE_NORMAL
- en: The **pointer** to the heap region you reserved.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **length** of the vector, i.e. how many elements are in the vector.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The **capacity** of the vector, i.e. the number of elements that can fit in
    the space reserved on the heap.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'This layout should look familiar: it''s exactly the same as `String`!'
  prefs: []
  type: TYPE_NORMAL
- en: 'That''s not a coincidence: `String` is defined as a vector of bytes, `Vec<u8>`,
    under the hood:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: '[Exercise](#exercise)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The exercise for this section is located in [`06_ticket_management/02_vec`](https://github.com/mainmatter/100-exercises-to-learn-rust/tree/main/exercises/06_ticket_management/02_vec)
  prefs: []
  type: TYPE_NORMAL
