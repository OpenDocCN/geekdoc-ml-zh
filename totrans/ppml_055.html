<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>TryFrom and TryInto</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>TryFrom and TryInto</h1>
<blockquote>原文：<a href="https://rust-exercises.com/100-exercises/05_ticket_v2/13_try_from.html">https://rust-exercises.com/100-exercises/05_ticket_v2/13_try_from.html</a></blockquote>
                        
<p>In the previous chapter we looked at the <a href="/100-exercises/04_traits/09_from"><code>From</code> and <code>Into</code> traits</a>,
Rust's idiomatic interfaces for <strong>infallible</strong> type conversions.<br/>
But what if the conversion is not guaranteed to succeed?</p>
<p>We now know enough about errors to discuss the <strong>fallible</strong> counterparts of <code>From</code> and <code>Into</code>:
<code>TryFrom</code> and <code>TryInto</code>.</p>
<h2 id="tryfrom-and-tryinto-1"><a class="header" href="#tryfrom-and-tryinto-1"><code>TryFrom</code> and <code>TryInto</code></a></h2>
<p>Both <code>TryFrom</code> and <code>TryInto</code> are defined in the <code>std::convert</code> module, just like <code>From</code> and <code>Into</code>.</p>
<pre><code class="language-rust">pub trait TryFrom&lt;T&gt;: Sized {
    type Error;
    fn try_from(value: T) -&gt; Result&lt;Self, Self::Error&gt;;
}

pub trait TryInto&lt;T&gt;: Sized {
    type Error;
    fn try_into(self) -&gt; Result&lt;T, Self::Error&gt;;
}</code></pre>
<p>The main difference between <code>From</code>/<code>Into</code> and <code>TryFrom</code>/<code>TryInto</code> is that the latter return a <code>Result</code> type.<br/>
This allows the conversion to fail, returning an error instead of panicking.</p>
<h2 id="selferror"><a class="header" href="#selferror"><code>Self::Error</code></a></h2>
<p>Both <code>TryFrom</code> and <code>TryInto</code> have an associated <code>Error</code> type.
This allows each implementation to specify its own error type, ideally the most appropriate for the conversion
being attempted.</p>
<p><code>Self::Error</code> is a way to refer to the <code>Error</code> associated type defined in the trait itself.</p>
<h2 id="duality"><a class="header" href="#duality">Duality</a></h2>
<p>Just like <code>From</code> and <code>Into</code>, <code>TryFrom</code> and <code>TryInto</code> are dual traits.<br/>
If you implement <code>TryFrom</code> for a type, you get <code>TryInto</code> for free.</p>
<h2 id="exercise"><a class="header" href="#exercise">Exercise</a></h2>
<p>The exercise for this section is located in <a href="https://github.com/mainmatter/100-exercises-to-learn-rust/tree/main/exercises/05_ticket_v2/13_try_from"><code>05_ticket_v2/13_try_from</code></a></p>

                        
</body>
</html>