- en: Libraries and binaries
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://rust-exercises.com/100-exercises/05_ticket_v2/10_packages.html](https://rust-exercises.com/100-exercises/05_ticket_v2/10_packages.html)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: It took a bit of code to implement the `Error` trait for `TicketNewError`, didn't
    it?
  prefs: []
  type: TYPE_NORMAL
- en: A manual `Display` implementation, plus an `Error` impl block.
  prefs: []
  type: TYPE_NORMAL
- en: We can remove some of the boilerplate by using [`thiserror`](https://docs.rs/thiserror/latest/thiserror/),
    a Rust crate that provides a **procedural macro** to simplify the creation of
    custom error types.
  prefs: []
  type: TYPE_NORMAL
- en: 'But we''re getting ahead of ourselves: `thiserror` is a third-party crate,
    it''d be our first dependency!'
  prefs: []
  type: TYPE_NORMAL
- en: Let's take a step back to talk about Rust's packaging system before we dive
    into dependencies.
  prefs: []
  type: TYPE_NORMAL
- en: '[What is a package?](#what-is-a-package)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: A Rust package is defined by the `[package]` section in a `Cargo.toml` file,
    also known as its **manifest**. Within `[package]` you can set the package's metadata,
    such as its name and version.
  prefs: []
  type: TYPE_NORMAL
- en: Go check the `Cargo.toml` file in the directory of this section's exercise!
  prefs: []
  type: TYPE_NORMAL
- en: '[What is a crate?](#what-is-a-crate)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Inside a package, you can have one or more **crates**, also known as **targets**.
  prefs: []
  type: TYPE_NORMAL
- en: The two most common crate types are **binary crates** and **library crates**.
  prefs: []
  type: TYPE_NORMAL
- en: '[Binaries](#binaries)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: A binary is a program that can be compiled to an **executable file**.
  prefs: []
  type: TYPE_NORMAL
- en: It must include a function named `main`—the program's entry point. `main` is
    invoked when the program is executed.
  prefs: []
  type: TYPE_NORMAL
- en: '[Libraries](#libraries)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: Libraries, on the other hand, are not executable on their own. You can't *run*
    a library, but you can *import its code* from another package that depends on
    it.
  prefs: []
  type: TYPE_NORMAL
- en: A library groups together code (i.e. functions, types, etc.) that can be leveraged
    by other packages as a **dependency**.
  prefs: []
  type: TYPE_NORMAL
- en: All the exercises you've solved so far have been structured as libraries, with
    a test suite attached to them.
  prefs: []
  type: TYPE_NORMAL
- en: '[Conventions](#conventions)'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: 'There are some conventions around Rust packages that you need to keep in mind:'
  prefs: []
  type: TYPE_NORMAL
- en: The package's source code is usually located in the `src` directory.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: If there's a `src/lib.rs` file, `cargo` will infer that the package contains
    a library crate.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: If there's a `src/main.rs` file, `cargo` will infer that the package contains
    a binary crate.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: You can override these defaults by explicitly declaring your targets in the
    `Cargo.toml` file—see [`cargo`'s documentation](https://doc.rust-lang.org/cargo/reference/cargo-targets.html#cargo-targets)
    for more details.
  prefs: []
  type: TYPE_NORMAL
- en: Keep in mind that while a package can contain multiple crates, it can only contain
    one library crate.
  prefs: []
  type: TYPE_NORMAL
- en: '[Exercise](#exercise)'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The exercise for this section is located in [`05_ticket_v2/10_packages`](https://github.com/mainmatter/100-exercises-to-learn-rust/tree/main/exercises/05_ticket_v2/10_packages)
  prefs: []
  type: TYPE_NORMAL
