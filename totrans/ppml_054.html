<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>thiserror</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>thiserror</h1>
<blockquote>原文：<a href="https://rust-exercises.com/100-exercises/05_ticket_v2/12_thiserror.html">https://rust-exercises.com/100-exercises/05_ticket_v2/12_thiserror.html</a></blockquote>
                        
<p>That was a bit of detour, wasn't it? But a necessary one!<br/>
Let's get back on track now: custom error types and <code>thiserror</code>.</p>
<h2 id="custom-error-types"><a class="header" href="#custom-error-types">Custom error types</a></h2>
<p>We've seen how to implement the <code>Error</code> trait "manually" for a custom error type.<br/>
Imagine that you have to do this for most error types in your codebase. That's a lot of boilerplate, isn't it?</p>
<p>We can remove some of the boilerplate by using <a href="https://docs.rs/thiserror/latest/thiserror/"><code>thiserror</code></a>,
a Rust crate that provides a <strong>procedural macro</strong> to simplify the creation of custom error types.</p>
<pre><code class="language-rust">#[derive(thiserror::Error, Debug)]
enum TicketNewError {
    #[error("{0}")]
    TitleError(String),
    #[error("{0}")]
    DescriptionError(String),
}</code></pre>
<h2 id="you-can-write-your-own-macros"><a class="header" href="#you-can-write-your-own-macros">You can write your own macros</a></h2>
<p>All the <code>derive</code> macros we've seen so far were provided by the Rust standard library.<br/>
<code>thiserror::Error</code> is the first example of a <strong>third-party</strong> <code>derive</code> macro.</p>
<p><code>derive</code> macros are a subset of <strong>procedural macros</strong>, a way to generate Rust code at compile time.
We won't get into the details of how to write a procedural macro in this course, but it's important
to know that you can write your own!<br/>
A topic to approach in a more advanced Rust course.</p>
<h2 id="custom-syntax"><a class="header" href="#custom-syntax">Custom syntax</a></h2>
<p>Each procedural macro can define its own syntax, which is usually explained in the crate's documentation.
In the case of <code>thiserror</code>, we have:</p>
<ul>
<li><code>#[derive(thiserror::Error)]</code>: this is the syntax to derive the <code>Error</code> trait for a custom error type, helped by <code>thiserror</code>.</li>
<li><code>#[error("{0}")]</code>: this is the syntax to define a <code>Display</code> implementation for each variant of the custom error type.
<code>{0}</code> is replaced by the zero-th field of the variant (<code>String</code>, in this case) when the error is displayed.</li>
</ul>
<h2 id="exercise"><a class="header" href="#exercise">Exercise</a></h2>
<p>The exercise for this section is located in <a href="https://github.com/mainmatter/100-exercises-to-learn-rust/tree/main/exercises/05_ticket_v2/12_thiserror"><code>05_ticket_v2/12_thiserror</code></a></p>

                        
</body>
</html>