<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Panics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Panics</h1>
<blockquote>原文：<a href="https://rust-exercises.com/100-exercises/02_basic_calculator/04_panics.html">https://rust-exercises.com/100-exercises/02_basic_calculator/04_panics.html</a></blockquote>
                        
<p>Let's go back to the <code>speed</code> function you wrote for the <a href="/100-exercises/02_basic_calculator/02_variables">"Variables" section</a>.
It probably looked something like this:</p>
<pre><code class="language-rust">fn speed(start: u32, end: u32, time_elapsed: u32) -&gt; u32 {
    let distance = end - start;
    distance / time_elapsed
}</code></pre>
<p>If you have a keen eye, you might have spotted one issue<sup class="footnote-reference" id="fr-one-1"><a href="#footnote-one">1</a></sup>: what happens if <code>time_elapsed</code> is zero?</p>
<p>You can try it
out <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=36e5ddbe3b3f741dfa9f74c956622bac">on the Rust playground</a>!<br/>
The program will exit with the following error message:</p>
<pre><code class="language-text">thread 'main' panicked at src/main.rs:3:5:
attempt to divide by zero
</code></pre>
<p>This is known as a <strong>panic</strong>.<br/>
A panic is Rust's way to signal that something went so wrong that
the program can't continue executing, it's an <strong>unrecoverable error</strong><sup class="footnote-reference" id="fr-catching-1"><a href="#footnote-catching">2</a></sup>. Division by zero classifies as such an
error.</p>
<h2 id="the-panic-macro"><a class="header" href="#the-panic-macro">The panic! macro</a></h2>
<p>You can intentionally trigger a panic by calling the <code>panic!</code> macro<sup class="footnote-reference" id="fr-macro-1"><a href="#footnote-macro">3</a></sup>:</p>
<pre><code class="language-rust">fn main() {
    panic!("This is a panic!");
    // The line below will never be executed
    let x = 1 + 2;
}</code></pre>
<p>There are other mechanisms to work with recoverable errors in Rust, which <a href="/100-exercises/05_ticket_v2/06_fallibility">we'll cover later</a>.
For the time being we'll stick with panics as a brutal but simple stopgap solution.</p>
<h2 id="further-reading"><a class="header" href="#further-reading">Further reading</a></h2>
<ul>
<li><a href="https://doc.rust-lang.org/std/macro.panic.html">The panic! macro documentation</a></li>
</ul>
<h2 id="exercise"><a class="header" href="#exercise">Exercise</a></h2>
<p>The exercise for this section is located in <a href="https://github.com/mainmatter/100-exercises-to-learn-rust/tree/main/exercises/02_basic_calculator/04_panics"><code>02_basic_calculator/04_panics</code></a></p>
<hr/>
<ol class="footnote-definition"><li id="footnote-one">
<p>There's another issue with <code>speed</code> that we'll address soon enough. Can you spot it? <a href="#fr-one-1">↩</a></p>
</li>
<li id="footnote-catching">
<p>You can try to catch a panic, but it should be a last resort attempt reserved for very specific
circumstances. <a href="#fr-catching-1">↩</a></p>
</li>
<li id="footnote-macro">
<p>If it's followed by a <code>!</code>, it's a macro invocation. Think of macros as spicy functions for now. We'll
cover them in more detail later in the course. <a href="#fr-macro-1">↩</a></p>
</li>
</ol>
                        
</body>
</html>