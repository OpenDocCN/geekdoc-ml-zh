- en: Motion Classification and Anomaly Detection
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 运动分类和异常检测
- en: '![](../media/file664.jpg)'
  id: totrans-1
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file664.jpg)'
- en: DALL·E prompt - 1950s style cartoon illustration set in a vintage audio lab.
    Scientists, dressed in classic attire with white lab coats, are intently analyzing
    audio data on large chalkboards. The boards display intricate FFT (Fast Fourier
    Transform) graphs and time-domain curves. Antique audio equipment is scattered
    around, but the data representations are clear and detailed, indicating their
    focus on audio analysis.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: DALL·E 提示 - 1950 年代风格的卡通插图，场景设定在复古音频实验室。科学家们穿着经典的白色实验服，专注地分析大型黑板上的音频数据。黑板上显示着复杂的快速傅里叶变换（FFT）图和时间域曲线。复古音频设备散布四周，但数据表示清晰且详细，表明他们专注于音频分析。
- en: Overview
  id: totrans-3
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 概述
- en: Transportation is the backbone of global commerce. Millions of containers are
    transported daily via various means, such as ships, trucks, and trains, to destinations
    worldwide. Ensuring the safe and efficient transit of these containers is a monumental
    task that requires leveraging modern technology, and TinyML is undoubtedly one
    of the key solutions.
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 运输是全球贸易的支柱。每天通过各种方式，如船只、卡车和火车，将数百万个集装箱运往世界各地。确保这些集装箱的安全和高效运输是一项艰巨的任务，需要利用现代技术，而
    TinyML 无疑是关键解决方案之一。
- en: In this hands-on lab, we will work to solve real-world problems related to transportation.
    We will develop a Motion Classification and Anomaly Detection system using the
    XIAOML Kit, the Arduino IDE, and the Edge Impulse Studio. This project will help
    us understand how containers experience different forces and motions during various
    phases of transportation, including terrestrial and maritime transit, vertical
    movement via forklifts, and periods of stationary storage in warehouses.
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个动手实验室中，我们将解决与运输相关的真实世界问题。我们将使用 XIAOML 套件、Arduino IDE 和 Edge Impulse Studio
    开发运动分类和异常检测系统。这个项目将帮助我们了解集装箱在运输的不同阶段（包括陆地和海上运输、通过叉车垂直移动以及仓库中的静止存储期）所经历的不同力和运动。
- en: '**Learning Objectives**'
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: '**学习目标**'
- en: Setting up the XIAOML Kit
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置 XIAOML 套件
- en: Data Collection and Preprocessing
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 数据收集和预处理
- en: Building the Motion Classification Model
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 构建运动分类模型
- en: Implementing Anomaly Detection
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实施异常检测
- en: Real-world Testing and Analysis
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 真实世界测试与分析
- en: By the end of this lab, you’ll have a working prototype that can classify different
    types of motion and detect anomalies during the transportation of containers.
    This knowledge can serve as a stepping stone to more advanced projects in the
    burgeoning field of TinyML, particularly those involving vibration.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 到这个实验室结束时，你将拥有一个可以分类不同类型运动并在集装箱运输过程中检测异常的工作原型。这些知识可以作为进入蓬勃发展的 TinyML 领域更高级项目的垫脚石，特别是那些涉及振动的项目。
- en: Installing the IMU
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 安装 IMU
- en: The XIAOML Kit comes with a built-in LSM6DS3TR-C 6-axis IMU sensor on the expansion
    board, eliminating the need for external sensor connections. This integrated approach
    offers a clean and reliable platform for motion-based machine learning applications.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: XIAOML 套件在扩展板上内置了 LSM6DS3TR-C 6 轴 IMU 传感器，消除了外部传感器连接的需求。这种集成方法提供了一个干净且可靠的平台，适用于基于运动的机器学习应用。
- en: 'The LSM6DS3TR-C combines a 3-axis accelerometer and 3-axis gyroscope in a single
    package, connected via I2C to the XIAO ESP32S3 at address 0x6A that provides:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: LSM6DS3TR-C 将 3 轴加速度计和 3 轴陀螺仪集成在一个封装中，通过 I2C 连接到 XIAO ESP32S3 的地址 0x6A，提供以下功能：
- en: '**Accelerometer ranges**: ±2/±4/±8/±16 g (we’ll use ±2g by default)'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**加速度计范围**: ±2/±4/±8/±16 g (默认使用 ±2g)'
- en: '**Gyroscope ranges**: ±125/±250/±500/±1000/±2000 dps (we’ll use ±250 dps by
    default)'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**陀螺仪范围**: ±125/±250/±500/±1000/±2000 dps (默认使用 ±250 dps)'
- en: '**Resolution**: 16-bit ADC'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**分辨率**: 16 位 ADC'
- en: '**Communication**: I2C interface at address 0x6A'
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**通信**: 地址 0x6A 的 I2C 接口'
- en: '**Power**: Ultra-low power design'
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**功耗**: 超低功耗设计'
- en: '![](../media/file665.png)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file665.png)'
- en: '**Coordinate System:** The sensor operates within a right-handed coordinate
    system. When looking at the expansion board from the bottom (where you can see
    the IMU sensor with the point mark):'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '**坐标系**: 传感器在右手坐标系内运行。当你从底部（你可以看到带有标记点的 IMU 传感器）看扩展板时：'
- en: '**X-axis**: Points to the right'
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**X轴**: 指向右侧'
- en: '**Y-axis**: Points forward (away from you)'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Y轴**: 指向前方（远离你）'
- en: '**Z-axis**: Points upward (out of the board)'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Z轴**: 指向上方（出板外）'
- en: Setting Up the Hardware
  id: totrans-26
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 设置硬件
- en: Since the XIAOML Kit comes pre-assembled with the expansion board, no additional
    hardware connections are required. The LSM6DS3TR-C IMU is already properly connected
    via I2C.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 由于XIAOML Kit已预装了扩展板，因此不需要额外的硬件连接。LSM6DS3TR-C IMU已经通过I2C正确连接。
- en: '**What’s Already Connected:**'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '**已连接的内容：**'
- en: LSM6DS3TR-C IMU → I2C (SDA/SCL) → XIAO ESP32S3
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: LSM6DS3TR-C IMU → I2C（SDA/SCL）→ XIAO ESP32S3
- en: 'I2C Address: 0x6A'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: I2C地址：0x6A
- en: 'Power: 3.3V from XIAO ESP32S3'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 电源：来自XIAO ESP32S3的3.3V
- en: '**Required Library:** You should have the library installed during the Setup.
    If not, install the Seeed Arduino LSM6DS3 library following the steps:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: '**所需库**：您应该在设置过程中安装库。如果没有，请按照以下步骤安装Seeed Arduino LSM6DS3库：'
- en: Open Arduino IDE Library Manager
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开Arduino IDE库管理器
- en: Search for “LSM6DS3”
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 搜索“LSM6DS3”
- en: Install **“Seeed Arduino LSM6DS3”** by Seeed Studio
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 安装Seeed Studio的**“Seeed Arduino LSM6DS3”**
- en: '**Important**: Do NOT install “Arduino_LSM6DS3 by Arduino” - that’s for different
    boards!'
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**重要**：不要安装“Arduino_LSM6DS3 by Arduino” - 那是针对不同板子的！'
- en: Testing the IMU Sensor
  id: totrans-37
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 测试IMU传感器
- en: 'Let’s start with a simple test to verify the IMU is working correctly. Upload
    this code to test the sensor:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们从一项简单的测试开始，以验证IMU是否正常工作。上传此代码以测试传感器：
- en: '[PRE0]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'When the kit is resting flat on a table, you should see:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 当套件平放在桌子上时，你应该看到：
- en: Z-axis acceleration around +1.0g (gravity)
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Z轴加速度约为+1.0g（重力）
- en: X and Y acceleration near 0.0g
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: X和Y加速度接近0.0g
- en: All gyroscope values near 0.0°/s
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 所有陀螺仪值接近0.0°/s
- en: Move the kit around to see the values change accordingly.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 移动套件以查看相应值的变化。
- en: The TinyML Motion Classification Project
  id: totrans-45
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: TinyML运动分类项目
- en: We will simulate container (or, more accurately, package) transportation through
    various scenarios to make this tutorial more relatable and practical.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将通过模拟各种场景来模拟集装箱（或更准确地说，包裹）的运输，使本教程更具相关性和实用性。
- en: '![](../media/file666.jpg)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file666.jpg)'
- en: 'Using the accelerometer of the XIAOML Kit, we’ll capture motion data by manually
    simulating the conditions of:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 使用XIAOML Kit的加速度计，我们将通过手动模拟以下条件来捕捉运动数据：
- en: '**Maritime** (pallets on boats) - Movement in all axes with wave-like patterns'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**海事**（船上的托盘）- 在所有轴向上以波浪状模式移动'
- en: '**Terrestrial** (pallets on trucks/trains) - Primarily horizontal movement'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**地面**（卡车/火车上的托盘）- 主要水平移动'
- en: '**Lift** (pallets being moved by forklift) - Primarily vertical movement'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**提升**（叉车移动的托盘）- 主要垂直移动'
- en: '**Idle** (pallets in storage) - Minimal movement'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**空闲**（存储中的托盘）- 最小移动'
- en: From the above image, we can define for our simulation that primarily horizontal
    movements (<semantics><mi>x</mi><annotation encoding="application/x-tex">x</annotation></semantics>
    or <semantics><mi>y</mi><annotation encoding="application/x-tex">y</annotation></semantics>
    axis) should be associated with the “Terrestrial class.” Vertical movements (<semantics><mi>z</mi><annotation
    encoding="application/x-tex">z</annotation></semantics>-axis) with the “Lift Class,”
    no activity with the “Idle class,” and movement on all three axes to [Maritime
    class.](https://www.containerhandbuch.de/chb_e/stra/index.html?/chb_e/stra/stra_02_03_03.htm)
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 从上面的图像中，我们可以为我们的模拟定义，主要水平移动（<semantics><mi>x</mi><annotation encoding="application/x-tex">x</annotation></semantics>或<semantics><mi>y</mi><annotation
    encoding="application/x-tex">y</annotation></semantics>轴）应与“地面类别”相关联。垂直移动（<semantics><mi>z</mi><annotation
    encoding="application/x-tex">z</annotation></semantics>-轴）与“提升类别”相关联，没有活动与“空闲类别”相关联，所有三个轴上的移动到[海事类别](https://www.containerhandbuch.de/chb_e/stra/index.html?/chb_e/stra/stra_02_03_03.htm)。
- en: '![](../media/file667.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file667.jpg)'
- en: Data Collection
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据收集
- en: 'For data collection, we have several options available. In a real-world scenario,
    we can have our device, for example, connected directly to one container, and
    the collected data stored in a file (for example, CSV) on an SD card. Data can
    also be sent remotely to a nearby repository, such as a mobile phone, using Wi-Fi
    or Bluetooth (as demonstrated in this project: [Sensor DataLogger](https://www.hackster.io/mjrobot/sensor-datalogger-50e44d)).
    Once your dataset is collected and stored as a .CSV file, it can be uploaded to
    the Studio using the [CSV Wizard tool](https://docs.edgeimpulse.com/docs/edge-impulse-studio/data-acquisition/csv-wizard).'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 对于数据收集，我们有几个选项可供选择。在实际场景中，我们可以将我们的设备，例如，直接连接到一个容器上，并将收集到的数据存储在SD卡上的文件中（例如，CSV文件）。数据也可以通过Wi-Fi或蓝牙（如本项目所示：[Sensor
    DataLogger](https://www.hackster.io/mjrobot/sensor-datalogger-50e44d)）远程发送到附近的存储库，如手机。一旦您的数据集收集并存储为.CSV文件，就可以使用[CSV向导工具](https://docs.edgeimpulse.com/docs/edge-impulse-studio/data-acquisition/csv-wizard)上传到工作室。
- en: In this [video](https://youtu.be/2KBPq_826WM), you can learn alternative ways
    to send data to the Edge Impulse Studio.
  id: totrans-57
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 在这个[视频](https://youtu.be/2KBPq_826WM)中，你可以学习将数据发送到 Edge Impulse Studio 的替代方法。
- en: Preparing the Data Collection Code
  id: totrans-58
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 准备数据收集代码
- en: In this lab, we will connect the Kit directly to the Edge Impulse Studio, which
    will also be used for data pre-processing, model training, testing, and deployment.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个实验室中，我们将直接将套件连接到 Edge Impulse Studio，它也将用于数据预处理、模型训练、测试和部署。
- en: For data collection, we should first connect the Kit to Edge Impulse Studio,
    which will also be used for data pre-processing, model training, testing, and
    deployment.
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 对于数据收集，我们首先应该将套件连接到 Edge Impulse Studio，它也将用于数据预处理、模型训练、测试和部署。
- en: Follow the instructions [here](https://docs.edgeimpulse.com/docs/edge-impulse-cli/cli-installation)
    to install [Node.js](https://nodejs.org/en/) and Edge Impulse CLI on your computer.
  id: totrans-61
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 按照以下[链接](https://docs.edgeimpulse.com/docs/edge-impulse-cli/cli-installation)中的说明，在你的计算机上安装
    [Node.js](https://nodejs.org/en/) 和 Edge Impulse CLI。
- en: 'Once the XIAOML Kit is not a fully supported development board by Edge Impulse,
    we should, for example, use the [CLI Data Forwarder](https://docs.edgeimpulse.com/docs/edge-impulse-cli/cli-data-forwarder)
    to capture data from our sensor and send it to the Studio, as shown in this diagram:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 XIAOML 套件不是 Edge Impulse 完全支持的开发板，例如，我们应该使用[CLI 数据转发器](https://docs.edgeimpulse.com/docs/edge-impulse-cli/cli-data-forwarder)来捕获我们的传感器数据并将其发送到
    Studio，如图所示：
- en: '![](../media/file668.jpg)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file668.jpg)'
- en: 'We’ll modify our test code to output data in a format suitable for Edge Impulse:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将修改测试代码以输出适合 Edge Impulse 的数据格式：
- en: '[PRE1]'
  id: totrans-65
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Upload the code to the Arduino IDE. We should see the accelerometer values
    (converted to m/s²) at the Serial Monitor:'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 将代码上传到 Arduino IDE。我们应该在串行监视器中看到加速度计的值（转换为 m/s²）：
- en: '![](../media/file669.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file669.png)'
- en: Keep the code running, but **turn off the Serial Monitor**. The data generated
    by the Kit will be sent to the Edge Impulse Studio via Serial Connection.
  id: totrans-68
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 保持代码运行，但**关闭串行监视器**。套件生成的数据将通过串行连接发送到 Edge Impulse Studio。
- en: Connecting to Edge Impulse for Data Collection
  id: totrans-69
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 连接到 Edge Impulse 进行数据收集
- en: '**Create an Edge Impulse Project** - Go to Edge Impulse Studio and create a
    new project - Choose a descriptive name (keep under 63 characters for Arduino
    library compatibility)'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: '**创建 Edge Impulse 项目** - 前往 Edge Impulse Studio 并创建一个新的项目 - 选择一个描述性的名称（为了与
    Arduino 库兼容，名称长度请保持在 63 个字符以内）'
- en: '![](../media/file670.png)'
  id: totrans-71
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file670.png)'
- en: '**Set up CLI Data Forwarder** - Install Edge Impulse CLI on your computer -
    Confirm that the XIAOML Kit is connected to the computer, **the code is running
    and the Serial Monitor is OFF**, otherwise we can get an error. - On the Computer
    Terminal, run: `edge-impulse-data-forwarder --clean` - Enter your Edge Impulse
    credentials - Select your project and configure device settings'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: '**设置 CLI 数据转发器** - 在你的计算机上安装 Edge Impulse CLI - 确认 XIAOML 套件已连接到计算机，**代码正在运行且串行监视器已关闭**，否则我们可能会遇到错误。
    - 在计算机终端运行：`edge-impulse-data-forwarder --clean` - 输入你的 Edge Impulse 凭据 - 选择你的项目并配置设备设置'
- en: '![](../media/file671.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file671.png)'
- en: Go to the Edge Impulse Studio Project. On the `Device` section is possible to
    verify if the kit is correctly connected (the dot should be green).
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 前往 Edge Impulse Studio 项目。在“设备”部分可以验证套件是否正确连接（点应该是绿色的）。
- en: '![](../media/file672.png)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file672.png)'
- en: Data Collection at the Studio
  id: totrans-76
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在 Studio 进行数据收集
- en: 'As discussed before, we should capture data from all four **Transportation
    Classes.** Imagine that you have a container with a built-in accelerometer (In
    this case, our XIAOML Kit). Now imagine your container is on a boat, facing an
    angry ocean:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，我们应该从所有四个**运输类别**中捕获数据。想象一下，你有一个内置加速度计的容器（在这种情况下，我们的 XIAOML 套件）。现在想象你的容器在一艘船上，面对愤怒的大海：
- en: '![](../media/file673.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file673.png)'
- en: Or in a Truck, travelling on a road, or being moved with a forklift, etc.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 或者在一个卡车、在道路上行驶，或者被叉车移动等情况下。
- en: Movement Simulation
  id: totrans-80
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 运动模拟
- en: '**Maritime Class:**'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '**海事类别**：'
- en: Hold the kit and simulate boat movement
  id: totrans-82
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 持住套件并模拟船只运动
- en: Move in all three axes with wave-like, undulating motions
  id: totrans-83
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 以波浪状、起伏的运动在三个轴上移动
- en: Include gentle rolling and pitching movements
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 包括轻微的滚动和俯仰运动
- en: '**Terrestrial Class:**'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: '**地面类别**：'
- en: Move the kit horizontally in straight lines (left to right and vice versa)
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将套件沿直线水平移动（从左到右和相反方向）
- en: Simulate truck/train vibrations with small horizontal shakes
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过小幅度的水平震动来模拟卡车/火车的振动
- en: Occasional gentle bumps and turns
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 偶尔轻微的颠簸和转弯
- en: '**Lift Class:**'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '**提升类别**：'
- en: Move the kit primarily in vertical directions (up and down)
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 主要在垂直方向上移动套件（上升和下降）
- en: 'Simulate forklift operations: up, pause, down'
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 模拟叉车操作：上升，暂停，下降
- en: Include some short horizontal positioning movements
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 包含一些短的水平定位运动
- en: '**Idle Class:**'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '**空闲类别：**'
- en: Place the kit on a stable surface
  id: totrans-94
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将套件放置在稳定的表面上
- en: Minimal to no movement
  id: totrans-95
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最小或无运动
- en: Capture environmental vibrations and sensor noise
  id: totrans-96
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 捕获环境振动和传感器噪声
- en: Data Acquisition
  id: totrans-97
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 数据采集
- en: 'On the `Data Acquisition` section, you should see that your board `[xiaoml-kit]`
    is connected. The sensor is available: `[sensor with 3 axes (accX, accY, accZ)]`
    with a sampling frequency of `[50 Hz]`. The Studio suggests a sample length of
    `[10000]` ms (10 s). The last thing left is defining the sample label. Let’s start,
    for example, with`[terrestrial]`.'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 在 `数据采集` 部分，您应该看到您的板 `[xiaoml-kit]` 已连接。传感器可用： `[具有3个轴（accX，accY，accZ）的传感器]`，采样频率为
    `[50 Hz]`。工作室建议样本长度为 `[10000]` 毫秒（10秒）。最后要做的就是定义样本标签。让我们从`[陆地]`开始。
- en: Press `[Start Sample]`and move your kit horizontally (left to right), keeping
    it in one direction. After 10 seconds, our data will be uploaded to the Studio.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 按下 `[开始采样]` 并将您的套件水平移动（从左到右），保持在一个方向上。10秒后，我们的数据将被上传到工作室。
- en: Below is one sample (raw data) of 10 seconds of collected data. It is notable
    that the ondulatory movement predominantly occurs along the Y-axis (left-right).
    The other axes are almost stationary (the X-axis is centered around zero, and
    the Z-axis is centered around 9.8 ms² due to gravity).
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是10秒收集数据的其中一个样本（原始数据）。值得注意的是，波动运动主要沿着Y轴（左右）发生。其他轴几乎处于静止状态（X轴围绕零中心，Z轴由于重力围绕9.8
    ms²中心）。
- en: '![](../media/file674.png)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file674.png)'
- en: 'You should capture, for example, around 2 minutes (ten to twelve samples of
    10 seconds each) for each of the four classes. Using the `3 dots` after each sample,
    select two and move them to the **Test set**. Alternatively, you can use the Automatic
    `Train/Test Split` tool on the **Danger Zone** of the `Dashboard` tab. Below,
    it is possible to see the result datasets:'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: 您应该为每个类别捕获大约2分钟（十个到十二个10秒的样本）。在每个样本之后使用“3个点”，选择两个并将它们移动到**测试集**。或者，您可以使用**仪表板**标签页的**危险区域**上的自动**训练/测试分割**工具。下面，您可以看到结果数据集：
- en: '![](../media/file675.png)'
  id: totrans-103
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file675.png)'
- en: Data Pre-Processing
  id: totrans-104
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据预处理
- en: The raw data type captured by the accelerometer is a “time series” and should
    be converted to “tabular data”. We can do this conversion using a sliding window
    over the sample data. For example, in the below figure,
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 加速度计捕获的原始数据类型是“时间序列”，应将其转换为“表格数据”。我们可以通过在样本数据上使用滑动窗口来完成此转换。例如，在下面的图中，
- en: '![](../media/file676.png)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file676.png)'
- en: We can see 10 seconds of accelerometer data captured with a sample rate (SR)
    of 50 Hz. A 2-second window will capture 300 data points (3 axes <semantics><mi>×</mi><annotation
    encoding="application/x-tex">\times</annotation></semantics> 2 seconds <semantics><mi>×</mi><annotation
    encoding="application/x-tex">\times</annotation></semantics> 50 samples). We will
    slide this window every 200ms, creating a larger dataset where each instance has
    300 raw features.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到以50 Hz的采样率捕获的10秒加速度计数据。2秒窗口将捕获300个数据点（3轴 <semantics><mi>×</mi><annotation
    encoding="application/x-tex">\times</annotation></semantics> 2秒 <semantics><mi>×</mi><annotation
    encoding="application/x-tex">\times</annotation></semantics> 50个样本）。我们将每200ms滑动这个窗口，创建一个更大的数据集，其中每个实例都有300个原始特征。
- en: You should use the best SR for your case, considering Nyquist’s theorem, which
    states that a periodic signal must be sampled at more than twice the signal’s
    highest frequency component.
  id: totrans-108
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 您应该根据尼奎斯特定理使用最适合您情况的采样率，该定理指出，周期性信号必须以高于信号最高频率成分两倍以上的速率进行采样。
- en: Data preprocessing is a challenging area for embedded machine learning. Still,
    Edge Impulse helps overcome this with its digital signal processing (DSP) preprocessing
    step and, more specifically, the Spectral Features.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 数据预处理是嵌入式机器学习的挑战领域。然而，Edge Impulse通过其数字信号处理（DSP）预处理步骤以及更具体的频谱特征帮助克服这一挑战。
- en: 'On the Studio, this dataset will be the input of a Spectral Analysis block,
    which is excellent for analyzing repetitive motion, such as data from accelerometers.
    This block will perform a DSP (Digital Signal Processing), extracting features
    such as “FFT” or “Wavelets”. In the most common case, FFT, the **Time Domain Statistical
    features** per axis/channel are:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 在Studio中，这个数据集将是频谱分析模块的输入，该模块非常适合分析重复运动，如加速度计的数据。此模块将执行DSP（数字信号处理），提取“FFT”或“小波”等特征。在最常见的案例中，FFT，每个轴/通道的**时域统计特征**如下：
- en: RMS
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 均方根
- en: Skewness
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 偏度
- en: Kurtosis
  id: totrans-113
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 峰度
- en: '![](../media/file677.png)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file677.png)'
- en: 'And the **Frequency Domain Spectral features** per axis/channel are:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 每个轴/通道的**频域特征**如下：
- en: Spectral Power
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 频谱功率
- en: Skewness
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 偏度
- en: Kurtosis
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 峰度
- en: '![](../media/file678.png)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file678.png)'
- en: For example, for an FFT length of 32 points, the Spectral Analysis Block’s resulting
    output will be 21 features per axis (a total of 63 features).
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，对于32点的FFT长度，频谱分析模块的结果输出将是每个轴21个特征（总共63个特征）。
- en: Those 63 features will serve as the input tensor for a Neural Network Classifier
    and the Anomaly Detection model (K-Means).
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 这63个特征将作为神经网络分类器和异常检测模型（K-Means）的输入张量。
- en: You can learn more by digging into the lab [DSP Spectral Features](ch056.xhtml#sec-dsp-spectral-features-overview-a7be)
  id: totrans-122
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 您可以通过深入了解实验室的[DSP频谱特征](ch056.xhtml#sec-dsp-spectral-features-overview-a7be)来了解更多信息。
- en: Model Design
  id: totrans-123
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 模型设计
- en: 'Our classifier will be a Dense Neural Network (DNN) that will have 63 neurons
    on its input layer, two hidden layers with 20 and 10 neurons, and an output layer
    with four neurons (one per each class), as shown here:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的分类器将是一个密集神经网络（DNN），其输入层将有63个神经元，两个隐藏层分别有20和10个神经元，以及一个输出层，有四个神经元（每个类别一个），如图所示：
- en: '![](../media/file679.png)'
  id: totrans-125
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file679.png)'
- en: Impulse Design
  id: totrans-126
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 冲激设计
- en: An impulse takes raw data, uses signal processing to extract features, and then
    uses a learning block (**Dense model**) to classify new data.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 冲激从原始数据中提取特征，使用信号处理提取特征，然后使用学习模块（**密集模型**）对新数据进行分类。
- en: We also utilize a second model, the **K-means**, which can be used for Anomaly
    Detection. If we imagine that we could have our known classes as clusters, any
    sample that cannot fit into one of these clusters could be an outlier, an anomaly
    (for example, a container rolling out of a ship on the ocean or being upside down
    on the floor).
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还利用第二个模型，即**K-means**，它可以用于异常检测。如果我们想象我们的已知类别可以作为簇，那么任何无法适应这些簇的样本可能是一个异常值，一个异常（例如，在海洋上滚出船的集装箱或倒置在地面上）。
- en: '![](../media/file680.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file680.jpg)'
- en: Imagine our XIAOML Kit rolling or moving upside-down, on a movement complement
    different from the one trained on.
  id: totrans-130
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 想象我们的XIAOML套件滚动或倒置移动，在一个与训练时不同的运动补全上。
- en: '![](../media/file681.png)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file681.png)'
- en: 'Below the final Impulse design:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 在最终的冲激设计下方：
- en: '![](../media/file682.png)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file682.png)'
- en: Generating features
  id: totrans-134
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 生成特征
- en: At this point in our project, we have defined the pre-processing method, and
    the model has been designed. Now, it is time to have the job done. First, let’s
    convert the raw data (time-series type) into tabular data. Go to the `Spectral
    Features` tab and select `[Save Parameters]`. Alternatively, instead of using
    the default values, we can select the `[Autotune parameters]` button. In this
    case, the Studio will define new hyperparameters, as the filter design and FFT
    length, based on the raw data.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的项目这个阶段，我们已经定义了预处理方法，并且模型已经设计完成。现在，是时候完成任务了。首先，让我们将原始数据（时间序列类型）转换为表格数据。转到“频谱特征”标签并选择“[保存参数]”。或者，我们也可以选择“[自动调整参数]”按钮。在这种情况下，Studio将根据原始数据定义新的超参数，如滤波器设计和FFT长度。
- en: '![](../media/file683.png)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![图片](../media/file683.png)'
- en: At the top menu, select the `Generate features` tab, and there, select the options,
    `Calculate feature importance`, `Normalize features,` and press the `[Generate
    features]` button. Each 2-second window of data (300 datapoints) will be converted
    into a single tabular data point with 63 features.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 在顶部菜单中，选择“生成特征”标签，然后在那里选择选项，“计算特征重要性”，“归一化特征”，然后按“[生成特征]”按钮。每个2秒的数据窗口（300个数据点）将被转换成一个包含63个特征的单一表格数据点。
- en: The Feature Explorer will display this data in 2D using [UMAP.](https://umap-learn.readthedocs.io/en/latest/)
    Uniform Manifold Approximation and Projection (UMAP) is a dimensionality reduction
    technique that can be used for visualization, similar to t-SNE, but also for general
    non-linear dimensionality reduction.
  id: totrans-138
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 特征探索器将使用[UMAP](https://umap-learn.readthedocs.io/en/latest/)（均匀流形近似和投影）在2D中显示这些数据。UMAP是一种降维技术，可用于可视化，类似于t-SNE，但也可以用于一般的非线性降维。
- en: The visualization enables one to verify that the classes present an excellent
    separation, indicating that the classifier should perform well.
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 可视化使得人们可以验证这些类别表现出优秀的分离，这表明分类器应该表现良好。
- en: '![](../media/file684.png)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file684.png)'
- en: Optionally, you can analyze the relative importance of each feature for one
    class compared with other classes.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 可选地，你可以分析每个特征相对于其他类别的相对重要性。
- en: Training
  id: totrans-142
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 训练
- en: 'Our classifier will be a Dense Neural Network (DNN) that will have 63 neurons
    on its input layer, two hidden layers with 20 and 10 neurons, and an output layer
    with four neurons (one per each class), as shown here:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的分类器将是一个密集神经网络（DNN），其输入层将有63个神经元，两个隐藏层分别有20和10个神经元，输出层有四个神经元（每个类别一个），如图所示：
- en: '![](../media/file685.png)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file685.png)'
- en: As hyperparameters, we will use a Learning Rate of 0.005 and 20% of the data
    for validation for 30 epochs. After training, we can see that the accuracy is
    100%.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 作为超参数，我们将使用学习率0.005和20%的数据进行验证，持续30个epoch。训练后，我们可以看到准确率为100%。
- en: '![](../media/file686.png)'
  id: totrans-146
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file686.png)'
- en: 'For anomaly detection, we should choose the suggested features that are precisely
    the most important in feature extraction. The number of clusters will be 32, as
    suggested by the Studio. After training, we can select some data for testing,
    such as maritime data. The resulting Anomaly score was `min: -0.1642, max: 0.0738,
    avg: -0.0867`.'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: '对于异常检测，我们应该选择建议的特征，这些特征正是特征提取中最重要的一部分。簇的数量将是32，如工作室所建议。训练后，我们可以选择一些数据进行测试，例如海洋数据。得到的异常分数为`min:
    -0.1642, max: 0.0738, avg: -0.0867`。'
- en: When changing the data, it is possible to realize that small or negative Anomaly
    Scores indicate that the data are normal.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 当更改数据时，可能会发现小的或负的异常分数表明数据是正常的。
- en: '![](../media/file687.png)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file687.png)'
- en: Testing
  id: totrans-150
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 测试
- en: Using 20% of the data left behind during the data capture phase, we can verify
    how our model will behave with unknown data; if not 100% (what is expected), the
    result was very good (8%).
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 使用在数据捕获阶段留下的20%的数据，我们可以验证我们的模型在未知数据上的表现；如果不是100%（预期的结果），结果仍然非常好（8%）。
- en: '![](../media/file688.png)'
  id: totrans-152
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file688.png)'
- en: 'You should also use your kit (which is still connected to the Studio) and perform
    some Live Classification. For example, let’s test some “terrestrial” movement:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 你还应该使用你的套件（仍然连接到工作室）并执行一些实时分类。例如，让我们测试一些“地面”运动：
- en: '![](../media/file689.png)'
  id: totrans-154
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file689.png)'
- en: Be aware that here, you will capture real data with your device and upload it
    to the Studio, where an inference will be made using the trained model (note that
    the model is not on your device).
  id: totrans-155
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 注意，在这里，你将使用你的设备捕获真实数据并将其上传到工作室，在那里将使用训练好的模型进行推理（注意模型不在你的设备上）。
- en: Deploy
  id: totrans-156
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 部署
- en: Now it is time for magic! The Studio will package all the needed libraries,
    preprocessing functions, and trained models, downloading them to your computer.
    You should select the Arduino Library option, and then, at the bottom, choose
    Quantized (Int8) and click `[Build]`. A ZIP file will be created and downloaded
    to your computer.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: 现在是时候施展魔法了！工作室将打包所有需要的库、预处理函数和训练好的模型，并将它们下载到你的电脑上。你应该选择Arduino库选项，然后在底部选择量化（Int8），然后点击“[构建]”。将创建一个ZIP文件并下载到你的电脑上。
- en: '![](../media/file690.png)'
  id: totrans-158
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file690.png)'
- en: 'On your Arduino IDE, go to the Sketch tab, select the option Add.ZIP Library,
    and Choose the.zip file downloaded by the Studio:'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的Arduino IDE中，转到“草图”选项卡，选择添加.ZIP库的选项，并选择由工作室下载的.zip文件：
- en: '![](../media/file691.png)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file691.png)'
- en: Inference
  id: totrans-161
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 推理
- en: Now, it is time for a real test. We will make inferences that are wholly disconnected
    from the Studio. Let’s change one of the code examples created when you deploy
    the Arduino Library.
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，是时候进行真正的测试了。我们将进行与工作室完全断开的推理。让我们更改在部署Arduino库时创建的一个代码示例。
- en: 'In your Arduino IDE, go to the `File/Examples` tab and look for your project,
    and in examples, select `nano_ble_sense_accelerometer`:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 在你的Arduino IDE中，转到“文件/示例”选项卡，找到你的项目，在示例中，选择`nano_ble_sense_accelerometer`：
- en: Of course, this is not your board, but we can have the code working with only
    a few changes.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，这不是你的板子，但我们可以通过仅做少量修改使代码工作。
- en: 'For example, at the beginning of the code, you have the library related to
    Arduino Sense IMU:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，在代码的开头，你有与Arduino Sense IMU相关的库：
- en: '[PRE2]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Change the “includes” portion with the code related to the IMU:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 将与IMU相关的代码部分“includes”进行修改：
- en: '[PRE3]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Change the Constant Defines
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 修改常量定义
- en: '[PRE4]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'On the setup function, initiate the IMU:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 在设置函数中，初始化IMU：
- en: '[PRE5]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'At the loop function, the buffers buffer[ix], buffer[ix + 1], and buffer[ix
    + 2] will receive the 3-axis data captured by the accelerometer. In the original
    code, you have the line:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 在循环函数中，缓冲区buffer[ix]、buffer[ix + 1]和buffer[ix + 2]将接收加速度计捕获的3轴数据。在原始代码中，你有以下行：
- en: '[PRE6]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Change it with this block of code:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 用以下代码块替换它：
- en: '[PRE7]'
  id: totrans-176
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'You should reorder the following two blocks of code. First, you make the conversion
    to raw data to “Meters per squared second (m/s²)”, followed by the test regarding
    the maximum acceptance range (that here is in m/s², but on Arduino, was in Gs):'
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该重新排列以下两个代码块。首先，将原始数据转换为“每平方秒米（m/s²）”，然后进行关于最大接受范围的测试（在这里是m/s²，但在Arduino上是Gs）：
- en: '[PRE8]'
  id: totrans-178
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: And this is enough. We can also adjust how the inference is displayed in the
    Serial Monitor. You can now upload the complete code below to your device and
    proceed with the inferences.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 而且这就足够了。我们还可以调整在串行监视器中显示推理的方式。你现在可以上传下面的完整代码到你的设备上，并继续进行推理。
- en: '[PRE9]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: The complete code is available on the [Lab’s GitHub](https://github.com/Mjrovai/XIAO-ESP32S3-Sense/tree/main/XIAOML_Kit_code/motion_class_ad_inference).
  id: totrans-181
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 完整的代码可在[实验室的GitHub](https://github.com/Mjrovai/XIAO-ESP32S3-Sense/tree/main/XIAOML_Kit_code/motion_class_ad_inference)上找到
- en: 'Now you should try your movements, seeing the result of the inference of each
    class on the images:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: 现在你应该尝试你的动作，查看每个类别的推理结果在图像上的显示：
- en: '![](../media/file692.png)'
  id: totrans-183
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file692.png)'
- en: '![](../media/file693.png)'
  id: totrans-184
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file693.png)'
- en: '![](../media/file694.png)'
  id: totrans-185
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file694.png)'
- en: '![](../media/file695.png)'
  id: totrans-186
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file695.png)'
- en: 'And, of course, some “anomaly”, for example, putting the XIAO upside-down.
    The anomaly score will be over 0.5:'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: 当然，还有一些“异常”，例如将XIAO倒置。异常分数将超过0.5：
- en: '![](../media/file696.png)'
  id: totrans-188
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file696.png)'
- en: Post-Processing
  id: totrans-189
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 后处理
- en: Now that we know the model is working, we suggest modifying the code to see
    the result with the Kit completely offline (disconnected from the PC and powered
    by a battery, a power bank, or an independent 5V power supply).
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 既然我们知道模型正在工作，我们建议修改代码以查看套件完全离线（断开与PC的连接，由电池、移动电源或独立的5V电源供电）的结果。
- en: The idea is that if a specific movement is detected, a corresponding message
    will appear on the OLED display.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 理念是如果检测到特定的动作，相应的信息将出现在OLED显示屏上。
- en: '![](../media/file697.png)'
  id: totrans-192
  prefs: []
  type: TYPE_IMG
  zh: '![](../media/file697.png)'
- en: The modified inference code to have the OLED display is available on the [Lab’s
    GitHub](https://github.com/Mjrovai/XIAO-ESP32S3-Sense/tree/main/XIAOML_Kit_code/motion_class_ad_inference_oled).
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 修改后的推理代码，用于OLED显示屏，可在[实验室的GitHub](https://github.com/Mjrovai/XIAO-ESP32S3-Sense/tree/main/XIAOML_Kit_code/motion_class_ad_inference_oled)上找到。
- en: Summary
  id: totrans-194
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 摘要
- en: 'This lab demonstrated how to build a complete motion classification system
    using the XIAOML Kit’s built-in LSM6DS3TR-C IMU sensor. Key achievements include:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 本实验室展示了如何使用XIAOML套件的内置LSM6DS3TR-C IMU传感器构建完整的运动分类系统。主要成就包括：
- en: '**Technical Implementation:**'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: '**技术实现：**'
- en: Utilized the integrated 6-axis IMU for motion sensing
  id: totrans-197
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 利用集成的6轴IMU进行运动感应
- en: Collected labeled training data for four transportation scenarios
  id: totrans-198
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 收集了四种交通场景的标记训练数据
- en: Implemented spectral feature extraction for time-series analysis
  id: totrans-199
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实现了时间序列分析的光谱特征提取
- en: Deployed a neural network classifier optimized for microcontroller inference
  id: totrans-200
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 部署了针对微控制器推理优化的神经网络分类器
- en: Added anomaly detection for identifying unusual movements
  id: totrans-201
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 添加了异常检测以识别不寻常的动作
- en: '**Machine Learning Pipeline:**'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: '**机器学习流程：**'
- en: Data collection directly from embedded sensors
  id: totrans-203
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 直接从嵌入式传感器收集数据
- en: Feature engineering using frequency domain analysis
  id: totrans-204
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用频域分析进行特征工程
- en: Model training and optimization in Edge Impulse
  id: totrans-205
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在Edge Impulse中训练和优化模型
- en: Real-time inference on resource-constrained hardware
  id: totrans-206
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在资源受限的硬件上进行实时推理
- en: Performance monitoring and validation
  id: totrans-207
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 性能监控和验证
- en: '**Practical Applications:** The techniques learned apply directly to real-world
    scenarios, including:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: '**实际应用：** 学习到的技术可以直接应用于现实场景，包括：'
- en: Asset tracking and logistics monitoring
  id: totrans-209
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 资产跟踪和物流监控
- en: Predictive maintenance for machinery
  id: totrans-210
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 机器设备的预测性维护
- en: Human activity recognition
  id: totrans-211
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 人类活动识别
- en: Vehicle and equipment monitoring
  id: totrans-212
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 车辆和设备监控
- en: IoT sensor networks for smart cities
  id: totrans-213
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 智能城市中的物联网传感器网络
- en: '**Key Learnings:**'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: '**关键学习点：**'
- en: Working with IMU coordinate systems and sensor fusion
  id: totrans-215
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 与 IMU 坐标系统和传感器融合工作
- en: Balancing model accuracy with inference speed on edge devices
  id: totrans-216
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在边缘设备上平衡模型准确性与推理速度
- en: Implementing robust data collection and preprocessing pipelines
  id: totrans-217
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实现稳健的数据收集和预处理管道
- en: Deploying machine learning models to embedded systems
  id: totrans-218
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将机器学习模型部署到嵌入式系统
- en: Integrating multiple sensors (IMU + display) for complete solutions
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 集成多个传感器（IMU + 显示）以实现完整解决方案
- en: The integration of motion classification with the XIAOML Kit demonstrates how
    modern embedded systems can perform sophisticated AI tasks locally, enabling real-time
    decision-making without reliance on the cloud. This approach is fundamental to
    the future of edge AI in industrial IoT, autonomous systems, and smart device
    applications.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 将运动分类与 XIAOML 套件集成展示了现代嵌入式系统如何本地执行复杂的 AI 任务，实现无需依赖云端的实时决策。这种方法对于工业物联网、自主系统和智能设备应用中边缘
    AI 的未来至关重要。
- en: Resources
  id: totrans-221
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 资源
- en: '[XIAOML KIT Code](https://github.com/Mjrovai/XIAO-ESP32S3-Sense/tree/main/XIAOML_Kit_code)'
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[XIAOML 套件代码](https://github.com/Mjrovai/XIAO-ESP32S3-Sense/tree/main/XIAOML_Kit_code)'
- en: '[DSP Spectral Features](ch056.xhtml#sec-dsp-spectral-features-overview-a7be)'
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[DSP 频谱特征](ch056.xhtml#sec-dsp-spectral-features-overview-a7be)'
- en: '[Edge Impulse Project](https://studio.edgeimpulse.com/public/750061/live)'
  id: totrans-224
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Edge Impulse 项目](https://studio.edgeimpulse.com/public/750061/live)'
- en: '[Edge Impulse Spectral Features Block Colab Notebook](https://colab.research.google.com/github/Mjrovai/Arduino_Nicla_Vision/blob/main/Motion_Classification/Edge_Impulse_Spectral_Features_Block.ipynb)'
  id: totrans-225
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Edge Impulse 频谱特征块 Colab 笔记本](https://colab.research.google.com/github/Mjrovai/Arduino_Nicla_Vision/blob/main/Motion_Classification/Edge_Impulse_Spectral_Features_Block.ipynb)'
- en: '[Edge Impulse Documentation](https://docs.edgeimpulse.com/)'
  id: totrans-226
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Edge Impulse 文档](https://docs.edgeimpulse.com/)'
- en: '[Edge Impulse Spectral Features](https://docs.edgeimpulse.com/docs/edge-impulse-studio/processing-blocks/spectral-features)'
  id: totrans-227
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Edge Impulse 频谱特征](https://docs.edgeimpulse.com/docs/edge-impulse-studio/processing-blocks/spectral-features)'
- en: '[Seeed Studio LSM6DS3 Library](https://github.com/Seeed-Studio/Seeed_Arduino_LSM6DS3)'
  id: totrans-228
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Seeed Studio LSM6DS3 库](https://github.com/Seeed-Studio/Seeed_Arduino_LSM6DS3)'
