<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" lang="en-US" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <title>ch038.xhtml</title>
  <style>
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" type="text/css" href="../styles/stylesheet1.css" />
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    /* Figure formatting */
    .quarto-layout-panel>figure>figcaption,
    .quarto-layout-panel>.panel-caption {
      margin-top: 10pt;
    }

    .quarto-layout-row {
      display: flex;
      align-items: flex-start;
    }

    .quarto-layout-valign-top {
      align-items: flex-start;
    }

    .quarto-layout-valign-bottom {
      align-items: flex-end;
    }

    .quarto-layout-valign-center {
      align-items: center;
    }

    .quarto-layout-cell {
      position: relative;
      margin-right: 20px;
    }

    .quarto-layout-cell:last-child {
      margin-right: 0;
    }

    .quarto-layout-cell figure,
    .quarto-layout-cell>p {
      margin: 0.2em;
    }

    .quarto-layout-cell .html-widget {
      width: 100% !important;
    }

    .quarto-layout-cell div figure p {
      margin: 0;
    }

    .quarto-layout-cell figure {
      display: inline-block;
      margin-inline-start: 0;
      margin-inline-end: 0;
    }

    .quarto-layout-cell table {
      display: inline-table;
    }

    .quarto-layout-cell-subref figcaption {
      font-style: italic;
      text-align: center;
    }

    .quarto-figure>figure {
      width: 100%;
    }

    .quarto-figure-left>figure>p {
      text-align: left;
    }

    .quarto-figure-center>figure>p {
      text-align: center;
    }

    .quarto-figure-right>figure>p {
      text-align: right;
    }

    figure>p:empty {
      display: none;
    }

    figure>p:first-child {
      margin-top: 0;
      margin-bottom: 0;
    }

    figure>figcaption {
      margin-top: 0.5em;
    }

    figcaption {
      font-size: 0.8em;
    }

    details {
      margin-bottom: 1em;
    }

    details[show] {
      margin-bottom: 0;
    }

    .quarto-unresolved-ref {
      font-weight: 600;
    }

    .quarto-cover-image {
      float: right;
      margin-left: 30px;
    }

    .cell-output-display {
      overflow-x: scroll;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body epub:type="bodymatter">
<section id="setup-1" class="level1 unnumbered">
<h1 class="unnumbered">Setup</h1>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img src="../media/file503.jpg" alt="" /></p>
<figcaption><em>DALL·E prompt - 1950s cartoon-style drawing of a XIAO ESP32S3 board with a distinctive camera module, as shown in the image provided. The board is placed on a classic lab table with various sensors, including a microphone. Behind the board, a vintage computer screen displays the Arduino IDE in muted colors, with code focusing on LED pin setups and machine learning inference for voice commands. The Serial Monitor on the IDE showcases outputs detecting voice commands like ‘yes’ and ‘no’. The scene merges the retro charm of mid-century labs with modern electronics.</em></figcaption>
</figure>
</div>
<section id="sec-setup-overview-d638" class="level2 unnumbered">
<h2 class="unnumbered">Overview</h2>
<p>The <a href="https://www.seeedstudio.com/The-XIAOML-Kit.html">XIAOML Kit</a> is designed to provides hands-on experience with TinyML applications. The kit includes the powerful <a href="https://www.seeedstudio.com/XIAO-ESP32S3-Sense-p-5639.html">XIAO ESP32S3 Sense</a> development board and an expansion board that adds essential sensors for machine learning projects.</p>
<p><strong>Complete XIAOML Kit Components:</strong></p>
<ul>
<li><strong>XIAO ESP32S3 Sense</strong>: Main development board with integrated camera sensor, digital microphone, and SD card support</li>
<li><strong>Expansion Board</strong>: Features a 6-axis IMU (LSM6DS3TR-C) and 0.42” OLED display for motion sensing and data visualization</li>
<li><strong>SD Card Toolkit</strong>: Includes SD card and USB adapter for data storage and model deployment</li>
<li><strong>USB-C Cable</strong>: For connecting the board to your computer</li>
<li><strong>Antenna and Heat Sinks</strong></li>
</ul>
<blockquote>
<p>⚠️ <strong>Attention</strong></p>
<p><strong>Do not install the heat sinks</strong> (or carefully, remove them) on/from the XIAO ESP32S3 if you want to use the XIAO ML Kit Expansion Board. See Appendix for more information.</p>
</blockquote>
<p> <img src="../media/file504.png" class="quarto-figure quarto-figure-center" style="width:90.0%" alt="" /></p>
<section id="sec-setup-xiao-esp32s3-sense-core-board-features-6e91" class="level3 unnumbered">
<h3 class="unnumbered">XIAO ESP32S3 Sense - Core Board Features</h3>
<p>The <a href="https://www.seeedstudio.com/XIAO-ESP32S3-Sense-p-5639.html">XIAO ESP32S3 Sense</a> serves as the heart of the XIAOML Kit, integrating embedded ML computing power with photography and audio capabilities, making it an ideal platform for TinyML applications in intelligent voice and vision AI.</p>
<p> <img src="../media/file505.png" class="quarto-figure quarto-figure-center" style="width:65.0%" alt="" /></p>
<p><strong>Key Features</strong></p>
<ul>
<li><strong>Powerful MCU</strong>: ESP32S3 32-bit, dual-core, Xtensa processor operating up to 240 MHz, with Arduino / MicroPython support</li>
<li><strong>Advanced Functionality</strong>: Detachable OV2640 camera sensor for 1600 × 1200 resolution, compatible with OV5640 camera sensor, plus integrated digital microphone</li>
<li><strong>Elaborate Power Design</strong>: Lithium battery charge management with four power consumption models, deep sleep mode with power consumption as low as 14 μA</li>
<li><strong>Great Memory</strong>: 8 MB PSRAM and 8 MB FLASH, supporting SD card slot for external 32 GB FAT memory</li>
<li><strong>Outstanding RF Performance</strong>: 2.4 GHz Wi-Fi and BLE dual wireless communication, supports 100m+ remote communication with U.FL antenna</li>
<li><strong>Compact Design</strong>: 21 × 17.5 mm, adopting the classic XIAO form factor, suitable for space-limited projects</li>
</ul>
<p> <img src="../media/file506.png" class="quarto-figure quarto-figure-center" style="width:65.0%" alt="" /></p>
<p>Below is the general board pinout:</p>
<p> <img src="../media/file507.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<blockquote>
<p>For more details, please refer to the <a href="https://wiki.seeedstudio.com/xiao_esp32s3_getting_started/">Seeed Studio Wiki page</a></p>
</blockquote>
</section>
<section id="sec-setup-expansion-board-features-e715" class="level3 unnumbered">
<h3 class="unnumbered">Expansion Board Features</h3>
<p>The expansion board extends the XIAOML Kit’s capabilities for motion-based machine learning applications:</p>
<p> <img src="../media/file508.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<p><strong>Components:</strong></p>
<ul>
<li><p>6-axis IMU (LSM6DS3TR-C):</p>
<ul>
<li>3-axis accelerometer and 3-axis gyroscope for motion detection and classification
<ul>
<li>Accelerometer range: ±2/±4/±8/±16 g</li>
<li>Gyroscope range: ±125/±250/±500/±1000/±2000 dps</li>
<li>I2C interface (address: 0x6A)</li>
</ul></li>
</ul></li>
<li><p>0.42” OLED Display</p>
<ul>
<li>Monochrome display (72×40 resolution) for real-time data visualization
<ul>
<li>Controller: SSD1306</li>
<li>I2C interface (address: 0x3C)</li>
</ul></li>
</ul></li>
<li><p>Restart Button (EN)</p></li>
<li><p>Battery Connector (BAT+, BAT- )</p></li>
</ul>
</section>
<section id="sec-setup-complete-kit-assembly-17d3" class="level3 unnumbered">
<h3 class="unnumbered">Complete Kit Assembly</h3>
<p>The expansion board connects seamlessly to the XIAO ESP32S3 Sense, creating a comprehensive platform for multimodal machine learning experiments covering vision, audio, and motion sensing.</p>
<p> <img src="../media/file509.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<p>Please pay attention to the mounting orientation of the module:</p>
<p> <img src="../media/file510.png" class="quarto-figure quarto-figure-center" style="width:60.0%" alt="" /></p>
<p>Note that</p>
<ul>
<li>The <code>EN</code> connection, shown at the bottom of the ESP32S3 Sense, is available on the expansion board via the <code>RST</code> button.</li>
<li>The <code>BAT+</code> and <code>BAT-</code> connections are also available through the <code>BAT3.7V</code> white connector.</li>
</ul>
<p><strong>XIAOML Kit Applications:</strong></p>
<ul>
<li><strong>Vision</strong>: Image classification and object detection using the integrated camera</li>
<li><strong>Audio</strong>: Keyword spotting and voice recognition with the built-in microphone</li>
<li><strong>Motion</strong>: Activity recognition and anomaly detection using the IMU sensors</li>
<li><strong>Multi-modal</strong>: Combined sensor fusion for complex ML applications</li>
</ul>
</section>
</section>
<section id="sec-setup-installing-xiao-esp32s3-sense-arduino-ide-197b" class="level2 unnumbered">
<h2 class="unnumbered">Installing the XIAO ESP32S3 Sense on Arduino IDE</h2>
<ol type="1">
<li><p>Connect the XIAOML Kit to your computer via the USB-C port. <img src="../media/file511.png" class="quarto-figure quarto-figure-center" style="width:80.0%" alt="" /></p></li>
<li><p>Download and Install the stable version of Arduino IDE according to your operating system.</p>
<p><a href="https://www.arduino.cc/en/software"><strong>[Download Arduino IDE]</strong></a></p></li>
<li><p>Open the <strong>Arduino IDE</strong> and select the Boards Manager (represented by the <code>UNO Icon</code>).</p></li>
<li><p>Enter “<em>ESP32”</em>, and select”<strong>esp32 by Espressif Systems</strong>.” You can <code>install</code> or <code>update</code> the board support packages.</p></li>
</ol>
<blockquote>
<p>Do not select “<strong>Arduino ESP32 Boards</strong> by Arduino”, which are the support package for the Arduino Nano ESP32 and not our board.</p>
</blockquote>
<p> <img src="../media/file512.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<blockquote>
<p>⚠️ <strong>Attention</strong></p>
<p>Versions 3.x may experience issues when using the XIAO ESP32S3 Sense with Edge Impulse deploy codes. If this is the case, use the last 2.0.x stable version (for example, 2.0.17) instead.</p>
</blockquote>
<ol start="5" type="1">
<li>Click <code>Select Board</code>, enter with <em>xiao</em> or <em>esp32s3</em>, and select the <code>XIAO_ESP32S3</code> in the boards manager and the corresponding PORT where the ESP32S3 is connected.</li>
</ol>
<p> <img src="../media/file513.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<p>That is it! The device should be OK. Let’s do some tests.</p>
</section>
<section id="sec-setup-testing-board-blink-005d" class="level2 unnumbered">
<h2 class="unnumbered">Testing the board with BLINK</h2>
<p>The XIAO ESP32S3 Sense features a built-in LED connected to GPIO21. So, you can run the blink sketch (which can be found under <code>Files/Examples/Basics/Blink</code>. The sketch uses the <code>LED_BUILTIN</code> Arduino constant, which internally corresponds to the LED connected to pin 21. Alternatively, you can change the Blink sketch accordingly.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode numberSource cpp number-lines"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1"></a><span class="pp">#define LED_BUILT_IN </span><span class="dv">21</span><span class="pp"> </span><span class="co">// This line is optional</span></span>
<span id="cb1-2"><a href="#cb1-2"></a></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>  pinMode<span class="op">(</span>LED_BUILT_IN<span class="op">,</span> OUTPUT<span class="op">);</span> <span class="co">// Set the pin as output</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="op">}</span></span>
<span id="cb1-6"><a href="#cb1-6"></a></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co">// Remember that the pins work with inverted logic</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co">// LOW to turn on and HIGH to turn off</span></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="cb1-10"><a href="#cb1-10"></a>  digitalWrite<span class="op">(</span>LED_BUILT_IN<span class="op">,</span> LOW<span class="op">);</span> <span class="co">//Turn on</span></span>
<span id="cb1-11"><a href="#cb1-11"></a>  delay <span class="op">(</span><span class="dv">1000</span><span class="op">);</span> <span class="co">//Wait 1 sec</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>  digitalWrite<span class="op">(</span>LED_BUILT_IN<span class="op">,</span> HIGH<span class="op">);</span> <span class="co">//Turn off</span></span>
<span id="cb1-13"><a href="#cb1-13"></a>  delay <span class="op">(</span><span class="dv">1000</span><span class="op">);</span> <span class="co">//Wait 1 sec</span></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="op">}</span></span></code></pre></div>
<blockquote>
<p>Note that the pins operate with inverted logic: LOW turns on and HIGH turns off.</p>
</blockquote>
<p> <img src="../media/file514.png" class="quarto-figure quarto-figure-center" style="width:60.0%" alt="" /></p>
</section>
<section id="sec-setup-microphone-test-7d6c" class="level2 unnumbered">
<h2 class="unnumbered">Microphone Test</h2>
<p>Let’s start with sound detection. Enter with the code below or go to the <a href="https://github.com/Mjrovai/XIAO-ESP32S3-Sense">GitHub project</a> and download the sketch: <a href="https://github.com/Mjrovai/XIAO-ESP32S3-Sense/tree/main/Mic_Test/XiaoEsp32s3_Mic_Test">XIAOML_Kit_Mic_Test</a> and run it on the Arduino IDE:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode numberSource cpp number-lines"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1"></a><span class="co">/*</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="co">  XIAO ESP32S3 Simple Mic Test</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co">  (for ESP32 Library version 3.0.x and later)</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">*/</span></span>
<span id="cb2-5"><a href="#cb2-5"></a></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="pp">#include </span><span class="im">&lt;ESP_I2S.h&gt;</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>I2SClass I2S<span class="op">;</span></span>
<span id="cb2-8"><a href="#cb2-8"></a></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span></span>
<span id="cb2-10"><a href="#cb2-10"></a>  Serial<span class="op">.</span>begin<span class="op">(</span><span class="dv">115200</span><span class="op">);</span></span>
<span id="cb2-11"><a href="#cb2-11"></a>  <span class="cf">while</span> <span class="op">(!</span>Serial<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-12"><a href="#cb2-12"></a>    <span class="op">}</span></span>
<span id="cb2-13"><a href="#cb2-13"></a></span>
<span id="cb2-14"><a href="#cb2-14"></a>  <span class="co">// setup 42 PDM clock and 41 PDM data pins</span></span>
<span id="cb2-15"><a href="#cb2-15"></a>  I2S<span class="op">.</span>setPinsPdmRx<span class="op">(</span><span class="dv">42</span><span class="op">,</span> <span class="dv">41</span><span class="op">);</span></span>
<span id="cb2-16"><a href="#cb2-16"></a></span>
<span id="cb2-17"><a href="#cb2-17"></a>  <span class="co">// start I2S at 16 kHz with 16-bits per sample</span></span>
<span id="cb2-18"><a href="#cb2-18"></a>  <span class="cf">if</span> <span class="op">(!</span>I2S<span class="op">.</span>begin<span class="op">(</span>I2S_MODE_PDM_RX<span class="op">,</span></span>
<span id="cb2-19"><a href="#cb2-19"></a>                 <span class="dv">16000</span><span class="op">,</span></span>
<span id="cb2-20"><a href="#cb2-20"></a>                 I2S_DATA_BIT_WIDTH_16BIT<span class="op">,</span></span>
<span id="cb2-21"><a href="#cb2-21"></a>                 I2S_SLOT_MODE_MONO<span class="op">))</span> <span class="op">{</span></span>
<span id="cb2-22"><a href="#cb2-22"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;Failed to initialize I2S!&quot;</span><span class="op">);</span></span>
<span id="cb2-23"><a href="#cb2-23"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">);</span> <span class="co">// do nothing</span></span>
<span id="cb2-24"><a href="#cb2-24"></a>  <span class="op">}</span></span>
<span id="cb2-25"><a href="#cb2-25"></a><span class="op">}</span></span>
<span id="cb2-26"><a href="#cb2-26"></a></span>
<span id="cb2-27"><a href="#cb2-27"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="cb2-28"><a href="#cb2-28"></a>  <span class="co">// read a sample</span></span>
<span id="cb2-29"><a href="#cb2-29"></a>  <span class="dt">int</span> sample <span class="op">=</span> I2S<span class="op">.</span>read<span class="op">();</span></span>
<span id="cb2-30"><a href="#cb2-30"></a></span>
<span id="cb2-31"><a href="#cb2-31"></a>  <span class="cf">if</span> <span class="op">(</span>sample <span class="op">&amp;&amp;</span> sample <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span> <span class="op">&amp;&amp;</span> sample <span class="op">!=</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-32"><a href="#cb2-32"></a>    Serial<span class="op">.</span>println<span class="op">(</span>sample<span class="op">);</span></span>
<span id="cb2-33"><a href="#cb2-33"></a>  <span class="op">}</span></span>
<span id="cb2-34"><a href="#cb2-34"></a><span class="op">}</span></span></code></pre></div>
<p>Open the <strong>Serial Plotter,</strong> and you will see the loudness change curve of the sound.</p>
<p> <img src="../media/file515.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<p>When producing sound, you can verify it on the Serial Plotter.</p>
<p><strong>Save recorded sound (.wav audio files) to a microSD card.</strong></p>
<p>Now, using the onboard SD Card reader, we can save .wav audio files. To do that, we need first to enable the XIAO PSRAM.</p>
<blockquote>
<p>ESP32-S3 has only a few hundred kilobytes of internal RAM on the MCU chip. This can be insufficient for some purposes, so up to 16 MB of external PSRAM (pseudo-static RAM) can be connected with the SPI flash chip (The XIAO has 8 MB of PSRAM). The external memory is incorporated in the memory map and, with certain restrictions, is usable in the same way as internal data RAM.</p>
</blockquote>
<ul>
<li>To turn it on, go to <code>Tools-&gt;PSRAM:"OPI PSRAM"-&gt;OPI PSRAM</code></li>
</ul>
<p> <img src="../media/file516.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<blockquote>
<p>XIAO ESP32S3 Sense supports microSD cards up to <strong>32GB</strong>. If you are ready to purchase a microSD card for XIAO, please refer to the specifications below. Format the microSD card to <strong>FAT32 format</strong> before using it.</p>
</blockquote>
<p>Now, insert the FAT32 formatted SD card into the XIAO as shown in the photo below</p>
<p> <img src="../media/file517.png" class="quarto-figure quarto-figure-center" style="width:60.0%" alt="" /></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode numberSource cpp number-lines"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1"></a><span class="co">/*</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="co"> * WAV Recorder for Seeed XIAO ESP32S3 Sense</span></span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="co"> * (for ESP32 Library version 3.0.x and later)</span></span>
<span id="cb3-4"><a href="#cb3-4"></a><span class="co">*/</span></span>
<span id="cb3-5"><a href="#cb3-5"></a></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="pp">#include </span><span class="im">&quot;ESP_I2S.h&quot;</span></span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="pp">#include </span><span class="im">&quot;FS.h&quot;</span></span>
<span id="cb3-8"><a href="#cb3-8"></a><span class="pp">#include </span><span class="im">&quot;SD.h&quot;</span></span>
<span id="cb3-9"><a href="#cb3-9"></a></span>
<span id="cb3-10"><a href="#cb3-10"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span></span>
<span id="cb3-11"><a href="#cb3-11"></a>  <span class="co">// Create an instance of the I2SClass</span></span>
<span id="cb3-12"><a href="#cb3-12"></a>  I2SClass i2s<span class="op">;</span></span>
<span id="cb3-13"><a href="#cb3-13"></a></span>
<span id="cb3-14"><a href="#cb3-14"></a>  <span class="co">// Create variables to store the audio data</span></span>
<span id="cb3-15"><a href="#cb3-15"></a>  <span class="dt">uint8_t</span> <span class="op">*</span>wav_buffer<span class="op">;</span></span>
<span id="cb3-16"><a href="#cb3-16"></a>  <span class="dt">size_t</span> wav_size<span class="op">;</span></span>
<span id="cb3-17"><a href="#cb3-17"></a></span>
<span id="cb3-18"><a href="#cb3-18"></a>  <span class="co">// Initialize the serial port</span></span>
<span id="cb3-19"><a href="#cb3-19"></a>  Serial<span class="op">.</span>begin<span class="op">(</span><span class="dv">115200</span><span class="op">);</span></span>
<span id="cb3-20"><a href="#cb3-20"></a>  <span class="cf">while</span> <span class="op">(!</span>Serial<span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-21"><a href="#cb3-21"></a>    delay<span class="op">(</span><span class="dv">10</span><span class="op">);</span></span>
<span id="cb3-22"><a href="#cb3-22"></a>  <span class="op">}</span></span>
<span id="cb3-23"><a href="#cb3-23"></a></span>
<span id="cb3-24"><a href="#cb3-24"></a>  Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;Initializing I2S bus...&quot;</span><span class="op">);</span></span>
<span id="cb3-25"><a href="#cb3-25"></a></span>
<span id="cb3-26"><a href="#cb3-26"></a>  <span class="co">// Set up the pins used for audio input</span></span>
<span id="cb3-27"><a href="#cb3-27"></a>  i2s<span class="op">.</span>setPinsPdmRx<span class="op">(</span><span class="dv">42</span><span class="op">,</span> <span class="dv">41</span><span class="op">);</span></span>
<span id="cb3-28"><a href="#cb3-28"></a></span>
<span id="cb3-29"><a href="#cb3-29"></a>  <span class="co">// start I2S at 16 kHz with 16-bits per sample</span></span>
<span id="cb3-30"><a href="#cb3-30"></a>  <span class="cf">if</span> <span class="op">(!</span>i2s<span class="op">.</span>begin<span class="op">(</span>I2S_MODE_PDM_RX<span class="op">,</span></span>
<span id="cb3-31"><a href="#cb3-31"></a>                 <span class="dv">16000</span><span class="op">,</span></span>
<span id="cb3-32"><a href="#cb3-32"></a>                 I2S_DATA_BIT_WIDTH_16BIT<span class="op">,</span></span>
<span id="cb3-33"><a href="#cb3-33"></a>                 I2S_SLOT_MODE_MONO<span class="op">))</span> <span class="op">{</span></span>
<span id="cb3-34"><a href="#cb3-34"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;Failed to initialize I2S!&quot;</span><span class="op">);</span></span>
<span id="cb3-35"><a href="#cb3-35"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">);</span> <span class="co">// do nothing</span></span>
<span id="cb3-36"><a href="#cb3-36"></a>  <span class="op">}</span></span>
<span id="cb3-37"><a href="#cb3-37"></a></span>
<span id="cb3-38"><a href="#cb3-38"></a>  Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;I2S bus initialized.&quot;</span><span class="op">);</span></span>
<span id="cb3-39"><a href="#cb3-39"></a>  Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;Initializing SD card...&quot;</span><span class="op">);</span></span>
<span id="cb3-40"><a href="#cb3-40"></a></span>
<span id="cb3-41"><a href="#cb3-41"></a>  <span class="co">// Set up the pins used for SD card access</span></span>
<span id="cb3-42"><a href="#cb3-42"></a>  <span class="cf">if</span><span class="op">(!</span>SD<span class="op">.</span>begin<span class="op">(</span><span class="dv">21</span><span class="op">)){</span></span>
<span id="cb3-43"><a href="#cb3-43"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;Failed to mount SD Card!&quot;</span><span class="op">);</span></span>
<span id="cb3-44"><a href="#cb3-44"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">;</span></span>
<span id="cb3-45"><a href="#cb3-45"></a>  <span class="op">}</span></span>
<span id="cb3-46"><a href="#cb3-46"></a>  Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;SD card initialized.&quot;</span><span class="op">);</span></span>
<span id="cb3-47"><a href="#cb3-47"></a>  Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;Recording 20 seconds of audio data...&quot;</span><span class="op">);</span></span>
<span id="cb3-48"><a href="#cb3-48"></a></span>
<span id="cb3-49"><a href="#cb3-49"></a>  <span class="co">// Record 20 seconds of audio data</span></span>
<span id="cb3-50"><a href="#cb3-50"></a>  wav_buffer <span class="op">=</span> i2s<span class="op">.</span>recordWAV<span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="op">&amp;</span>wav_size<span class="op">);</span></span>
<span id="cb3-51"><a href="#cb3-51"></a></span>
<span id="cb3-52"><a href="#cb3-52"></a>  <span class="co">// Create a file on the SD card</span></span>
<span id="cb3-53"><a href="#cb3-53"></a>  File file <span class="op">=</span> SD<span class="op">.</span>open<span class="op">(</span><span class="st">&quot;/arduinor_rec.wav&quot;</span><span class="op">,</span> FILE_WRITE<span class="op">);</span></span>
<span id="cb3-54"><a href="#cb3-54"></a>  <span class="cf">if</span> <span class="op">(!</span>file<span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-55"><a href="#cb3-55"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;Failed to open file for writing!&quot;</span><span class="op">);</span></span>
<span id="cb3-56"><a href="#cb3-56"></a>    <span class="cf">return</span><span class="op">;</span></span>
<span id="cb3-57"><a href="#cb3-57"></a>  <span class="op">}</span></span>
<span id="cb3-58"><a href="#cb3-58"></a></span>
<span id="cb3-59"><a href="#cb3-59"></a>  Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;Writing audio data to file...&quot;</span><span class="op">);</span></span>
<span id="cb3-60"><a href="#cb3-60"></a></span>
<span id="cb3-61"><a href="#cb3-61"></a>  <span class="co">// Write the audio data to the file</span></span>
<span id="cb3-62"><a href="#cb3-62"></a>  <span class="cf">if</span> <span class="op">(</span>file<span class="op">.</span>write<span class="op">(</span>wav_buffer<span class="op">,</span> wav_size<span class="op">)</span> <span class="op">!=</span> wav_size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-63"><a href="#cb3-63"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;Failed to write audio data to file!&quot;</span><span class="op">);</span></span>
<span id="cb3-64"><a href="#cb3-64"></a>    <span class="cf">return</span><span class="op">;</span></span>
<span id="cb3-65"><a href="#cb3-65"></a>  <span class="op">}</span></span>
<span id="cb3-66"><a href="#cb3-66"></a></span>
<span id="cb3-67"><a href="#cb3-67"></a>  <span class="co">// Close the file</span></span>
<span id="cb3-68"><a href="#cb3-68"></a>  file<span class="op">.</span>close<span class="op">();</span></span>
<span id="cb3-69"><a href="#cb3-69"></a></span>
<span id="cb3-70"><a href="#cb3-70"></a>  Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;Application complete.&quot;</span><span class="op">);</span></span>
<span id="cb3-71"><a href="#cb3-71"></a><span class="op">}</span></span>
<span id="cb3-72"><a href="#cb3-72"></a></span>
<span id="cb3-73"><a href="#cb3-73"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="cb3-74"><a href="#cb3-74"></a>  delay<span class="op">(</span><span class="dv">1000</span><span class="op">);</span></span>
<span id="cb3-75"><a href="#cb3-75"></a>  Serial<span class="op">.</span>printf<span class="op">(</span><span class="st">&quot;.&quot;</span><span class="op">);</span></span>
<span id="cb3-76"><a href="#cb3-76"></a><span class="op">}</span></span></code></pre></div>
<ul>
<li>Save the code, for example, as <code>Wav_Record.ino</code>, and run it in the Arduino IDE.</li>
<li>This program is executed only once after the user turns on the serial monitor (or when the <code>RESET</code> button is pressed). It records for 20 seconds and saves the recording file to a microSD card as “arduino_rec.wav.”</li>
<li>When the “.” is output every second in the serial monitor, the program execution is complete, and you can play the recorded sound file using a card reader.</li>
</ul>
<p> <img src="../media/file518.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<p>The sound quality is excellent!</p>
<blockquote>
<p>The explanation of how the code works is beyond the scope of this lab, but you can find an excellent description on the <a href="https://wiki.seeedstudio.com/xiao_esp32s3_sense_mic/">wiki</a> page.</p>
</blockquote>
<p>To know more about the File System on the XIAO ESP32S3 Sense, please refer to this <a href="https://wiki.seeedstudio.com/xiao_esp32s3_sense_filesystem/">link</a>.</p>
</section>
<section id="sec-setup-testing-camera-bbd0" class="level2 unnumbered">
<h2 class="unnumbered">Testing the Camera</h2>
<p>For testing (and using the camera, we can use several methods:</p>
<ul>
<li>The SenseCraft AI Studio</li>
<li>The CameraWebServer app on Arduino IDE (See the next section)</li>
<li>Capturing images and <a href="https://github.com/limengdu/SeeedStudio-XIAO-ESP32S3-Sense-camera/tree/main">saving them on an SD card</a> (similar to what we did with audio)</li>
</ul>
<section id="sec-setup-testing-camera-sensecraft-ai-studio-3aca" class="level3 unnumbered">
<h3 class="unnumbered">Testing the camera with the SenseCraft AI Studio</h3>
<p>The easiest way to see the camera working is to use the <a href="https://sensecraft.seeed.cc/ai/home">SenseCraft AI</a> Studio, a robust platform that offers a wide range of AI models compatible with various devices, including the <strong>XIAO ESP32S3 Sense</strong> and the Grove Vision AI V2.</p>
<blockquote>
<p>We can also use the <a href="https://seeed-studio.github.io/SenseCraft-Web-Toolkit/#/setup/process"><strong>SenseCraft Web Toolkit</strong></a>, a simplified version of the SenseCraft AI Studio.</p>
</blockquote>
<p>Let’s follow the steps below to start the <strong>SenseCraft AI</strong>:</p>
<ul>
<li>Open the <a href="https://sensecraft.seeed.cc/ai/device/local/32">SenseCraft AI Vision Workspace</a> in a web browser, such as <strong>Chrome</strong>, and sign in (or create an account).</li>
</ul>
<p> <img src="../media/file519.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<ul>
<li>Having the XIAOML Kit physically connected to the notebook, select it as below:</li>
</ul>
<p> <img src="../media/file520.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<blockquote>
<p>Note: The <strong>WebUSB tool</strong> may not function correctly in certain browsers, such as Safari. Use Chrome instead. Also, confirm that the Arduino IDE or any other serial device is not connected to the XIAO.</p>
</blockquote>
<p>To see the camera working, we should upload a model. We can try several Computer Vision models previously uploaded by Seeed Studio. Use the button <code>[Select Model]</code> and choose among the available models.</p>
<p> <img src="../media/file521.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<p>Passing the cursor over the AI models, we can have some information about them, such as name, description, <strong>category</strong> or <strong>task</strong> (Image Classification, Object Detection, or Pose/Keypoint Detection), the <strong>algorithm</strong> (like YOLO V5 or V8, FOMO, MobileNet V2, etc.) and in some cases, <strong>metrics</strong> (Accuracy or mAP).</p>
<p> <img src="../media/file522.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<p>We can choose one of the ready-to-use AI models, such as “Person Classification”, by clicking on it and pressing the [Confirm] button, or upload our own model.</p>
<p> <img src="../media/file523.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<p>In the <strong>Preview</strong> Area, we can see the streaming generated by the camera.</p>
<p> <img src="../media/file524.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<blockquote>
<p>We will return to the SenseCraft AI Studio in more detail during the Vision AI labs.</p>
</blockquote>
</section>
</section>
<section id="sec-setup-testing-wifi-311a" class="level2 unnumbered">
<h2 class="unnumbered">Testing WiFi</h2>
<section id="sec-setup-installation-antenna-ba79" class="level3 unnumbered">
<h3 class="unnumbered">Installation of the antenna</h3>
<p>The XIAOML Kit arrived fully assembled. First, remove the Sense Expansion Board (which contains the Camera, Mic, and SD Card Reader) from the XIAO.</p>
<p>On the bottom left of the front of XIAO ESP32S3, there is a separate “WiFi/BT Antenna Connector”. To improve your WiFi/Bluetooth signal, remove the antenna from the package and attach it to the connector.</p>
<p>There is a small trick to installing the antenna. If you press down hard on it directly, you will find it very difficult to press and your fingers will hurt! The correct way to install the antenna is to insert one side of the antenna connector into the connector block first, then gently press down on the other side to ensure the antenna is securely installed.</p>
<p>Removing the antenna is also the case. Do not use brute force to pull the antenna directly; instead, apply force to one side to lift, making the antenna easy to remove.</p>
<p> <img src="../media/file525.jpg" class="quarto-figure quarto-figure-center" style="width:60.0%" alt="" /></p>
<p>Reinstalling the expansion board is very simple; you just need to align the connector on the expansion board with the B2B connector on the XIAO ESP32S3, press it hard, and hear a “click.” The installation is complete.</p>
<p>One of the XIAO ESP32S3’s differentiators is its WiFi capability. So, let’s test its radio by scanning the Wi-Fi networks around it. You can do this by running one of the code examples on the board.</p>
<p>Open the Arduino IDE and select our board and port. Go to Examples and look for <strong>WiFI ==&gt; WiFIScan</strong> under the “Examples for the XIAO ESP32S3”. Upload the sketch to the board.</p>
<p>You should see the Wi-Fi networks (SSIDs and RSSIs) within your device’s range on the serial monitor. Here is what I got in the lab:</p>
<p> <img src="../media/file526.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
</section>
<section id="sec-setup-simple-wifi-server-turning-led-onoff-1d76" class="level3 unnumbered">
<h3 class="unnumbered">Simple WiFi Server (Turning LED ON/OFF)</h3>
<p>Let’s test the device’s capability to behave as a Wi-Fi server. We will host a simple page on the device that sends commands to turn the XIAO built-in LED ON and OFF.</p>
<p>Go to Examples and look for <strong>WiFI ==&gt; SimpleWiFIServer</strong> under the “Examples for the XIAO ESP32S3”.</p>
<p>Before running the sketch, you should enter your network credentials:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode numberSource cpp number-lines"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1"></a><span class="at">const</span> <span class="dt">char</span><span class="op">*</span> ssid     <span class="op">=</span> <span class="st">&quot;Your credentials here&quot;</span><span class="op">;</span></span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="at">const</span> <span class="dt">char</span><span class="op">*</span> password <span class="op">=</span> <span class="st">&quot;Your credentials here&quot;</span><span class="op">;</span></span></code></pre></div>
<p>And modify <strong>pin 5</strong> to <strong>pin 21</strong>, where the built-in LED is installed. Also, let’s modify the webpage (lines 85 and 86) to reflect the correct LED Pin and that it is active with LOW:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode numberSource cpp number-lines"><code class="sourceCode cpp"><span id="cb5-1"><a href="#cb5-1"></a>client<span class="op">.</span>print<span class="op">(</span><span class="st">&quot;Click &lt;a href=</span><span class="sc">\&quot;</span><span class="st">/H</span><span class="sc">\&quot;</span><span class="st">&gt;here&lt;/a&gt; to turn the LED on pin 21 OFF.&lt;br&gt;&quot;</span><span class="op">);</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>client<span class="op">.</span>print<span class="op">(</span><span class="st">&quot;Click &lt;a href=</span><span class="sc">\&quot;</span><span class="st">/L</span><span class="sc">\&quot;</span><span class="st">&gt;here&lt;/a&gt; to turn the LED on pin 21 ON.&lt;br&gt;&quot;</span><span class="op">);</span></span></code></pre></div>
<p>You can monitor your server’s performance using the Serial Monitor.</p>
<p> <img src="../media/file527.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<p>Take the IP address shown in the Serial Monitor and enter it in your browser. You will see a page with links that can turn the built-in LED of your XIAO ON and OFF.</p>
<p> <img src="../media/file528.png" class="quarto-figure quarto-figure-center" style="width:75.0%" alt="" /></p>
</section>
<section id="sec-setup-using-camerawebserver-6959" class="level3 unnumbered">
<h3 class="unnumbered">Using the CameraWebServer</h3>
<p>In the Arduino IDE, go to <code>File &gt; Examples &gt; ESP32 &gt; Camera</code>, and select <code>CameraWebServer</code></p>
<p>On the <code>board_config.h</code> tab, comment on all cameras’ models, except the XIAO model pins:</p>
<p><code>#define CAMERA_MODEL_XIAO_ESP32S3 // Has PSRAM</code></p>
<blockquote>
<p>Do not forget to check the <code>Tools</code> to see if PSRAM is enabled.</p>
</blockquote>
<p> <img src="../media/file529.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<p>As done before, in the <code>CameraWebServer.ino</code> tab, enter your wifi credentials and upload the code to the device.</p>
<p>If the code is executed correctly, you should see the address on the Serial Monitor:</p>
<pre><code>WiFi connecting....
WiFi connected
Camera Ready! Use &#39;http://192.168.5.60&#39; to connect</code></pre>
<p>Copy the address into your browser and wait for the page to load. Select the camera resolution (for example, QVGA) and select <code>[START STREAM]</code>. Wait for a few seconds, depending on your connection. Using the <code>[Save]</code> button, you can save an image to your computer’s download area.</p>
<p> <img src="../media/file530.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<p>That’s it! You can save the images directly on your computer for use on projects.</p>
</section>
</section>
<section id="sec-setup-testing-imu-sensor-lsm6ds3trc-fd9d" class="level2 unnumbered">
<h2 class="unnumbered">Testing the IMU Sensor (LSM6DS3TR-C)</h2>
<p>An <strong>Inertial Measurement Unit (IMU)</strong> is a sensor that measures motion and orientation. The LSM6DS3TR-C on your XIAOML kit is a <strong>6-axis IMU</strong>, meaning it combines:</p>
<ul>
<li><strong>3-axis Accelerometer</strong>: Measures linear acceleration (including gravity) along X, Y, and Z axes</li>
<li><strong>3-axis Gyroscope</strong>: Measures angular velocity (rotation rate) around X, Y, and Z axes</li>
</ul>
<section id="sec-setup-technical-specifications-3010" class="level3 unnumbered">
<h3 class="unnumbered">Technical Specifications:</h3>
<ul>
<li><strong>Communication</strong>: I2C interface at address <code>0x6A</code></li>
<li><strong>Accelerometer Range</strong>: ±2/±4/±8/±16 g (we use ±2g by default)</li>
<li><strong>Gyroscope Range</strong>: ±125/±250/±500/±1000/±2000 dps (we use ±250 dps by default)</li>
<li><strong>Resolution</strong>: 16-bit ADC</li>
<li><strong>Power Consumption</strong>: Ultra-low power design</li>
</ul>
</section>
<section id="sec-setup-coordinate-system-8466" class="level3 unnumbered">
<h3 class="unnumbered">Coordinate System:</h3>
<p>The sensor follows a right-hand coordinate system. When looking at the IMU sensor with the point mark visible (Expansion Board bottom view):</p>
<p> <img src="../media/file531.png" class="quarto-figure quarto-figure-center" style="width:60.0%" alt="" /></p>
<ul>
<li><strong>X-axis</strong>: Points to the right</li>
<li><strong>Y-axis</strong>: Points forward (away from you)</li>
<li><strong>Z-axis</strong>: Points upward (out of the board)</li>
</ul>
<p> <img src="../media/file532.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
</section>
<section id="sec-setup-required-libraries-f048" class="level3 unnumbered">
<h3 class="unnumbered">Required Libraries</h3>
<p>Before uploading the code, install the required library:</p>
<ol type="1">
<li><p>Open the <strong>Arduino IDE</strong> and select <strong>Manage Libraries</strong> (represented by the <code>Books Icon</code>).</p></li>
<li><p>For the IMU library, enter “<em>LSM6DS3”</em>, and select”<strong>Seeed Arduino LSM6DS3 by Seeed</strong>”. You can <code>INSTALL</code> or <code>UPDATE</code> the board support packages.</p></li>
</ol>
<p> <img src="../media/file533.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<p>⚠️ <strong>Important</strong>: Do NOT install “Arduino_LSM6DS3 by Arduino” - that’s for different boards!</p>
</section>
<section id="sec-setup-test-code-d4ea" class="level3 unnumbered">
<h3 class="unnumbered">Test Code</h3>
<p>Enter with the code below at the Arduino IDE and uploaded it to Kit:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode numberSource cpp number-lines"><code class="sourceCode cpp"><span id="cb7-1"><a href="#cb7-1"></a><span class="pp">#include </span><span class="im">&lt;LSM6DS3.h&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="pp">#include </span><span class="im">&lt;Wire.h&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3"></a></span>
<span id="cb7-4"><a href="#cb7-4"></a><span class="co">// Create IMU object using I2C interface</span></span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="co">// LSM6DS3TR-C sensor is located at I2C address 0x6A</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>LSM6DS3 myIMU<span class="op">(</span>I2C_MODE<span class="op">,</span> <span class="bn">0x6A</span><span class="op">);</span></span>
<span id="cb7-7"><a href="#cb7-7"></a></span>
<span id="cb7-8"><a href="#cb7-8"></a><span class="co">// Variables to store sensor readings</span></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="dt">float</span> accelX<span class="op">,</span> accelY<span class="op">,</span> accelZ<span class="op">;</span>  <span class="co">// Accelerometer values (g-force)</span></span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="dt">float</span> gyroX<span class="op">,</span> gyroY<span class="op">,</span> gyroZ<span class="op">;</span>     <span class="co">// Gyroscope values (degrees per second)</span></span>
<span id="cb7-11"><a href="#cb7-11"></a></span>
<span id="cb7-12"><a href="#cb7-12"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span></span>
<span id="cb7-13"><a href="#cb7-13"></a>  <span class="co">// Initialize serial communication at 115200 baud rate</span></span>
<span id="cb7-14"><a href="#cb7-14"></a>  Serial<span class="op">.</span>begin<span class="op">(</span><span class="dv">115200</span><span class="op">);</span></span>
<span id="cb7-15"><a href="#cb7-15"></a></span>
<span id="cb7-16"><a href="#cb7-16"></a>  <span class="co">// Wait for serial port to connect (useful for debugging)</span></span>
<span id="cb7-17"><a href="#cb7-17"></a>  <span class="cf">while</span> <span class="op">(!</span>Serial<span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-18"><a href="#cb7-18"></a>    delay<span class="op">(</span><span class="dv">10</span><span class="op">);</span></span>
<span id="cb7-19"><a href="#cb7-19"></a>  <span class="op">}</span></span>
<span id="cb7-20"><a href="#cb7-20"></a></span>
<span id="cb7-21"><a href="#cb7-21"></a>  Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;XIAOML Kit IMU Test&quot;</span><span class="op">);</span></span>
<span id="cb7-22"><a href="#cb7-22"></a>  Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;LSM6DS3TR-C 6-Axis IMU Sensor&quot;</span><span class="op">);</span></span>
<span id="cb7-23"><a href="#cb7-23"></a>  Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;=============================&quot;</span><span class="op">);</span></span>
<span id="cb7-24"><a href="#cb7-24"></a></span>
<span id="cb7-25"><a href="#cb7-25"></a>  <span class="co">// Initialize the IMU sensor</span></span>
<span id="cb7-26"><a href="#cb7-26"></a>  <span class="cf">if</span> <span class="op">(</span>myIMU<span class="op">.</span>begin<span class="op">()</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-27"><a href="#cb7-27"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;ERROR: IMU initialization failed!&quot;</span><span class="op">);</span></span>
<span id="cb7-28"><a href="#cb7-28"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;Check connections and I2C address&quot;</span><span class="op">);</span></span>
<span id="cb7-29"><a href="#cb7-29"></a>    <span class="cf">while</span><span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb7-30"><a href="#cb7-30"></a>      delay<span class="op">(</span><span class="dv">1000</span><span class="op">);</span> <span class="co">// Halt execution if IMU fails to initialize</span></span>
<span id="cb7-31"><a href="#cb7-31"></a>    <span class="op">}</span></span>
<span id="cb7-32"><a href="#cb7-32"></a>  <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb7-33"><a href="#cb7-33"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;✓ IMU initialized successfully&quot;</span><span class="op">);</span></span>
<span id="cb7-34"><a href="#cb7-34"></a>    Serial<span class="op">.</span>println<span class="op">();</span></span>
<span id="cb7-35"><a href="#cb7-35"></a></span>
<span id="cb7-36"><a href="#cb7-36"></a>    <span class="co">// Print sensor information</span></span>
<span id="cb7-37"><a href="#cb7-37"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;Sensor Information:&quot;</span><span class="op">);</span></span>
<span id="cb7-38"><a href="#cb7-38"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;- Accelerometer range: ±2g&quot;</span><span class="op">);</span></span>
<span id="cb7-39"><a href="#cb7-39"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;- Gyroscope range: ±250 dps&quot;</span><span class="op">);</span></span>
<span id="cb7-40"><a href="#cb7-40"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;- Communication: I2C at address 0x6A&quot;</span><span class="op">);</span></span>
<span id="cb7-41"><a href="#cb7-41"></a>    Serial<span class="op">.</span>println<span class="op">();</span></span>
<span id="cb7-42"><a href="#cb7-42"></a></span>
<span id="cb7-43"><a href="#cb7-43"></a>    <span class="co">// Print data format explanation</span></span>
<span id="cb7-44"><a href="#cb7-44"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;Data Format:&quot;</span><span class="op">);</span></span>
<span id="cb7-45"><a href="#cb7-45"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;AccelX,AccelY,AccelZ,GyroX,GyroY,GyroZ&quot;</span><span class="op">);</span></span>
<span id="cb7-46"><a href="#cb7-46"></a>    Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;Units: g-force (m/s²), degrees/second&quot;</span><span class="op">);</span></span>
<span id="cb7-47"><a href="#cb7-47"></a>    Serial<span class="op">.</span>println<span class="op">();</span></span>
<span id="cb7-48"><a href="#cb7-48"></a></span>
<span id="cb7-49"><a href="#cb7-49"></a>    delay<span class="op">(</span><span class="dv">2000</span><span class="op">);</span> <span class="co">// Brief pause before starting measurements</span></span>
<span id="cb7-50"><a href="#cb7-50"></a>  <span class="op">}</span></span>
<span id="cb7-51"><a href="#cb7-51"></a><span class="op">}</span></span>
<span id="cb7-52"><a href="#cb7-52"></a></span>
<span id="cb7-53"><a href="#cb7-53"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="cb7-54"><a href="#cb7-54"></a>  <span class="co">// Read accelerometer data (in g-force units)</span></span>
<span id="cb7-55"><a href="#cb7-55"></a>  accelX <span class="op">=</span> myIMU<span class="op">.</span>readFloatAccelX<span class="op">();</span></span>
<span id="cb7-56"><a href="#cb7-56"></a>  accelY <span class="op">=</span> myIMU<span class="op">.</span>readFloatAccelY<span class="op">();</span></span>
<span id="cb7-57"><a href="#cb7-57"></a>  accelZ <span class="op">=</span> myIMU<span class="op">.</span>readFloatAccelZ<span class="op">();</span></span>
<span id="cb7-58"><a href="#cb7-58"></a></span>
<span id="cb7-59"><a href="#cb7-59"></a>  <span class="co">// Read gyroscope data (in degrees per second)</span></span>
<span id="cb7-60"><a href="#cb7-60"></a>  gyroX <span class="op">=</span> myIMU<span class="op">.</span>readFloatGyroX<span class="op">();</span></span>
<span id="cb7-61"><a href="#cb7-61"></a>  gyroY <span class="op">=</span> myIMU<span class="op">.</span>readFloatGyroY<span class="op">();</span></span>
<span id="cb7-62"><a href="#cb7-62"></a>  gyroZ <span class="op">=</span> myIMU<span class="op">.</span>readFloatGyroZ<span class="op">();</span></span>
<span id="cb7-63"><a href="#cb7-63"></a></span>
<span id="cb7-64"><a href="#cb7-64"></a>  <span class="co">// Print readable format to Serial Monitor</span></span>
<span id="cb7-65"><a href="#cb7-65"></a>  Serial<span class="op">.</span>print<span class="op">(</span><span class="st">&quot;Accelerometer (g): &quot;</span><span class="op">);</span></span>
<span id="cb7-66"><a href="#cb7-66"></a>  Serial<span class="op">.</span>print<span class="op">(</span><span class="st">&quot;X=&quot;</span><span class="op">);</span> Serial<span class="op">.</span>print<span class="op">(</span>accelX<span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb7-67"><a href="#cb7-67"></a>  Serial<span class="op">.</span>print<span class="op">(</span><span class="st">&quot; Y=&quot;</span><span class="op">);</span> Serial<span class="op">.</span>print<span class="op">(</span>accelY<span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb7-68"><a href="#cb7-68"></a>  Serial<span class="op">.</span>print<span class="op">(</span><span class="st">&quot; Z=&quot;</span><span class="op">);</span> Serial<span class="op">.</span>print<span class="op">(</span>accelZ<span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb7-69"><a href="#cb7-69"></a></span>
<span id="cb7-70"><a href="#cb7-70"></a>  Serial<span class="op">.</span>print<span class="op">(</span><span class="st">&quot; | Gyroscope (°/s): &quot;</span><span class="op">);</span></span>
<span id="cb7-71"><a href="#cb7-71"></a>  Serial<span class="op">.</span>print<span class="op">(</span><span class="st">&quot;X=&quot;</span><span class="op">);</span> Serial<span class="op">.</span>print<span class="op">(</span>gyroX<span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb7-72"><a href="#cb7-72"></a>  Serial<span class="op">.</span>print<span class="op">(</span><span class="st">&quot; Y=&quot;</span><span class="op">);</span> Serial<span class="op">.</span>print<span class="op">(</span>gyroY<span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb7-73"><a href="#cb7-73"></a>  Serial<span class="op">.</span>print<span class="op">(</span><span class="st">&quot; Z=&quot;</span><span class="op">);</span> Serial<span class="op">.</span>print<span class="op">(</span>gyroZ<span class="op">,</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb7-74"><a href="#cb7-74"></a>  Serial<span class="op">.</span>println<span class="op">();</span></span>
<span id="cb7-75"><a href="#cb7-75"></a></span>
<span id="cb7-76"><a href="#cb7-76"></a>  <span class="co">// Print CSV format for Serial Plotter</span></span>
<span id="cb7-77"><a href="#cb7-77"></a>  Serial<span class="op">.</span>println<span class="op">(</span>String<span class="op">(</span>accelX<span class="op">)</span> <span class="op">+</span> <span class="st">&quot;,&quot;</span> <span class="op">+</span> String<span class="op">(</span>accelY<span class="op">)</span> <span class="op">+</span> <span class="st">&quot;,&quot;</span> <span class="op">+</span></span>
<span id="cb7-78"><a href="#cb7-78"></a>                 String<span class="op">(</span>accelZ<span class="op">)</span> <span class="op">+</span> <span class="st">&quot;,&quot;</span> <span class="op">+</span> String<span class="op">(</span>gyroX<span class="op">)</span> <span class="op">+</span> <span class="st">&quot;,&quot;</span> <span class="op">+</span></span>
<span id="cb7-79"><a href="#cb7-79"></a>                 String<span class="op">(</span>gyroY<span class="op">)</span> <span class="op">+</span> <span class="st">&quot;,&quot;</span> <span class="op">+</span> String<span class="op">(</span>gyroZ<span class="op">));</span></span>
<span id="cb7-80"><a href="#cb7-80"></a></span>
<span id="cb7-81"><a href="#cb7-81"></a>  <span class="co">// Update rate: 10 Hz (100ms delay)</span></span>
<span id="cb7-82"><a href="#cb7-82"></a>  delay<span class="op">(</span><span class="dv">100</span><span class="op">);</span></span>
<span id="cb7-83"><a href="#cb7-83"></a><span class="op">}</span></span></code></pre></div>
<p>The Serial monitor will show the values, and the plotter will show their variation over time. For example, by moving the Kit over the <strong>y-axis</strong>, we will see that value 2 (red line) changes accordingly. Note that <strong>z-axis</strong> is represented by value 3 (green line), which is near 1.0g. The blue line (value 1) is related to the <strong>x-axis</strong>.</p>
<p> <img src="../media/file534.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<p>You can select the values 4 to 6 to see the Gyroscope behavior.</p>
</section>
</section>
<section id="sec-setup-testing-oled-display-ssd1306-0337" class="level2 unnumbered">
<h2 class="unnumbered">Testing the OLED Display (SSD1306)</h2>
<p>OLED (Organic Light-Emitting Diode) displays are self-illuminating screens where each pixel produces its own light. The XIAO ML kit features a compact 0.42-inch monochrome OLED display, ideal for displaying sensor data, status information, and simple graphics.</p>
<section id="sec-setup-technical-specifications-a88f" class="level3 unnumbered">
<h3 class="unnumbered">Technical Specifications:</h3>
<ul>
<li><strong>Size</strong>: 0.42 inches diagonal</li>
<li><strong>Resolution</strong>: 72 × 40 pixels</li>
<li><strong>Controller</strong>: SSD1306</li>
<li><strong>Interface</strong>: I2C at address <code>0x3C</code></li>
<li><strong>Colors</strong>: Monochrome (black pixels on white background, or vice versa)</li>
<li><strong>Viewing</strong>: High contrast, visible in bright light</li>
<li><strong>Power</strong>: Low power consumption, no backlight needed</li>
</ul>
</section>
<section id="sec-setup-display-characteristics-b6ac" class="level3 unnumbered">
<h3 class="unnumbered">Display Characteristics:</h3>
<ul>
<li><strong>Pixel-perfect</strong>: Each of the 2,880 pixels (72×40) can be individually controlled</li>
<li><strong>Fast refresh</strong>: Suitable for animations and real-time data</li>
<li><strong>No ghosting</strong>: Instant pixel response</li>
<li><strong>Wide viewing angle</strong>: Clear from multiple viewing positions</li>
</ul>
</section>
<section id="sec-setup-required-libraries-1692" class="level3 unnumbered">
<h3 class="unnumbered">Required Libraries</h3>
<p>Before uploading the code, install the required library:</p>
<ol type="1">
<li><p>Open the <strong>Arduino IDE</strong> and select the “Manage Libraries” (represented by the <code>Books Icon</code>).</p></li>
<li><p>Enter <em>u8g2</em> and select <strong>U8g2 by oliver</strong>. You can <code>install</code> or <code>update</code> the board support packages.</p>
<p>ℹ️ <strong>Note</strong>: U8g2 is a powerful graphics library supporting many display types</p></li>
</ol>
<p> <img src="../media/file535.png" class="quarto-figure quarto-figure-center" style="width:85.0%" alt="" /></p>
<p>The <strong>U8g2</strong> library is a monochrome graphics library with these features:</p>
<ul>
<li>Support for many display controllers (including SSD1306)</li>
<li>Text rendering with various fonts</li>
<li>Drawing primitives (lines, rectangles, circles)</li>
<li>Memory-efficient page-based rendering</li>
<li>Hardware and software I2C support</li>
</ul>
</section>
<section id="sec-setup-test-code-998c" class="level3 unnumbered">
<h3 class="unnumbered">Test Code</h3>
<p>Enter with the code below at the Arduino IDE and uploaded it to Kit:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode numberSource cpp number-lines"><code class="sourceCode cpp"><span id="cb8-1"><a href="#cb8-1"></a><span class="pp">#include </span><span class="im">&lt;U8g2lib.h&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2"></a><span class="pp">#include </span><span class="im">&lt;Wire.h&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3"></a></span>
<span id="cb8-4"><a href="#cb8-4"></a><span class="co">// Initialize the OLED display</span></span>
<span id="cb8-5"><a href="#cb8-5"></a><span class="co">// SSD1306 controller, 72x40 resolution, I2C interface</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>U8G2_SSD1306_72X40_ER_1_HW_I2C u8g2<span class="op">(</span>U8G2_R2<span class="op">,</span> U8X8_PIN_NONE<span class="op">);</span></span>
<span id="cb8-7"><a href="#cb8-7"></a></span>
<span id="cb8-8"><a href="#cb8-8"></a><span class="dt">void</span> setup<span class="op">()</span> <span class="op">{</span></span>
<span id="cb8-9"><a href="#cb8-9"></a>  Serial<span class="op">.</span>begin<span class="op">(</span><span class="dv">115200</span><span class="op">);</span></span>
<span id="cb8-10"><a href="#cb8-10"></a></span>
<span id="cb8-11"><a href="#cb8-11"></a>  Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;XIAOML Kit - Hello World&quot;</span><span class="op">);</span></span>
<span id="cb8-12"><a href="#cb8-12"></a>  Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;==========================&quot;</span><span class="op">);</span></span>
<span id="cb8-13"><a href="#cb8-13"></a></span>
<span id="cb8-14"><a href="#cb8-14"></a>  <span class="co">// Initialize the display</span></span>
<span id="cb8-15"><a href="#cb8-15"></a>  u8g2<span class="op">.</span>begin<span class="op">();</span></span>
<span id="cb8-16"><a href="#cb8-16"></a></span>
<span id="cb8-17"><a href="#cb8-17"></a>  Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;✓ Display initialized&quot;</span><span class="op">);</span></span>
<span id="cb8-18"><a href="#cb8-18"></a>  Serial<span class="op">.</span>println<span class="op">(</span><span class="st">&quot;Showing Hello World message...&quot;</span><span class="op">);</span></span>
<span id="cb8-19"><a href="#cb8-19"></a></span>
<span id="cb8-20"><a href="#cb8-20"></a>  <span class="co">// Clear the display</span></span>
<span id="cb8-21"><a href="#cb8-21"></a>  u8g2<span class="op">.</span>clearDisplay<span class="op">();</span></span>
<span id="cb8-22"><a href="#cb8-22"></a><span class="op">}</span></span>
<span id="cb8-23"><a href="#cb8-23"></a></span>
<span id="cb8-24"><a href="#cb8-24"></a><span class="dt">void</span> loop<span class="op">()</span> <span class="op">{</span></span>
<span id="cb8-25"><a href="#cb8-25"></a>  <span class="co">// Start drawing sequence</span></span>
<span id="cb8-26"><a href="#cb8-26"></a>  u8g2<span class="op">.</span>firstPage<span class="op">();</span></span>
<span id="cb8-27"><a href="#cb8-27"></a>  <span class="cf">do</span> <span class="op">{</span></span>
<span id="cb8-28"><a href="#cb8-28"></a>    <span class="co">// Set font</span></span>
<span id="cb8-29"><a href="#cb8-29"></a>    u8g2<span class="op">.</span>setFont<span class="op">(</span>u8g2_font_ncenB08_tr<span class="op">);</span></span>
<span id="cb8-30"><a href="#cb8-30"></a></span>
<span id="cb8-31"><a href="#cb8-31"></a>    <span class="co">// Display &quot;Hello World&quot; centered</span></span>
<span id="cb8-32"><a href="#cb8-32"></a>    u8g2<span class="op">.</span>setCursor<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">15</span><span class="op">);</span></span>
<span id="cb8-33"><a href="#cb8-33"></a>    u8g2<span class="op">.</span>print<span class="op">(</span><span class="st">&quot;Hello&quot;</span><span class="op">);</span></span>
<span id="cb8-34"><a href="#cb8-34"></a></span>
<span id="cb8-35"><a href="#cb8-35"></a>    u8g2<span class="op">.</span>setCursor<span class="op">(</span><span class="dv">12</span><span class="op">,</span> <span class="dv">30</span><span class="op">);</span></span>
<span id="cb8-36"><a href="#cb8-36"></a>    u8g2<span class="op">.</span>print<span class="op">(</span><span class="st">&quot;World!&quot;</span><span class="op">);</span></span>
<span id="cb8-37"><a href="#cb8-37"></a></span>
<span id="cb8-38"><a href="#cb8-38"></a>    <span class="co">// Add a simple decoration - draw a frame around the text</span></span>
<span id="cb8-39"><a href="#cb8-39"></a>    u8g2<span class="op">.</span>drawFrame<span class="op">(</span><span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">68</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span></span>
<span id="cb8-40"><a href="#cb8-40"></a></span>
<span id="cb8-41"><a href="#cb8-41"></a>  <span class="op">}</span> <span class="cf">while</span> <span class="op">(</span>u8g2<span class="op">.</span>nextPage<span class="op">());</span></span>
<span id="cb8-42"><a href="#cb8-42"></a></span>
<span id="cb8-43"><a href="#cb8-43"></a>  <span class="co">// No delay needed - the display will show continuously</span></span>
<span id="cb8-44"><a href="#cb8-44"></a><span class="op">}</span></span></code></pre></div>
<p>If everything works fine, you should see at the display, “Hello World” inside a rectangle.</p>
<p> <img src="../media/file536.jpg" class="quarto-figure quarto-figure-center" style="width:60.0%" alt="" /></p>
</section>
<section id="sec-setup-oled-text-sizes-positioning-ab8a" class="level3 unnumbered">
<h3 class="unnumbered">OLED - Text Sizes and Positioning</h3>
<ul>
<li><p>Note that the text is positioned with <code>setCursor(x, y)</code>, in this case centered:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode numberSource cpp number-lines"><code class="sourceCode cpp"><span id="cb9-1"><a href="#cb9-1"></a>u8g2<span class="op">.</span>setCursor<span class="op">(</span><span class="dv">8</span><span class="op">,</span> <span class="dv">15</span><span class="op">);</span></span></code></pre></div></li>
<li><p>The font used in the code was medium.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode numberSource cpp number-lines"><code class="sourceCode cpp"><span id="cb10-1"><a href="#cb10-1"></a>u8g2<span class="op">.</span>setFont<span class="op">(</span>u8g2_font_ncenB08_tr<span class="op">);</span></span></code></pre></div>
<p>But other font sizes are available:</p>
<ul>
<li><code>u8g2_font_4x6_tr</code>: Tiny font (4×6 pixels)</li>
<li><code>u8g2_font_6x10_tr</code>: Small font (6×10 pixels)</li>
<li><code>u8g2_font_ncenB08_tr</code>: Medium bold font</li>
<li><code>u8g2_font_ncenB14_tr</code>: Large bold font</li>
</ul></li>
</ul>
</section>
<section id="sec-setup-shapes-2ab7" class="level3 unnumbered">
<h3 class="unnumbered">Shapes</h3>
<p>The code added a simple decoration, drawing a frame around the text</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode numberSource cpp number-lines"><code class="sourceCode cpp"><span id="cb11-1"><a href="#cb11-1"></a>u8g2<span class="op">.</span>drawFrame<span class="op">(</span><span class="dv">2</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">68</span><span class="op">,</span> <span class="dv">36</span><span class="op">);</span></span></code></pre></div>
<p>But other shapes are available:</p>
<ul>
<li><strong>Rectangle outline</strong>: <code>drawFrame(x, y, width, height)</code></li>
<li><strong>Filled rectangle</strong>: <code>drawBox(x, y, width, height)</code></li>
<li><strong>Circle</strong>: <code>drawCircle(x, y, radius)</code></li>
<li><strong>Line</strong>: <code>drawLine(x1, y1, x2, y2)</code></li>
<li><strong>Individual pixels</strong>: <code>drawPixel(x, y)</code></li>
</ul>
</section>
<section id="sec-setup-coordinates-c207" class="level3 unnumbered">
<h3 class="unnumbered">Coordinates</h3>
<p>The display uses a coordinate system where:</p>
<ul>
<li><strong>Origin (0,0)</strong>: Top-left corner</li>
<li><strong>X-axis</strong>: Increases from left to right (0 to 71)</li>
<li><strong>Y-axis</strong>: Increases from top to bottom (0 to 39)</li>
<li><strong>Text positioning</strong>: <code>setCursor(x, y)</code> where y is the baseline of text</li>
</ul>
</section>
<section id="sec-setup-display-rotation-bdca" class="level3 unnumbered">
<h3 class="unnumbered">Display Rotation</h3>
<ul>
<li>You can change the rotation parameter by using:
<ul>
<li><code>U8G2_R0</code>: Normal orientation</li>
<li><code>U8G2_R1</code>: 90° clockwise</li>
<li><code>U8G2_R2</code>: 180° (upside down)</li>
<li><code>U8G2_R3</code>: 270° clockwise</li>
</ul></li>
</ul>
</section>
<section id="sec-setup-custom-characters-1b08" class="level3 unnumbered">
<h3 class="unnumbered">Custom Characters:</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode numberSource cpp number-lines"><code class="sourceCode cpp"><span id="cb12-1"><a href="#cb12-1"></a><span class="co">// Draw custom bitmap</span></span>
<span id="cb12-2"><a href="#cb12-2"></a><span class="at">static</span> <span class="at">const</span> <span class="dt">unsigned</span> <span class="dt">char</span> myBitmap<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="bn">0x00</span><span class="op">,</span> <span class="bn">0x3c</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x42</span><span class="op">,</span> <span class="bn">0x3c</span><span class="op">,</span> <span class="bn">0x00</span><span class="op">};</span></span>
<span id="cb12-3"><a href="#cb12-3"></a>u8g2<span class="op">.</span>drawBitmap<span class="op">(</span>x<span class="op">,</span> y<span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> myBitmap<span class="op">);</span></span></code></pre></div>
</section>
<section id="sec-setup-text-measurements-3ada" class="level3 unnumbered">
<h3 class="unnumbered">Text Measurements:</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode numberSource cpp number-lines"><code class="sourceCode cpp"><span id="cb13-1"><a href="#cb13-1"></a><span class="dt">int</span> width <span class="op">=</span> u8g2<span class="op">.</span>getStrWidth<span class="op">(</span><span class="st">&quot;Hello&quot;</span><span class="op">);</span>  <span class="co">// Get text width</span></span>
<span id="cb13-2"><a href="#cb13-2"></a><span class="dt">int</span> height <span class="op">=</span> u8g2<span class="op">.</span>getAscent<span class="op">();</span>         <span class="co">// Get font height</span></span></code></pre></div>
<p>The OLED display is now ready to show your sensor data, system status, or any custom graphics you design for your ML projects!</p>
</section>
</section>
<section id="sec-setup-summary-7446" class="level2 unnumbered">
<h2 class="unnumbered">Summary</h2>
<p>The XIAOML Kit with ESP32S3 Sense represents a powerful, yet accessible entry point into the world of TinyML and embedded machine learning. Through this setup process, we have systematically tested every component of the XIAOML Kit, confirming that all sensors and peripherals are functioning correctly. The ESP32S3’s dual-core processor and 8MB of PSRAM provide sufficient computational power for real-time ML inference, while the OV2640 camera, digital microphone, LSM6DS3TR-C IMU, and 0.42” OLED display create a complete multimodal sensing platform. WiFi connectivity opens possibilities for edge-to-cloud ML workflows, and our Arduino IDE development environment is now properly configured with all necessary libraries.</p>
<p>Beyond mere functionality tests, we’ve gained practical insights into coordinate systems, data formats, and operational characteristics of each sensor—knowledge that will prove invaluable when designing ML data collection and preprocessing pipelines for the upcoming projects.</p>
<p>This setup process demonstrates key principles that extend far beyond this specific kit. Working with the ESP32S3’s memory limitations and processing capabilities provides an authentic experience with the resource constraints inherent in edge AI—the same considerations that apply when deploying models on smartphones, IoT devices, or autonomous systems. Having multiple modalities (vision, audio, motion) on a single platform enables exploration of multimodal ML approaches, which are increasingly important in real-world AI applications.</p>
<p>Most importantly, from raw sensor data to model inference to user feedback via the OLED display, the kit provides a complete ML deployment cycle in miniature, mirroring the challenges faced in production AI systems.</p>
<p>With this foundation in place, you’re now equipped to tackle the core TinyML applications in the following chapters:</p>
<ul>
<li><strong>Vision Projects</strong>: Leveraging the camera for image classification and object detection</li>
<li><strong>Audio Projects</strong>: Processing audio streams for keyword spotting and voice recognition</li>
<li><strong>Motion Projects</strong>: Using IMU data for activity recognition and anomaly detection</li>
</ul>
<p>Each application will build upon the hardware understanding and software infrastructure we’ve established, demonstrating how artificial intelligence can be deployed not just in data centers, but in resource-constrained devices that directly interact with the physical world.</p>
<p>The principles encountered with this kit—real-time processing, sensor fusion, and edge inference—are the same ones driving the future of AI deployment in autonomous vehicles, smart cities, medical devices, and industrial automation. By completing this setup successfully, you’re now prepared to explore this exciting frontier of embedded machine learning.</p>
</section>
<section id="sec-setup-resources-3946" class="level2 unnumbered">
<h2 class="unnumbered">Resources</h2>
<ul>
<li><a href="https://github.com/Mjrovai/XIAO-ESP32S3-Sense/tree/main/XIAOML_Kit_code">XIAOML Kit Code</a></li>
<li><a href="https://wiki.seeedstudio.com/xiao_esp32s3_getting_started/">XIAO ESP32S3 Sense manual &amp; example code</a></li>
<li><a href="https://wiki.seeedstudio.com/xiao_esp32s3_sense_mic/">Usage of Seeed Studio XIAO ESP32S3 microphone</a></li>
<li><a href="https://wiki.seeedstudio.com/xiao_esp32s3_sense_filesystem/">File System and XIAO ESP32S3 Sense</a></li>
<li><a href="https://wiki.seeedstudio.com/xiao_esp32s3_camera_usage/">Camera Usage in Seeed Studio XIAO ESP32S3 Sense</a></li>
</ul>
</section>
</section>
</body>
</html>
