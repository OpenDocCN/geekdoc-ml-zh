# ç‰¹å¾æ’è¡¥

> åŸæ–‡ï¼š[`geostatsguy.github.io/MachineLearningDemos_Book/MachineLearning_feature_imputation.html`](https://geostatsguy.github.io/MachineLearningDemos_Book/MachineLearning_feature_imputation.html)

Michael J. Pyrczï¼Œæ•™æˆï¼Œå¾·å…‹è¨æ–¯å¤§å­¦å¥¥æ–¯æ±€åˆ†æ ¡

[Twitter](https://twitter.com/geostatsguy) | [GitHub](https://github.com/GeostatsGuy) | [ç½‘ç«™](http://michaelpyrcz.com) | [Google Scholar](https://scholar.google.com/citations?user=QVZ20eQAAAAJ&hl=en&oi=ao) | [åœ°ç»Ÿè®¡å­¦ä¹¦ç±](https://www.amazon.com/Geostatistical-Reservoir-Modeling-Michael-Pyrcz/dp/0199731446) | [YouTube](https://www.youtube.com/channel/UCLqEr-xV-ceHdXXXrTId5ig) | [Python ä¸­åº”ç”¨åœ°ç»Ÿè®¡å­¦ç”µå­ä¹¦](https://geostatsguy.github.io/GeostatsPyDemos_Book/intro.html) | [Python ä¸­åº”ç”¨æœºå™¨å­¦ä¹ ç”µå­ä¹¦](https://geostatsguy.github.io/MachineLearningDemos_Book/) | [LinkedIn](https://www.linkedin.com/in/michael-pyrcz-61a648a1)

ç”µå­ä¹¦â€œPython ä¸­åº”ç”¨æœºå™¨å­¦ä¹ ï¼šå¸¦ä»£ç çš„æ‰‹åŠ¨æŒ‡å—â€çš„ç« èŠ‚ã€‚

è¯·å°†æ­¤ç”µå­ä¹¦å¼•ç”¨å¦‚ä¸‹ï¼š

Pyrcz, M.J., 2024, *Python ä¸­åº”ç”¨æœºå™¨å­¦ä¹ ï¼šå¸¦ä»£ç çš„æ‰‹åŠ¨æŒ‡å—* [ç”µå­ä¹¦]. Zenodo. doi:10.5281/zenodo.15169138 ![DOI](https://doi.org/10.5281/zenodo.15169138)

æœ¬ä¹¦ä¸­çš„å·¥ä½œæµç¨‹ä»¥åŠæ›´å¤šå†…å®¹åœ¨æ­¤å¤„å¯ç”¨ï¼š

è¯·å°† MachineLearningDemos GitHub ä»“åº“å¼•ç”¨å¦‚ä¸‹ï¼š

Pyrcz, M.J., 2024, *MachineLearningDemos: Python Machine Learning Demonstration Workflows Repository* (0.0.3) [è½¯ä»¶]. Zenodo. DOI: 10.5281/zenodo.13835312\. GitHub ä»“åº“ï¼š[GeostatsGuy/MachineLearningDemos](https://github.com/GeostatsGuy/MachineLearningDemos) ![DOI](https://zenodo.org/doi/10.5281/zenodo.13835312)

ä½œè€…ï¼šMichael J. Pyrcz

Â© ç‰ˆæƒæ‰€æœ‰ 2024.

æœ¬ç« æ˜¯å…³äº/æ¼”ç¤º**ç‰¹å¾æ’è¡¥**çš„æ•™ç¨‹ã€‚

**YouTube è®²åº§**ï¼šæŸ¥çœ‹æˆ‘åœ¨ä»¥ä¸‹ä¸»é¢˜ä¸Šçš„è®²åº§ï¼š

+   [æœºå™¨å­¦ä¹ ç®€ä»‹](https://youtu.be/zOUM_AnI1DQ?si=wzWdJ35qJ9n8O6Bl)

+   [ç»´åº¦è¯…å’’ã€é™ç»´ã€ä¸»æˆåˆ†åˆ†æ](https://youtu.be/embks9p4pb8?si=B2HXm_i0oMSWkBhN)

+   [å¤šç»´å°ºåº¦åˆ†æå’ŒéšæœºæŠ•å½±](https://youtu.be/Yt0o8ukIOKU?si=_ri1NPwKVdhYzgO3)

+   [ç‰¹å¾å˜æ¢](https://youtu.be/6QJjZoWknEI?si=p6vp811xWAmzWY3r)

+   [ç‰¹å¾é€‰æ‹©](https://youtu.be/5Q0gemu-h3Q?si=ATG-ue0i2qcc-IVx)

+   ç‰¹å¾æ’è¡¥ - å°†äºè¿‘æœŸè®°å½•

è¿™äº›è®²åº§éƒ½æ˜¯æˆ‘ YouTube ä¸Šçš„[æœºå™¨å­¦ä¹ è¯¾ç¨‹](https://youtube.com/playlist?list=PLG19vXLQHvSC2ZKFIkgVpI9fCjkN38kwf&si=XonjO2wHdXffMpeI)çš„ä¸€éƒ¨åˆ†ï¼Œå…¶ä¸­åŒ…å«æœ‰è‰¯å¥½æ–‡æ¡£è®°å½•çš„ Python å·¥ä½œæµç¨‹å’Œäº¤äº’å¼ä»ªè¡¨æ¿ã€‚æˆ‘çš„ç›®æ ‡æ˜¯åˆ†äº«æ˜“äºè·å–ã€å¯æ“ä½œå’Œå¯é‡å¤çš„æ•™è‚²å†…å®¹ã€‚å¦‚æœä½ æƒ³çŸ¥é“æˆ‘çš„åŠ¨æœºï¼Œè¯·æŸ¥çœ‹[è¿ˆå…‹å°”çš„æ•…äº‹](https://michaelpyrcz.com/my-story)ã€‚

## ç‰¹å¾æ’è¡¥çš„åŠ¨æœº

å¤§å¤šæ•°ç©ºé—´å’Œåœ°ä¸‹æ•°æ®é›†éƒ½ä¸å®Œæ•´ï¼Œæ•°æ®åº“ä¸­å­˜åœ¨ç¼ºå¤±å€¼ã€‚

+   è®¸å¤šæ•°æ®åˆ†ææœºå™¨å­¦ä¹ å·¥ä½œæµç¨‹éœ€è¦å®Œæ•´æ•°æ®ï¼Œ$ğ‘¥_(1,ğ‘–),\dots,ğ‘¥_(ğ‘š,ğ‘–)$ å¯¹äºæ¯ä¸ªæ•°æ®æ ·æœ¬ $ğ‘– = 1,\ldots,ğ‘›$ã€‚

**æ¨æ–­æœºå™¨å­¦ä¹ ** - éœ€è¦å®Œæ•´æ•°æ®çš„æ–¹æ³•ï¼Œä¾‹å¦‚ï¼Œ

1.  ä¸»æˆåˆ†åˆ†æ - éœ€è¦åæ–¹å·®çŸ©é˜µï¼Œè€Œåæ–¹å·®éœ€è¦æ‰€æœ‰ç‰¹å¾å€¼

1.  å¤šç»´å°ºåº¦åˆ†æ - å¦‚æœæ²¡æœ‰æ‰€æœ‰ç‰¹å¾å¯ç”¨ï¼Œæˆ‘ä»¬æ— æ³•è®¡ç®—ç›¸ä¼¼æ€§çŸ©é˜µ

1.  èšç±»åˆ†æ - å¦‚æœæ²¡æœ‰æ‰€æœ‰ç‰¹å¾å€¼ï¼Œæˆ‘ä»¬æ— æ³•åœ¨ç‰¹å¾ç©ºé—´ä¸­è®¡ç®—è·ç¦»

**é¢„æµ‹æœºå™¨å­¦ä¹ ** - æ€»æ˜¯éœ€è¦æ‰€æœ‰ç‰¹å¾æ¥è®­ç»ƒå’Œæµ‹è¯•æ¨¡å‹ï¼Œ

$$ y = f(X_1,\ldots,X_m) $$

å¤„ç†ç¼ºå¤±æ•°æ®æ˜¯ç‰¹å¾/æ•°æ®å·¥ç¨‹çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œæ˜¯æ•°æ®åˆ†æå’Œæœºå™¨å­¦ä¹ çš„å…ˆå†³æ¡ä»¶ã€‚

+   é¦–å…ˆäº†è§£ç¼ºå¤±æ•°æ®çš„åŸå› å’Œå½±å“æ˜¯å¾ˆé‡è¦çš„ã€‚

## ç¼ºå¤±ç‰¹å¾å€¼çš„åŸå› 

éšæœºç¼ºå¤±ï¼ˆMARï¼‰å¹¶ä¸å¸¸è§ä¸”éš¾ä»¥è¯„ä¼°ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ

+   å…¨å±€éšæœºç¼ºå¤±å¯èƒ½ä¸ä¼šå¯¼è‡´æ•°æ®åå·®å’Œç»“æœæ¨¡å‹çš„åå·®

MAR é€šå¸¸ä¸æ˜¯è¿™ç§æƒ…å†µï¼Œå› ä¸ºç¼ºå¤±æ•°æ®é€šå¸¸ä¸ä¸€ä¸ªæ··æ‚ç‰¹å¾ç›¸å…³ï¼Œä¾‹å¦‚ï¼Œ

+   **é‡‡æ ·æˆæœ¬** - ä¾‹å¦‚ï¼Œä½æ¸—é€ç‡æµ‹è¯•è€—æ—¶è¿‡é•¿

+   **å²©çŸ³æµå˜å­¦æˆ–å…¶ä»–æ ·æœ¬å­˜æ´»ç‡åå·®** - ä¾‹å¦‚ï¼Œæ— æ³•æ¢å¤æ³¥å²©æ ·æœ¬

+   **æ ·æœ¬è®¾è®¡** - ä¸ºäº†å‡å°‘ä¸ç¡®å®šæ€§å¹¶æœ€å¤§åŒ–ç›ˆåˆ©è€Œä¸æ˜¯ç»Ÿè®¡ä»£è¡¨æ€§è€Œè¿›è¡Œé‡‡æ ·ï¼Œä¿¡æ¯ä¸ç”Ÿäº§åŒé‡ç›®çš„çš„æ ·æœ¬

+   **é‡‡æ ·å¯åŠæ€§** - åœ¨åœ°ä¸‹å­˜åœ¨ä¸€äº›éš¾ä»¥æˆ–æ— æ³•é‡‡æ ·çš„ä½ç½®ï¼Œä¾‹å¦‚ï¼Œæ¹–æ³Šæˆ–ç¤¾åŒºé™„è¿‘ï¼Œæˆ–ç”¨äºåœ°éœ‡æˆåƒçš„ç›ä¸‹

## ç¼ºå¤±ç‰¹å¾å€¼çš„åæœ

è¿™å°†å¯¼è‡´ç¼ºå¤±å€¼åœ¨ä½ç½®å’Œç‰¹å¾ç©ºé—´ä¸Šçš„èšç±»ã€‚

+   ç¼ºå¤±è¿™äº›ç‰¹å¾å€¼å¯èƒ½ä¼šåç½®å…¨å±€ç»Ÿè®¡ï¼Œå¹¶é™ä½å±€éƒ¨é¢„æµ‹çš„å‡†ç¡®æ€§

+   ä½¿ç”¨å…¨å±€åˆ†å¸ƒæ¥æ’è¡¥ç¼ºå¤±å€¼å¯èƒ½å¹¶ä¸åˆç†

ä¸ä»…ä»…æ˜¯å‡å°‘è®­ç»ƒå’Œæµ‹è¯•æ•°æ®é‡ï¼Œå¦‚æœç¼ºå¤±æ•°æ®ä¸æ˜¯å®Œå…¨éšæœºçš„è¯ï¼Œå°†ä¼šå¯¼è‡´ï¼š

+   åå·®çš„æ ·æœ¬ç»Ÿè®¡å¯¼è‡´åç½®çš„æ¨¡å‹è®­ç»ƒå’Œæµ‹è¯•

+   åç½®çš„æ¨¡å‹å…·æœ‰åç½®çš„é¢„æµ‹ï¼Œå¯èƒ½æ²¡æœ‰ä»»ä½•åç½®çš„æŒ‡ç¤ºï¼

å¦‚æœä½ é‡æ–°é˜…è¯»ä¸Šè¿°å†…å®¹å¯»æ‰¾è§£å†³æ–¹æ¡ˆï¼Œæˆ‘æä¾›æˆ‘çš„åŠ æ‹¿å¤§å¼ï¼Œâ€œå¯¹ä¸èµ·â€ã€‚äº†è§£æˆ‘ä»¬çš„äººçŸ¥é“æˆ‘ä»¬ç»å¸¸è¯´å¯¹ä¸èµ·ï¼Œå¹¶ä¸”å¯¹è¿™ä¸ªè¯æœ‰ç‹¬ç‰¹çš„å‘éŸ³ã€‚

æˆ‘ä»¥ä¸Šæ‰€è¯´çš„éƒ½æ˜¯ä½œä¸ºä¸€ä¸ªè­¦å‘Šï¼Œä½†æ˜¯ï¼Œ

+   åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç”±äºæˆ‘ä»¬çš„æ•°æ®æŒ‘æˆ˜ï¼Œå®è·µä¸­å­˜åœ¨ä¸€äº›å·®è·ï¼Œå³æ•°æ®ç¨€å°‘å’Œéå¹³ç¨³æ€§ã€‚

+   æˆ‘å¯ä»¥èŠ±æ•´ä¸ªè¯¾ç¨‹æ¥æ•™æˆè§£å†³è¿™äº›æŒ‘æˆ˜çš„æ–¹æ³•

+   è§£å†³æ–¹æ¡ˆæ•´åˆäº†æ•´ä¸ªåœ°ä¸‹ï¼Œç©ºé—´é¡¹ç›®å›¢é˜Ÿï¼Œå³é¢†åŸŸä¸“ä¸šçŸ¥è¯†è‡³å…³é‡è¦

+   æˆ‘å°†è¿™ä¸ªå±‚æ¬¡åœç•™åœ¨æ„è¯†å±‚é¢

æˆ‘ä»¬å¿…é¡»è¶…è¶Šå¸¸ç”¨çš„ç±»ä¼¼åˆ é™¤ï¼Œå³åˆ é™¤æ‰€æœ‰å…·æœ‰ä»»ä½•ç¼ºå¤±ç‰¹å¾çš„æ ·æœ¬ã€‚

## åŠ è½½æ‰€éœ€çš„åº“

ä»¥ä¸‹ä»£ç åŠ è½½æ‰€éœ€çš„åº“ã€‚

+   è¿™äº›åº”è¯¥å·²ç»ä¸ Anaconda 3 ä¸€èµ·å®‰è£…ã€‚

```py
ignore_warnings = True                                        # ignore warnings?
import numpy as np                                            # ndarrays for gridded data
import pandas as pd                                           # DataFrames for tabular data
from sklearn.impute import SimpleImputer                      # basic imputation method
from sklearn.impute import KNNImputer                         # k-nearest neighbour imputation method
from sklearn.experimental import enable_iterative_imputer     # required for MICE imputation
from sklearn.impute import IterativeImputer                   # MICE imputation
import os                                                     # set working directory, run executables
import math                                                   # basic math operations
import random                                                 # for random numbers
import matplotlib.pyplot as plt                               # for plotting
from matplotlib.ticker import (MultipleLocator, AutoMinorLocator) # control of axes ticks
from matplotlib.colors import ListedColormap                  # custom color maps
import matplotlib.ticker as mtick                             # control tick label formatting
import seaborn as sns                                         # for matrix scatter plots
from scipy import stats                                       # summary statistics
import numpy.linalg as linalg                                 # for linear algebra
import scipy.spatial as sp                                    # for fast nearest neighbor search
import scipy.signal as signal                                 # kernel for moving window calculation
from numba import jit                                         # for numerical speed up
from statsmodels.stats.weightstats import DescrStatsW
plt.rc('axes', axisbelow=True)                                # plot all grids below the plot elements
if ignore_warnings == True:                                   
    import warnings
    warnings.filterwarnings('ignore')
cmap = plt.cm.inferno                                         # color map
seed = 73071                                                  # random seed
np.random.seed(seed=seed) 
```

## å£°æ˜å‡½æ•°

è¿™é‡Œæ˜¯ä¸€ä¸ªè¾…åŠ©ç»˜å›¾çš„å‡½æ•°ï¼š

+   **add_grid** - ç”¨äºæ·»åŠ ä¸»ç½‘æ ¼çº¿å’Œå‰¯ç½‘æ ¼çº¿çš„ä¾¿åˆ©å‡½æ•°ï¼Œä»¥æé«˜ç»˜å›¾çš„å¯è§£é‡Šæ€§

è¿™é‡Œæ˜¯å‡½æ•°ï¼š

```py
def add_grid():                                               # add major and minor gridlines
    plt.gca().grid(True, which='major',linewidth = 1.0); plt.gca().grid(True, which='minor',linewidth = 0.2) # add y grids
    plt.gca().tick_params(which='major',length=7); plt.gca().tick_params(which='minor', length=4)
    plt.gca().xaxis.set_minor_locator(AutoMinorLocator()); plt.gca().yaxis.set_minor_locator(AutoMinorLocator()) # turn on minor ticks 
```

## è®¾ç½®å·¥ä½œç›®å½•

æˆ‘æ€»æ˜¯å–œæ¬¢è¿™æ ·åšï¼Œè¿™æ ·æˆ‘å°±ä¸ä¼šä¸¢å¤±æ–‡ä»¶ï¼Œå¹¶ä¸”å¯ä»¥ç®€åŒ–åç»­çš„è¯»å–å’Œå†™å…¥ï¼ˆé¿å…æ¯æ¬¡éƒ½åŒ…å«å®Œæ•´åœ°å€ï¼‰ã€‚

```py
#os.chdir("c:/PGE383")                                        # set the working directory 
```

æ‚¨å¿…é¡»æ›´æ–°å¼•å·å†…çš„éƒ¨åˆ†ä»¥åŒ…å«æ‚¨è‡ªå·±çš„å·¥ä½œç›®å½•ï¼Œå¹¶ä¸”æ ¼å¼åœ¨ Mac ä¸Šä¸åŒï¼ˆä¾‹å¦‚ï¼šâ€œ~/PGEâ€ï¼‰ã€‚

## åŠ è½½è¡¨æ ¼æ•°æ®

è¿™é‡Œæ˜¯åŠ è½½æˆ‘ä»¬é€—å·åˆ†éš”çš„æ•°æ®æ–‡ä»¶åˆ° Pandas DataFrame å¯¹è±¡çš„å‘½ä»¤ã€‚

### æ•°æ®é›† 0ï¼Œéå¸¸è§„å¤šå…ƒå˜é‡ v4

è®©æˆ‘ä»¬åŠ è½½æä¾›çš„éå¸¸è§„å¤šå…ƒæ•°æ®é›† [unconv_MV.csv](https://github.com/GeostatsGuy/GeoDataSets/blob/master/unconv_MV_v4.csv)ã€‚æ­¤æ•°æ®é›†åŒ…å«æ¥è‡ª 1,000 ä¸ªéå¸¸è§„äº•çš„å˜é‡ï¼ŒåŒ…æ‹¬ï¼š

+   äº•å¹³å‡å­”éš™ç‡

+   æ¸—é€ç‡çš„å¯¹æ•°å˜æ¢ï¼ˆä»¥çº¿æ€§åŒ–ä¸å…¶ä»–å˜é‡çš„å…³ç³»ï¼‰

+   å£°é˜»æŠ— (kg/mÂ³ x m/s x 10â¶)

+   å‰ªåˆ‡æ¯” (%)

+   æ€»æœ‰æœºç¢³ (%) 

+   ç»ç’ƒå…‰æ³½åº¦ (%)

+   åˆå§‹ç”Ÿäº§ 90 å¤©å¹³å‡ (MCFPD)ã€‚

### æ•°æ®é›† 1ï¼ŒåäºŒä¸ªï¼Œ12

è®©æˆ‘ä»¬åŠ è½½æä¾›çš„éå¸¸è§„å¤šå…ƒï¼Œ2D ç©ºé—´æ•°æ®é›† [12_sample_data.csv](https://github.com/GeostatsGuy/GeoDataSets/blob/master/12_sample_data.csv)ã€‚æ­¤æ•°æ®é›†åŒ…å«æ¥è‡ª 480 ä¸ªéå¸¸è§„äº•çš„å˜é‡ï¼ŒåŒ…æ‹¬ï¼š

+   X (m), Y (m) ä½ç½®åæ ‡

+   å­”éš™ç‡ (%) å•ä½è½¬æ¢å

+   æ¸—é€ç‡ (mD)

+   å£°é˜»æŠ— (kg/mÂ³ x m/s x 10â¶)

### æ•°æ®é›† 2ï¼Œå‚¨å±‚ 21

è®©æˆ‘ä»¬åŠ è½½æä¾›çš„éå¸¸è§„å¤šå…ƒï¼Œ3D ç©ºé—´æ•°æ®é›† [res21_wells.csv](https://github.com/GeostatsGuy/GeoDataSets/blob/master/res21_wells.csv)ã€‚æ­¤æ•°æ®é›†åŒ…å«æ¥è‡ª 73 ä¸ªå‚ç›´äº•çš„å˜é‡ï¼Œè¦†ç›– 10,000m x 10,000m x 50 m çš„å‚¨å±‚å•å…ƒï¼š

+   äº• (ID)

+   X (m), Y (m), æ·±åº¦ (m) ä½ç½®åæ ‡

+   å­”éš™ç‡ (%) å•ä½è½¬æ¢å

+   æ¸—é€ç‡ (mD)

+   å£°é˜»æŠ— (kg/m2s*10â¶) å•ä½è½¬æ¢å

+   ç›¸ (åˆ†ç±») - ä»é¡µå²©ã€æ²™è´¨é¡µå²©ã€é¡µå²©ç ‚åˆ°ç ‚å²©çš„é¡ºåºã€‚

+   å¯†åº¦ (g/cmÂ³)

+   å¯å‹ç¼©é€Ÿåº¦ (m/s)

+   æ¨æ°æ¨¡é‡ (GPa)

+   å‰ªåˆ‡é€Ÿåº¦ (m/s)

+   å‰ªåˆ‡æ¨¡é‡ (GPa)

æˆ‘ä»¬ä½¿ç”¨ pandas çš„ â€˜read_csvâ€™ å‡½æ•°å°†è¡¨æ ¼æ•°æ®åŠ è½½åˆ°åä¸º â€˜my_dataâ€™ çš„ DataFrame ä¸­ï¼Œç„¶åé¢„è§ˆå®ƒä»¥ç¡®ä¿æ­£ç¡®åŠ è½½ã€‚

+   æˆ‘ä»¬è¿˜ç”¨æ•°æ®èŒƒå›´å’Œæ ‡ç­¾å¡«å……åˆ—è¡¨ï¼Œä»¥ä¾¿äºç»˜å›¾

```py
idata = 0

if idata == 0:
    df = pd.read_csv('https://raw.githubusercontent.com/GeostatsGuy/GeoDataSets/master/unconv_MV_v4.csv') # load data from Dr. Pyrcz's GitHub repository 
    df.drop('Prod',axis=1,inplace=True)

    features = df.columns.values.tolist()                          # store the names of the features

    xmin = [6.0,0.0,1.0,10.0,0.0,0.9]; xmax = [24.0,10.0,5.0,85.0,2.2,2.9] # set the minimum and maximum values for plotting

    flabel = ['Porosity (%)','Permeability (mD)','Acoustic Impedance (kg/m2s*10â¶)','Brittleness Ratio (%)', # set the names for plotting
             'Total Organic Carbon (%)','Vitrinite Reflectance (%)']

    ftitle = ['Porosity','Permeability','Acoustic Impedance','Brittleness Ratio', # set the units for plotting
             'Total Organic Carbon','Vitrinite Reflectance']

elif idata == 1:
    names = {'Porosity':'Por'}

    df = pd.read_csv('https://raw.githubusercontent.com/GeostatsGuy/GeoDataSets/master/12_sample_data.csv') # load data from Dr. Pyrcz's GitHub repository 
    df = df.rename(columns=names)
    df['Por'] = df['Por'] * 100.0; df['AI'] = df['AI'] / 1000.0; 
    df.drop('Unnamed: 0',axis=1,inplace=True) 

    features = df.columns.values.tolist()                          # store the names of the features

    xmin = [0.0,0.0,0.0,4.0,0.0,6.5,1.4,1600.0,10.0,1300.0,1.6]; xmax = [10000.0,10000.0,1.0,19.0,500.0,8.3,3.6,6200.0,50.0,2000.0,12.0] # set the minimum and maximum values for plotting

    flabel = ['Well (ID)','X (m)','Y (m)','Depth (m)','Porosity (fraction)','Permeability (mD)','Acoustic Impedance (kg/m2s*10â¶)','Facies (categorical)',
              'Density (g/cmÂ³)','Compressible velocity (m/s)','Youngs modulus (GPa)', 'Shear velocity (m/s)', 'Shear modulus (GPa)'] # set the names for plotting

    ftitle = ['Well','X','Y','Depth','Porosity','Permeability','Acoustic Impedance','Facies',
              'Density','Compressible velocity','Youngs modulus', 'Shear velocity', 'Shear modulus']

elif idata == 2:  
    df = pd.read_csv('https://raw.githubusercontent.com/GeostatsGuy/GeoDataSets/master/res21_2D_wells.csv') # load data from Dr. Pyrcz's GitHub repository 

    features = df.columns.values.tolist()                          # store the names of the features

    xmin = [1,0.0,0.0,4.0,0.0,6.5,1.4,1600.0,10.0,1300.0,1.6]; xmax = [73,10000.0,10000.0,19.0,500.0,8.3,3.6,6200.0,50.0,2000.0,12.0] # set the minimum and maximum values for plotting

    flabel = ['Well (ID)','X (m)','Y (m)','Depth (m)','Porosity (fraction)','Permeability (mD)','Acoustic Impedance (kg/m2s*10â¶)','Facies (categorical)',
              'Density (g/cmÂ³)','Compressible velocity (m/s)','Youngs modulus (GPa)', 'Shear velocity (m/s)', 'Shear modulus (GPa)'] # set the names for plotting

    ftitle = ['Well','X','Y','Depth','Porosity','Permeability','Acoustic Impedance','Facies',
              'Density','Compressible velocity','Youngs modulus', 'Shear velocity', 'Shear modulus'] 
```

+   æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºç»˜å›¾å»ºç«‹ç‰¹å¾èŒƒå›´ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç ç›´æ¥ä»æ•°æ®ä¸­è®¡ç®—ç‰¹å¾èŒƒå›´ï¼š

```py
Pormin = np.min(df['Por'].values)                             # extract ndarray of data table column
Pormax = np.max(df['Por'].values)                             # and calculate min and max 
```

ä½†æ˜¯ï¼Œè¿™ä¸ä¼šå¯¼è‡´æ˜“äºç†è§£çš„è‰²æ¡å’Œè½´åˆ»åº¦ï¼Œè®©æˆ‘ä»¬é€‰æ‹©æ–¹ä¾¿çš„æ•´æ•°ã€‚æˆ‘ä»¬è¿˜å°†å£°æ˜ç‰¹å¾æ ‡ç­¾ä»¥æ–¹ä¾¿ç»˜å›¾ã€‚

## å¯è§†åŒ– DataFrame

å¯è§†åŒ– DataFrame æ˜¯å¯¹æ•°æ®çš„åˆæ­¥æ£€æŸ¥ã€‚

+   è®¸å¤šäº‹æƒ…å¯èƒ½ä¼šå‡ºé”™ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬åŠ è½½äº†é”™è¯¯çš„æ•°æ®ï¼Œæ‰€æœ‰ç‰¹å¾éƒ½æ²¡æœ‰åŠ è½½ï¼Œç­‰ç­‰ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨â€˜headâ€™DataFrame æˆå‘˜å‡½æ•°æ¥é¢„è§ˆï¼ˆæ ¼å¼æ•´æ´ï¼Œè§ä¸‹æ–‡ï¼‰ã€‚

+   æ·»åŠ å‚æ•°â€˜n=13â€™ä»¥æŸ¥çœ‹æ•°æ®é›†çš„å‰ 13 è¡Œã€‚

```py
df.head(n=13)                                                 # DataFrame preview 
```

|  | Well | Por | Perm | AI | Brittle | TOC | VR |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1 | 12.08 | 2.92 | 2.80 | 81.40 | 1.16 | 2.31 |
| 1 | 2 | 12.38 | 3.53 | 3.22 | 46.17 | 0.89 | 1.88 |
| 2 | 3 | 14.02 | 2.59 | 4.01 | 72.80 | 0.89 | 2.72 |
| 3 | 4 | 17.67 | 6.75 | 2.63 | 39.81 | 1.08 | 1.88 |
| 4 | 5 | 17.52 | 4.57 | 3.18 | 10.94 | 1.51 | 1.90 |
| 5 | 6 | 14.53 | 4.81 | 2.69 | 53.60 | 0.94 | 1.67 |
| 6 | 7 | 13.49 | 3.60 | 2.93 | 63.71 | 0.80 | 1.85 |
| 7 | 8 | 11.58 | 3.03 | 3.25 | 53.00 | 0.69 | 1.93 |
| 8 | 9 | 12.52 | 2.72 | 2.43 | 65.77 | 0.95 | 1.98 |
| 9 | 10 | 13.25 | 3.94 | 3.71 | 66.20 | 1.14 | 2.65 |
| 10 | 11 | 15.04 | 4.39 | 2.22 | 61.11 | 1.08 | 1.77 |
| 11 | 12 | 16.19 | 6.30 | 2.29 | 49.10 | 1.53 | 1.86 |
| 12 | 13 | 16.82 | 5.42 | 2.80 | 66.65 | 1.17 | 1.98 |

æ³¨æ„ï¼Œç¬¬ä¸€ä¸ªæ•°æ®é›† idata = 0ï¼Œæ²¡æœ‰ç¼ºå¤±æ•°æ®ï¼Œå¦‚æœä½ é€‰æ‹©äº†å®ƒï¼Œè®©æˆ‘ä»¬ä¸ºäº†ä¸‹é¢çš„æ¼”ç¤ºåˆ é™¤ä¸€äº›æ•°æ®ã€‚

## åˆ é™¤ä¸€äº›æ•°æ®

è®©æˆ‘ä»¬é€‰æ‹©ä¸€å®šæ¯”ä¾‹çš„ NaN å€¼ï¼Œè¦è®¾ç½®ä¸ºç¼ºå¤±çš„å€¼ï¼Œ

```py
proportion_NaN = 0.1 
```

ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå¸ƒå°”æ•°ç»„

1.  åˆ›å»ºä¸€ä¸ªä¸ DataFrame å½¢çŠ¶ç›¸åŒï¼ˆè¡Œæ•°å’Œåˆ—æ•°ï¼‰çš„ ndarrayï¼Œå€¼ä¸ºå‡åŒ€åˆ†å¸ƒåœ¨[0,1]ä¹‹é—´çš„å€¼

```py
np.random.random(df.shape) 
```

1.  æ£€æŸ¥å°äºå·²è¯†åˆ«æ¯”ä¾‹çš„æ¡ä»¶ï¼Œä»¥åˆ›å»ºç›¸åŒå¤§å°çš„å¸ƒå°” ndarrayï¼Œå¦‚æœå°äºæ¯”ä¾‹åˆ™ä¸º trueã€‚ç»“æœå°†æ˜¯æ­£ç¡®çš„éšæœº true å€¼çš„æ¯”ä¾‹ï¼ˆåœ¨è¯¯å·®èŒƒå›´å†…ï¼‰ã€‚

```py
remove = np.random.random(df.shape) < proportion_NaN 
```

1.  å°†æ©ç åº”ç”¨äº DataFrame ä¸­å·²è¯†åˆ«çš„å€¼ï¼Œä»¥ä» DataFrame ä¸­åˆ é™¤

```py
df_mask = df.mask(remove) 
```

å®Œå…¨æŠ«éœ²ï¼Œä¸ºäº†è¿™ä¸ªæ¼”ç¤ºï¼Œæˆ‘ä»¬çš„æ•°æ®æ˜¯éšæœºç¼ºå¤±çš„ï¼ŒMARï¼Œè¿™ç®€åŒ–äº†æˆ‘ä»¬çš„ä»»åŠ¡ã€‚

+   è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿä¸“æ³¨äºç‰¹å¾æ’è¡¥çš„æœºåˆ¶ï¼Œè€Œä¸éœ€è¦é¢å¤–çš„é¢†åŸŸä¸“ä¸šçŸ¥è¯†ä¸»é¢˜ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç¬¬ä¸€æ­¥ï¼

```py
if idata == 0 or idata == 1:
    proportion_NaN = 0.1                                          # proportion of values in DataFrame to remove
    np.random.seed(seed=seed)                                     # ensure repeatability
    remove = np.random.random(df.shape) < proportion_NaN          # make the boolean array for removal
    if idata == 1:
        remove[:,df.columns.get_loc('Facies')] = False            # avoid categoical imputation at this time 
    print('Fraction of removed values in mask ndarray = ' + str(round(remove.sum()/remove.size,3)) + '.')

    df_mask = df.mask(remove)
else:
    df_mask = df.copy(deep = True)

print('Fraction of nan values in the DataFrame = ' + str(round(df_mask.isnull().sum().sum()/(df_mask.shape[0]*df_mask.shape[1]),3)) + '.') 
```

```py
Fraction of removed values in mask ndarray = 0.093.
Fraction of nan values in the DataFrame = 0.093. 
```

æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªæ–°çš„åŒ…å«ä¸€äº›ç¼ºå¤±æ•°æ®çš„ DataFrameã€‚

+   è®©æˆ‘ä»¬è¿›è¡Œä¸€ä¸ª.head()é¢„è§ˆæ¥è§‚å¯Ÿæ•°æ®é›†ä¸­æ•£å¸ƒçš„ NaN å€¼

```py
df_mask.head(n=13)                                            # DataFrame preview 
```

|  | Well | Por | Perm | AI | Brittle | TOC | VR |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1.0 | 12.08 | 2.92 | 2.80 | 81.40 | 1.16 | 2.31 |
| 1 | 2.0 | 12.38 | 3.53 | NaN | 46.17 | 0.89 | 1.88 |
| 2 | NaN | 14.02 | 2.59 | 4.01 | 72.80 | 0.89 | 2.72 |
| 3 | 4.0 | 17.67 | 6.75 | 2.63 | 39.81 | 1.08 | 1.88 |
| 4 | 5.0 | 17.52 | 4.57 | 3.18 | 10.94 | 1.51 | 1.90 |
| 5 | 6.0 | 14.53 | 4.81 | 2.69 | 53.60 | 0.94 | 1.67 |
| 6 | 7.0 | 13.49 | 3.60 | NaN | 63.71 | 0.80 | 1.85 |
| 7 | 8.0 | 11.58 | 3.03 | NaN | 53.00 | 0.69 | 1.93 |
| 8 | 9.0 | NaN | 2.72 | NaN | 65.77 | 0.95 | 1.98 |
| 9 | 10.0 | NaN | 3.94 | 3.71 | 66.20 | 1.14 | 2.65 |
| 10 | 11.0 | 15.04 | 4.39 | 2.22 | NaN | 1.08 | 1.77 |
| 11 | NaN | 16.19 | 6.30 | 2.29 | 49.10 | 1.53 | 1.86 |
| 12 | 13.0 | NaN | 5.42 | 2.80 | 66.65 | 1.17 | 1.98 |

## æ•°æ®è¦†ç›–ç‡çš„è¯„ä¼°

è®©æˆ‘ä»¬è®¡ç®—ç¼ºå¤±æ•°æ®çš„æ•°é‡ã€‚

```py
df_mask.describe().transpose()                                # DataFrame summary statistics 
```

|  | count | mean | std | min | 25% | 50% | 75% | max |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Well | 182.0 | 102.653846 | 58.078019 | 1.00 | 53.2500 | 104.000 | 153.7500 | 200.00 |
| Por | 184.0 | 14.935978 | 3.002142 | 6.55 | 12.8900 | 15.055 | 17.4225 | 23.55 |
| Perm | 172.0 | 4.319419 | 1.684672 | 1.13 | 3.1300 | 4.010 | 5.1850 | 9.78 |
| AI | 184.0 | 2.991630 | 0.571569 | 1.28 | 2.5675 | 2.975 | 3.3950 | 4.63 |
| Brittle | 186.0 | 47.793817 | 13.781815 | 10.94 | 37.7450 | 48.830 | 58.0150 | 81.40 |
| TOC | 186.0 | 0.991882 | 0.481896 | -0.19 | 0.6225 | 1.020 | 1.3500 | 2.18 |
| VR | 176.0 | 1.969602 | 0.293877 | 0.93 | 1.7775 | 1.970 | 2.1100 | 2.87 |

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯ä¸ªç‰¹å¾çš„å¯ç”¨å€¼è®¡æ•°ï¼Œç”±äºç¼ºå¤±å€¼è€Œå°‘äºæ ·æœ¬æ€»æ•°ã€‚

è®©æˆ‘ä»¬ç»˜åˆ¶ä¸€ä¸ªå›¾æ¥è¡¨ç¤ºæ¯ä¸ªç‰¹å¾çš„æ•°æ®å®Œæ•´æ€§

+   è¿™æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„æ€»ç»“

```py
plt.subplot(111)                                              # data completeness plot
(df_mask.isnull().sum()/len(df)).plot(kind = 'bar',color='darkorange',edgecolor='black') 
plt.xlabel('Feature'); plt.ylabel('Percentage of Missing Values'); plt.title('Data Completeness'); plt.ylim([0.0,1.0])
plt.plot([-0.5,df.shape[1]+0.5],[0.1,0.1],color='red',ls='--')
plt.subplots_adjust(left=0.0, bottom=0.0, right=1.0, top=0.8, wspace=0.2, hspace=0.2); add_grid(); plt.show() 
```

![_images/6ed9df1de493bc38166372b4dd6106367dd7d5e2888e1c4ef601987fcd269bdd.png](img/8141a96c3a1d36a395c9bf10b9abc9ec.png)

è¿™å¯¼è‡´äº†ç¬¬ä¸€ç§æ•°æ®è¡¥å€¼æ–¹æ³•ï¼Œç‰¹å¾é€‰æ‹©ã€‚

## è¡¥å€¼æ–¹æ³• #1 - ç‰¹å¾é€‰æ‹©

åœ¨ç‰¹å¾é€‰æ‹©ä¸­åº”è€ƒè™‘æ•°æ®å®Œæ•´æ€§ã€‚

+   å¦‚æœæŸä¸ªç‰¹å¾çš„æ•°æ®å®Œæ•´æ€§ä½ã€ç¼ºå¤±æ ·æœ¬æ¯”ä¾‹é«˜ï¼Œé‚£ä¹ˆè¯¥ç‰¹å¾å¯èƒ½è¢«ç§»é™¤ã€‚

ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨ .drop() DataFrame å‡½æ•°ã€‚

```py
df_test = df_mask.drop('VR',axis = 1) 
```

æˆ‘ä»¬ä½¿ç”¨ axis = 1 åˆ é™¤ä¸€ä¸ªç‰¹å¾ï¼ˆå¦‚ä¸Šæ‰€è¿°ï¼‰ä»¥ç§»é™¤è¶…è¿‡ 10% ç‰¹å¾å€¼ç¼ºå¤±çš„ç‰¹å¾ã€‚

```py
if idata == 0:
    drop_features = ['Perm','VR']
elif idata == 1:
    drop_features = []
elif idata == 2:
    drop_features = ['Youngs','Shear']

df_test = df_mask.drop(drop_features,axis = 1)

plt.subplot(111)
(df_test.isnull().sum()/len(df)).plot(kind = 'bar',color='darkorange',edgecolor='black')                # calculate DataFrame with percentage missing by feature
plt.xlabel('Feature'); plt.ylabel('Percentage of Missing Values'); plt.title('Data Completeness'); plt.ylim([0.0,1.0])
plt.plot([-0.5,df.shape[1]+0.5],[0.1,0.1],color='red',ls='--')
plt.subplots_adjust(left=0.0, bottom=0.0, right=1.0, top=0.8, wspace=0.2, hspace=0.2); add_grid(); plt.show() 
```

![_images/4edcc8d4408f594794b18e3efca86c01b48c54a31a361f738633733dd7fdd54d.png](img/a9f7ba6bf3b50feec336b95e30cc7f10.png)

## è¡¥å€¼æ–¹æ³• #2 - æ ·æœ¬é€‰æ‹©

å¯èƒ½å­˜åœ¨æ›´å¤šç¼ºå¤±ç‰¹å¾å€¼çš„æ ·æœ¬ã€‚

+   æŒ‡å®šç‰ˆæœ¬çš„æ•°æ®ï¼Œä¾‹å¦‚ï¼Œæ—§æ•°æ®ï¼Œæˆ–ç»å†æ•°æ®æ”¶é›†é—®é¢˜çš„æ ·æœ¬ä½ç½®

è®©æˆ‘ä»¬æ£€æŸ¥ DataFrame ä¸­çš„æ ·æœ¬è¦†ç›–ç‡ã€‚

+   æˆ‘ä»¬åœ¨ sum å‘½ä»¤ä¸­ä½¿ç”¨ axis=1 å‚æ•°æ¥å¯¹ DataFrame çš„è¡Œï¼ˆæ ·æœ¬ï¼‰ä¸Šçš„ NaN å€¼æ±‚å’Œã€‚

```py
(df_mask.isnull().sum(axis=1)/len(df.columns)).plot(kind = 'bar',color='darkorange',edgecolor='black')
plt.subplots_adjust(left=0.0, bottom=0.0, right=3.2, top=1.2, wspace=0.2, hspace=0.2) # plot formatting
plt.xlabel('Sample Index'); plt.ylabel('Percentage of Missing Records'); plt.title('Data Completeness')
plt.xticks(np.arange(0,len(df_mask),10),np.arange(0,len(df_mask),10))
plt.ylim([0,1.0])
plt.plot([-0.5,len(df)+0.5],[0.2,0.2],color='red',ls='--')
plt.subplots_adjust(left=0.0, bottom=0.0, right=3.0, top=0.8, wspace=0.2, hspace=0.2); add_grid(); plt.show() 
```

![_images/1094c196d3204ba769ef70b04f78bd37049a2213377b9a61c94ba44b5e208fac.png](img/dd50b4d951d45dfccfe1a8f648f800e6.png)

å¦‚æœæˆ‘ä»¬è¯†åˆ«å‡ºæ•°æ®å®Œæ•´æ€§ä½ã€ç¼ºå¤±æ ·æœ¬æ¯”ä¾‹é«˜çš„æ ·æœ¬ï¼Œé‚£ä¹ˆè¯¥æ ·æœ¬å¯èƒ½è¢«ç§»é™¤ã€‚

å†æ¬¡ä½¿ç”¨ .drop() DataFrame å‡½æ•°ã€‚

```py
df_test = df_mask.drop('Water',axis = 1) 
```

è¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨ axis = 0 æ¥åˆ é™¤æ ·æœ¬åˆ—è¡¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚

1.  æˆ‘ä»¬éœ€è¦åˆ¶ä½œä¸€ä¸ªåŒ…å«å¤ªå¤šç¼ºå¤±æ ·æœ¬çš„æ ·æœ¬ç´¢å¼•åˆ—è¡¨

```py
(df_mask.isnull().sum(axis=1)/len(df.columns)) > max_proportion_missing_by_sample 
```

1.  è¿™æ˜¯ä¸€ä¸ªå…ƒç»„ç±»å‹ï¼Œè®©æˆ‘ä»¬å°†å…¶è½¬æ¢ä¸º ndarrayï¼Œç„¶åç¡®ä¿å°†å…¶è½¬æ¢ä¸ºä»…åŒ…å« 1D å€¼

```py
index_low_coverage_samples = np.asarray(np.where(low_coverage_samples == True))[0] 
```

1.  ç°åœ¨ï¼Œæˆ‘ä»¬å‡†å¤‡åº”ç”¨é•¿åº¦ä¸ºæ ·æœ¬æ•°é‡çš„å¸ƒå°”æ•°ç»„ï¼Œå¯¹äºå¤ªå¤šç¼ºå¤±å€¼çš„æ ·æœ¬ä½¿ç”¨ True æ¥é€šè¿‡ç´¢å¼•ç§»é™¤è¿™äº›æ ·æœ¬ã€‚

```py
df_test2 = df_mask.drop(index = index_low_coverage_samples,axis = 0) 
```

```py
max_proportion_missing_by_sample = 0.2

low_coverage_samples = (df_mask.isnull().sum(axis=1)/len(df.columns)) > max_proportion_missing_by_sample 
index_low_coverage_samples = np.asarray(np.where(low_coverage_samples == True))[0]

df_test2 = df_mask.drop(index = index_low_coverage_samples,axis = 0)

(df_test2.isnull().sum(axis=1)/len(df_test2.columns)).plot(kind = 'bar',color='darkorange',edgecolor='black')
plt.subplots_adjust(left=0.0, bottom=0.0, right=3.2, top=1.2, wspace=0.2, hspace=0.2) # plot formatting
plt.xlabel('Updated Sample Index'); plt.ylabel('Percentage of Missing Records'); plt.title('Data Completeness')
plt.xticks(np.arange(0,len(df_mask),10),np.arange(0,len(df_mask),10))
plt.ylim([0,1.0])
plt.plot([-0.5,len(df)+0.5],[0.2,0.2],color='red',ls='--')
plt.subplots_adjust(left=0.0, bottom=0.0, right=3.0, top=0.8, wspace=0.2, hspace=0.2); add_grid(); plt.show() 
```

![_images/06a69f6e87268ae712b6a84cba7292734f89c46eafd1791c71fe0503461516dd.png](img/31d7badd11c070c12bcfdd1d9682913c.png)

## è¡¥å€¼æ–¹æ³• #3 - åˆ—åˆ é™¤

è¿™æ˜¯ç§»é™¤æ‰€æœ‰å…·æœ‰ä»»ä½•ç¼ºå¤±ç‰¹å¾å€¼çš„æ ·æœ¬çš„æ–¹æ³•ã€‚

+   è¿™ç§æ–¹æ³•ç¡®ä¿äº†æ•°æ®çš„å®Œæ•´æ€§ï¼ŒåŒæ—¶åœ¨æŠ€æœ¯ä¸Šé¿å…äº†è¡¥å€¼çš„éœ€æ±‚

+   ä¸éœ€è¦å¡«å€¼æ¨¡å‹å†³ç­–

+   é€šå¸¸ä¼šåˆ é™¤é‡è¦ä¿¡æ¯

+   å¦‚æœä¿¡æ¯ä¸æ˜¯éšæœºç¼ºå¤±ï¼ˆMARï¼‰ï¼Œåˆ™æœ€å¤§åŒ–æ•°æ®åå·®

æˆ‘ä»¬å¿…é¡»è€ƒè™‘æ•°æ®å®Œæ•´æ€§ï¼Œæ¯ä¸ªç‰¹å¾çš„è¦†ç›–èŒƒå›´ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼Œ

+   ä¸€ä¸ªç‰¹å¾ä¸­çš„ç¼ºå¤±è®°å½•å¯èƒ½ä¸å¦ä¸€ä¸ªç‰¹å¾ä¸­çš„ç¼ºå¤±ç‰¹å¾ä¸åŒ

+   æ‰€æœ‰ç‰¹å¾ä¸­ç¼ºå¤±å€¼çš„å¹¶é›†ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ¯”ç‰¹å¾ä¸­æœ€å¤§æ¯”ä¾‹çš„ç¼ºå¤±ä¸¢å¤±æ›´å¤š

æ­¤å¤–ï¼Œå¦‚æœç¼ºå¤±ä¸æ˜¯éšæœºçš„ï¼ˆMNARï¼‰ï¼Œåˆ™æ ·æœ¬åå·®æœ€å¤§åŒ–

+   è™½ç„¶åŒæ ·ç»å¸¸åº”ç”¨åˆ é™¤ï¼Œä½†ä¸å»ºè®®è¿™æ ·åšã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ dropna() å‡½æ•°ã€‚

+   ä½¿ç”¨ subset æˆ‘ä»¬åªèƒ½è€ƒè™‘ç‰¹å¾åˆ—è¡¨

+   how å¯ä»¥è®¾ç½®ä¸º 'any' ä»¥åœ¨å­˜åœ¨ä»»ä½•ç¼ºå¤±å€¼æ—¶åˆ é™¤ï¼Œæˆ–è€…è®¾ç½®ä¸º 'all' ä»¥åœ¨æ‰€æœ‰å€¼éƒ½ç¼ºå¤±æ—¶åˆ é™¤

+   inplace true å°†è¦†ç›– DataFrame è€Œæ²¡æœ‰è¾“å‡ºï¼Œè€Œ false å°†å°†æ–°çš„ DataFrame ä½œä¸ºå‰¯æœ¬ä¼ é€’

```py
df_listwise = df_mask.dropna(how='any',inplace=False)

sns.pairplot(df_listwise.iloc[:,:-1], plot_kws={'alpha':0.5,'s':20},corner=True)
plt.subplots_adjust(left=0.0, bottom=0.0, right=0.5, top=0.6, wspace=0.1, hspace=0.2)
# df_likewise.head(n = 13) 
```

![_images/cd0f355d1b0b99db0bc0bdfc15b85d7c71f1e6e72bd6b0586bd0bdcc738b14c8.png](img/dbce84c00782b7a258ef46bddbe35881.png)

## å¡«å€¼å»ºæ¨¡æ–¹æ³•

è¿™äº›æ˜¯å°†ç‰¹å¾å¡«å€¼è§†ä¸ºé¢„æµ‹é—®é¢˜çš„æ–¹æ³•ï¼Œå³ä½¿ç”¨å…¶ä»–å¯ç”¨æ•°æ®é¢„æµ‹ç¼ºå¤±ç‰¹å¾å€¼ï¼Œä¾‹å¦‚ï¼Œ

+   ç›¸é‚»çš„å…¶ä»–å¯ç”¨ç‰¹å¾å€¼

+   åœ¨å…¶ä»–æ ·æœ¬ä½ç½®å¯ç”¨çš„ç›¸åŒç‰¹å¾å€¼

æœ‰è®¸å¤šé¢„æµ‹æ–¹æ³•ç”¨äºç‰¹å¾å¡«å€¼ï¼Œ

+   æˆ‘ä»¬ä»æœ€ç®€å•çš„é¢„æµ‹æ¨¡å‹å¼€å§‹ï¼Œä½¿ç”¨å…¨å±€å‡å€¼è¿›è¡Œé¢„æµ‹ï¼Œç„¶åä»é‚£é‡Œå¼€å§‹ä½¿ç”¨æ›´å¤æ‚çš„æ¨¡å‹

ä¸ºäº†å¸®åŠ©æˆ‘ä»¬å¯è§†åŒ–ç»“æœï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªç‰¹å¾ï¼Œè¡¨ç¤ºç‰¹å®šæ ·æœ¬æ˜¯å¦æœ‰ä»»ä½•ç¼ºå¤±çš„ç‰¹å¾å€¼

+   è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¸ºå·²ç»è¿›è¡Œç‰¹å¾å¡«å€¼çš„æ ·æœ¬è¿›è¡Œæ ‡è®°ï¼Œä»¥ä¾¿å¯¹ç‰¹å¾å¡«å€¼ç»“æœè¿›è¡Œè¯„ä¼°å’Œå¯è§†åŒ–

```py
df_mask['Imputed'] = (df_mask.isnull().sum(axis=1)) > 0
df_mask.head() 
```

|  | Well | Por | Perm | AI | Brittle | TOC | VR | Imputed |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1.0 | 12.08 | 2.92 | 2.80 | 81.40 | 1.16 | 2.31 | False |
| 1 | 2.0 | 12.38 | 3.53 | NaN | 46.17 | 0.89 | 1.88 | True |
| 2 | NaN | 14.02 | 2.59 | 4.01 | 72.80 | 0.89 | 2.72 | True |
| 3 | 4.0 | 17.67 | 6.75 | 2.63 | 39.81 | 1.08 | 1.88 | False |
| 4 | 5.0 | 17.52 | 4.57 | 3.18 | 10.94 | 1.51 | 1.90 | False |

## å¡«å€¼æ–¹æ³• #4 - ç”¨å¸¸æ•°æ›¿æ¢

è¿™æ˜¯ç”¨å¸¸æ•°å€¼æ›¿æ¢ç¼ºå¤±å€¼çš„æ–¹æ³•ã€‚

+   è¿™é‡Œæ˜¯ä¸€ä¸ªç”¨éå¸¸ä½çš„å€¼æ›¿æ¢ç¼ºå¤±ç‰¹å¾å€¼çš„ç¤ºä¾‹

è¿™ä¼šå¯¼è‡´åå·®ï¼Œä¸åº”è¿™æ ·åšã€‚

```py
df_constant = df_mask.copy(deep=True)                         # make a deep copy of the DataFrame
constant_imputer = SimpleImputer(strategy='constant',fill_value = 0.01)
df_constant.iloc[:,:] = constant_imputer.fit_transform(df_constant)

sns.pairplot(df_constant.iloc[:,:], hue="Imputed", plot_kws={'alpha':0.15,'s':20}, palette = 'gnuplot', corner=True)
plt.subplots_adjust(left=0.0, bottom=0.0, right=0.5, top=0.6, wspace=0.1, hspace=0.2)
df_constant.head(n=5) 
```

|  | Well | Por | Perm | AI | Brittle | TOC | VR | Imputed |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1.00 | 12.08 | 2.92 | 2.80 | 81.40 | 1.16 | 2.31 | 0.0 |
| 1 | 2.00 | 12.38 | 3.53 | 0.01 | 46.17 | 0.89 | 1.88 | 1.0 |
| 2 | 0.01 | 14.02 | 2.59 | 4.01 | 72.80 | 0.89 | 2.72 | 1.0 |
| 3 | 4.00 | 17.67 | 6.75 | 2.63 | 39.81 | 1.08 | 1.88 | 0.0 |
| 4 | 5.00 | 17.52 | 4.57 | 3.18 | 10.94 | 1.51 | 1.90 | 0.0 |

![_images/26d51c63231cad2ab6a81f7ea33532841237c36c4d2ed2eadd7cc2d187de5b42.png](img/298f9bcf88d78b4cfab76adc592ff1cf.png)

## Imputation Method #6 - Replace with the Mean

è¿™æ˜¯å°†ç¼ºå¤±å€¼æ›¿æ¢ä¸ºç‰¹å¾çš„å¹³å‡å€¼ï¼Œå³ç®—æœ¯å¹³å‡å€¼çš„æ–¹æ³•ã€‚

$$ ğ‘¥_ğ‘– = ğ¸\{ğ‘‹_ğ‘–\} $$

+   å…¨å±€å‡å€¼å…¨å±€æ— åï¼Œä½†å¯èƒ½å¯¼è‡´å±€éƒ¨åå·®ï¼Œå³ä½å€¼è¢«é«˜ä¼°ï¼Œé«˜å€¼è¢«ä½ä¼°

```py
df_mean = df_mask.copy(deep=True)                         # make a deep copy of the DataFrame
mean_imputer = SimpleImputer(strategy='mean')
df_mean.iloc[:,:] = mean_imputer.fit_transform(df_mean)

sns.pairplot(df_mean.iloc[:,:], hue="Imputed", plot_kws={'alpha':0.15,'s':20}, palette = 'gnuplot', corner=True)
plt.subplots_adjust(left=0.0, bottom=0.0, right=0.5, top=0.6, wspace=0.1, hspace=0.2)
df_constant.head(n=5)
df_mean.head(n=5) 
```

|  | Well | Por | Perm | AI | Brittle | TOC | VR | Imputed |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1.000000 | 12.08 | 2.92 | 2.80000 | 81.40 | 1.16 | 2.31 | 0.0 |
| 1 | 2.000000 | 12.38 | 3.53 | 2.99163 | 46.17 | 0.89 | 1.88 | 1.0 |
| 2 | 102.653846 | 14.02 | 2.59 | 4.01000 | 72.80 | 0.89 | 2.72 | 1.0 |
| 3 | 4.000000 | 17.67 | 6.75 | 2.63000 | 39.81 | 1.08 | 1.88 | 0.0 |
| 4 | 5.000000 | 17.52 | 4.57 | 3.18000 | 10.94 | 1.51 | 1.90 | 0.0 |

![_images/528e09249ebb432ddad9b71a908196dda11a47ea01b66b45c85c7f762352afbf.png](img/4299a66f1feb551c70f7ed3689f190e7.png)

## Imputation Method #6 - Replace with the Mode

è¿™æ˜¯å°†ç¼ºå¤±å€¼æ›¿æ¢ä¸ºç‰¹å¾ä¸­æœ€é¢‘ç¹å€¼ï¼Œå³ä¼—æ•°çš„æ–¹æ³•ã€‚

+   åœ¨å­˜åœ¨å¼‚å¸¸å€¼çš„æƒ…å†µä¸‹ï¼Œå¹³å‡å€¼å¯èƒ½ä¸å¯é ã€‚æˆ‘çš„å»ºè®®æ˜¯åœ¨ç‰¹å¾æ’è¡¥ä¹‹å‰é¦–å…ˆå¤„ç†å¼‚å¸¸å€¼

```py
df_mode = df_mask.copy(deep=True)                         # make a deep copy of the DataFrame
mode_imputer = SimpleImputer(strategy='most_frequent')
df_mode.iloc[:,:] = mode_imputer.fit_transform(df_mode)

sns.pairplot(df_mode.iloc[:,:], hue="Imputed", plot_kws={'alpha':0.15,'s':20}, palette = 'gnuplot', corner=True)
plt.subplots_adjust(left=0.0, bottom=0.0, right=0.5, top=0.6, wspace=0.1, hspace=0.2)
df_constant.head(n=5)
df_mode.head(n=5) 
```

|  | Well | Por | Perm | AI | Brittle | TOC | VR | Imputed |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1.0 | 12.08 | 2.92 | 2.80 | 81.40 | 1.16 | 2.31 | 0.0 |
| 1 | 2.0 | 12.38 | 3.53 | 2.45 | 46.17 | 0.89 | 1.88 | 1.0 |
| 2 | 1.0 | 14.02 | 2.59 | 4.01 | 72.80 | 0.89 | 2.72 | 1.0 |
| 3 | 4.0 | 17.67 | 6.75 | 2.63 | 39.81 | 1.08 | 1.88 | 0.0 |
| 4 | 5.0 | 17.52 | 4.57 | 3.18 | 10.94 | 1.51 | 1.90 | 0.0 |

![_images/5eaf7ed5b2d8fcf4a6bb53f0d7efe3463b5e18b51a7c7f09b044e579fb936aca.png](img/d0bd84a25bcc7b4485a3fc45fa350dfa.png)

## Imputation Method #7 - Replace with the n-nearest Neighbor estimation

è¿™æ˜¯å°†ç¼ºå¤±å€¼æ›¿æ¢ä¸ºåŸºäºå…¶ä»–å¯ç”¨åŒä½ç‰¹å¾å€¼çš„ k-æœ€è¿‘é‚»é¢„æµ‹æ¨¡å‹çš„æ–¹æ³•ã€‚

+   åœ¨æœ¬ç”µå­ä¹¦çš„ k-æœ€è¿‘é‚»ç« èŠ‚ä¸­æŸ¥çœ‹æ–¹æ³•çš„è§£é‡Šã€å‡è®¾å’Œè¶…å‚æ•°

+   å¯ç”¨æ•°æ®åº”ç”¨äºé¢„æµ‹ç‰¹å¾ç©ºé—´ä¸­çš„ç¼ºå¤±å€¼

ç”±äº k-æœ€è¿‘é‚»æ–¹æ³•æ˜¯ä¸€ç§æ‡’æƒ°å­¦ä¹ å™¨ï¼Œæ’è¡¥å€¼æ˜¯åœ¨å¯¹ç¼ºå¤±å€¼è¿›è¡Œå•æ¬¡éå†æ—¶è®¡ç®—çš„

+   æ²¡æœ‰å•ç‹¬çš„åŸ¹è®­å’Œé¢„æµ‹æ­¥éª¤

æ­¤æ–¹æ³•åº”å…·æœ‰å…¨å±€æ— åæ€§ï¼Œå¹¶å°†ç›¸å¯¹äºå…¨å±€å‡å€¼ç‰¹å¾æ’è¡¥å‡å°‘å±€éƒ¨åå·®

```py
df_knn = df_mask.copy(deep=True)                         # make a deep copy of the DataFrame
knn_imputer = KNNImputer(n_neighbors=2, weights="uniform")
df_knn.iloc[:,:] = knn_imputer.fit_transform(df_knn)

sns.pairplot(df_knn.iloc[:,:], hue="Imputed", plot_kws={'alpha':0.15,'s':20}, palette = 'gnuplot', corner=True)
plt.subplots_adjust(left=0.0, bottom=0.0, right=0.5, top=0.6, wspace=0.1, hspace=0.2)
df_constant.head(n=5)
df_mode.head(n=5) 
```

|  | Well | Por | Perm | AI | Brittle | TOC | VR | Imputed |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1.0 | 12.08 | 2.92 | 2.80 | 81.40 | 1.16 | 2.31 | 0.0 |
| 1 | 2.0 | 12.38 | 3.53 | 2.45 | 46.17 | 0.89 | 1.88 | 1.0 |
| 2 | 1.0 | 14.02 | 2.59 | 4.01 | 72.80 | 0.89 | 2.72 | 1.0 |
| 3 | 4.0 | 17.67 | 6.75 | 2.63 | 39.81 | 1.08 | 1.88 | 0.0 |
| 4 | 5.0 | 17.52 | 4.57 | 3.18 | 10.94 | 1.51 | 1.90 | 0.0 |

![_images/8f2542fc3c97e9623022bacaddaa28bf89c6d3f36b68ff0c6b0be81b5ade76b2.png](img/a00ad8045d28e8e20b2a119a285a84e9.png)

## å¡«å……æ–¹æ³• #8 - é€šè¿‡é“¾å¼æ–¹ç¨‹çš„å¤šé‡å¡«å……

è¿™æ˜¯ç”¨ k-æœ€è¿‘é‚»é¢„æµ‹æ¨¡å‹æ›¿æ¢ç¼ºå¤±å€¼çš„æ–¹æ³•

1.  ç”¨ $ğ¹_{ğ‘‹_{ğ‘–=1,\ldots,ğ‘š}}(ğ‘‹_{ğ‘–=1,\ldots,ğ‘š})$ ä¸­çš„éšæœºå€¼æ›¿æ¢ç¼ºå¤±å€¼

1.  å¯¹ç‰¹å¾è¿›è¡Œé¡ºåºé¢„æµ‹ï¼Œä»¥é¢„æµ‹å…¶ä»–ç¼ºå¤±å€¼

1.  è¿­ä»£ç›´åˆ°æ”¶æ•›æ ‡å‡†ï¼Œé€šå¸¸æ˜¯å¤šå…ƒç»Ÿè®¡

1.  å¯¹æ•°æ®é›†çš„å¤šä¸ªå®ç°è¿›è¡Œé‡å¤

é»˜è®¤é¢„æµ‹å™¨æ˜¯ BayesianRidge()ã€‚

+   æˆ‘ä»¬å¯ä»¥æŒ‡å®šæœ€å¤§è¿­ä»£æ¬¡æ•°ã€‚è¿”å›æœ€åè®¡ç®—å‡ºçš„å¡«å……å€¼ã€‚

```py
df_mice = df_mask.copy(deep=True)                         # make a deep copy of the DataFrame
mice_imputer = IterativeImputer()
df_mice.iloc[:,:] = mice_imputer.fit_transform(df_mice)

sns.pairplot(df_mice.iloc[:,:], hue="Imputed", plot_kws={'alpha':0.15,'s':20}, palette = 'gnuplot', corner=True)
plt.subplots_adjust(left=0.0, bottom=0.0, right=0.5, top=0.6, wspace=0.1, hspace=0.2)
df_constant.head(n=5)
df_mode.head(n=5) 
```

|  | Well | Por | Perm | AI | Brittle | TOC | VR | å¡«å…… |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1.0 | 12.08 | 2.92 | 2.80 | 81.40 | 1.16 | 2.31 | 0.0 |
| 1 | 2.0 | 12.38 | 3.53 | 2.45 | 46.17 | 0.89 | 1.88 | 1.0 |
| 2 | 1.0 | 14.02 | 2.59 | 4.01 | 72.80 | 0.89 | 2.72 | 1.0 |
| 3 | 4.0 | 17.67 | 6.75 | 2.63 | 39.81 | 1.08 | 1.88 | 0.0 |
| 4 | 5.0 | 17.52 | 4.57 | 3.18 | 10.94 | 1.51 | 1.90 | 0.0 |

![_images/d930c573190c546f174a877996c13fd81fc9cbda6474c27840ba3b35e15b348d.png](img/feb8877973dcdfd81b91cf2afeff7039.png)

## ä¿å­˜å¡«å……çš„ DataFrame

è¾“å‡ºè¾“å…¥çš„æ•°æ®æ–‡ä»¶ã€‚

```py
save_imputed = False                                          # save the imputed DataFrame?

if save_imputed == True:
    df_imputed = df_knn.copy(deep = True)                     # select the imputation method

    df_imputed.drop('Imputed',axis=1,inplace=True) 
    file_name = r'dataframe_imputed.csv'

    df_imputed.to_csv(file_name, index=False) 
```

## æ³¨é‡Š

è¿™æ˜¯å¯¹ç‰¹å¾å¡«å……çš„åŸºæœ¬å¤„ç†ã€‚å¯ä»¥åšå’Œè®¨è®ºçš„è¿˜æœ‰å¾ˆå¤šï¼Œæˆ‘æœ‰å¾ˆå¤šæ›´å¤šçš„èµ„æºã€‚æŸ¥çœ‹æˆ‘çš„[å…±äº«èµ„æºæ¸…å•](https://michaelpyrcz.com/my-resources)ä»¥åŠæœ¬ç« å¼€å¤´å¸¦æœ‰èµ„æºé“¾æ¥çš„ YouTube è®²åº§é“¾æ¥ã€‚

å¸Œæœ›è¿™æœ‰æ‰€å¸®åŠ©ï¼Œ

*è¿ˆå…‹å°”*

## å…³äºä½œè€…

![](img/eb709b2c0a0c715da01ae0165efdf3b2.png)

è¿ˆå…‹å°”Â·çš®å°”å¥‡æ•™æˆåœ¨å¾·å…‹è¨æ–¯å¤§å­¦å¥¥æ–¯æ±€åˆ†æ ¡ 40 è‹±äº©æ ¡å›­çš„åŠå…¬å®¤ã€‚

è¿ˆå…‹å°”Â·çš®å°”å¥‡æ˜¯å¾·å…‹è¨æ–¯å¤§å­¦å¥¥æ–¯æ±€åˆ†æ ¡[ç§‘å…‹é›·å°”å·¥ç¨‹å­¦é™¢](https://cockrell.utexas.edu/faculty-directory/alphabetical/p)å’Œ[æ°å…‹é€Šåœ°çƒç§‘å­¦å­¦é™¢](https://www.jsg.utexas.edu/researcher/michael_pyrcz/)çš„æ•™æˆï¼Œä»–åœ¨é‚£é‡Œç ”ç©¶å¹¶æ•™æˆåœ°ä¸‹ã€ç©ºé—´æ•°æ®åˆ†æã€åœ°ç»Ÿè®¡å­¦å’Œæœºå™¨å­¦ä¹ ã€‚è¿ˆå…‹å°”è¿˜æ˜¯ï¼Œ

+   [èƒ½æºåˆ†æ](https://fri.cns.utexas.edu/energy-analytics)æ–°ç”Ÿç ”ç©¶é¡¹ç›®çš„è´Ÿè´£äººï¼Œå¾·å…‹è¨æ–¯å¤§å­¦å¥¥æ–¯æ±€åˆ†æ ¡è‡ªç„¶ç§‘å­¦é™¢æœºå™¨å­¦ä¹ å®éªŒå®¤çš„æ ¸å¿ƒæ•™å‘˜

+   [è®¡ç®—æœºä¸åœ°çƒç§‘å­¦](https://www.sciencedirect.com/journal/computers-and-geosciences/about/editorial-board)çš„å‰¯ç¼–è¾‘ï¼Œä»¥åŠå›½é™…æ•°å­¦åœ°çƒç§‘å­¦åä¼š[æ•°å­¦åœ°çƒç§‘å­¦](https://link.springer.com/journal/11004/editorial-board)çš„è‘£äº‹ä¼šæˆå‘˜ã€‚

è¿ˆå…‹å°”å·²ç»æ’°å†™äº† 70 å¤šç¯‡[åŒè¡Œè¯„å®¡å‡ºç‰ˆç‰©](https://scholar.google.com/citations?user=QVZ20eQAAAAJ&hl=en)ï¼Œä¸€ä¸ªç”¨äºç©ºé—´æ•°æ®åˆ†æçš„[Python åŒ…](https://pypi.org/project/geostatspy/)ï¼Œåˆè‘—äº†ä¸€æœ¬å…³äºç©ºé—´æ•°æ®åˆ†æçš„æ•™ç§‘ä¹¦[åœ°ç»Ÿè®¡å­¦å‚¨å±‚å»ºæ¨¡](https://www.amazon.com/Geostatistical-Reservoir-Modeling-Michael-Pyrcz/dp/0199731446)ï¼Œå¹¶æ˜¯ä¸¤æœ¬æœ€è¿‘å‘å¸ƒçš„ç”µå­ä¹¦çš„ä½œè€…ï¼Œ[Python ä¸­åº”ç”¨åœ°ç»Ÿè®¡å­¦ï¼šGeostatsPy å®è·µæŒ‡å—](https://geostatsguy.github.io/GeostatsPyDemos_Book/intro.html)å’Œ[Python ä¸­åº”ç”¨æœºå™¨å­¦ä¹ ï¼šä»£ç å®è·µæŒ‡å—](https://geostatsguy.github.io/MachineLearningDemos_Book/intro.html)ã€‚

è¿ˆå…‹å°”çš„æ‰€æœ‰å¤§å­¦è®²åº§éƒ½å¯ä»¥åœ¨ä»–çš„[YouTube é¢‘é“](https://www.youtube.com/@GeostatsGuyLectures)ä¸Šæ‰¾åˆ°ï¼Œé™„æœ‰ 100 å¤šä¸ª Python äº¤äº’å¼ä»ªè¡¨æ¿å’Œ 40 å¤šä¸ªå­˜å‚¨åº“ä¸­çš„è¯¦ç»†å·¥ä½œæµç¨‹é“¾æ¥ï¼Œè¿™äº›å­˜å‚¨åº“ä½äºä»–çš„[GitHub è´¦æˆ·](https://github.com/GeostatsGuy)ï¼Œä»¥æ”¯æŒä»»ä½•æ„Ÿå…´è¶£çš„å­¦ç”Ÿå’Œåœ¨èŒä¸“ä¸šäººå£«ï¼Œæä¾›å¸¸é’å†…å®¹ã€‚æƒ³äº†è§£æ›´å¤šå…³äºè¿ˆå…‹å°”çš„å·¥ä½œå’Œå…±äº«æ•™è‚²èµ„æºï¼Œè¯·è®¿é—®ä»–çš„ç½‘ç«™ã€‚

## æƒ³ä¸€èµ·å·¥ä½œå—ï¼Ÿ

æˆ‘å¸Œæœ›è¿™äº›å†…å®¹å¯¹é‚£äº›æƒ³äº†è§£æ›´å¤šå…³äºåœ°ä¸‹å»ºæ¨¡ã€æ•°æ®åˆ†æå’Œæœºå™¨å­¦ä¹ çš„äººæœ‰æ‰€å¸®åŠ©ã€‚å­¦ç”Ÿå’Œåœ¨èŒä¸“ä¸šäººå£«æ¬¢è¿å‚åŠ ã€‚

+   æƒ³é‚€è¯·æˆ‘åˆ°è´µå…¬å¸è¿›è¡ŒåŸ¹è®­ã€è¾…å¯¼ã€é¡¹ç›®å®¡æŸ¥ã€å·¥ä½œæµç¨‹è®¾è®¡å’Œ/æˆ–å’¨è¯¢å—ï¼Ÿæˆ‘å¾ˆä¹æ„æ‹œè®¿å¹¶ä¸æ‚¨åˆä½œï¼

+   æ„Ÿå…´è¶£åˆä½œã€æ”¯æŒæˆ‘çš„ç ”ç©¶ç”Ÿç ”ç©¶æˆ–æˆ‘çš„åœ°ä¸‹æ•°æ®åˆ†æä¸æœºå™¨å­¦ä¹ è”ç›Ÿï¼ˆå…±åŒè´Ÿè´£äººæ˜¯çº¦ç¿°Â·ç¦æ–¯ç‰¹æ•™æˆï¼‰å—ï¼Ÿæˆ‘çš„ç ”ç©¶ç»“åˆæ•°æ®åˆ†æã€éšæœºå»ºæ¨¡å’Œæœºå™¨å­¦ä¹ ç†è®ºåŠå®è·µï¼Œå¼€å‘æ–°é¢–çš„æ–¹æ³•å’Œå·¥ä½œæµç¨‹ä»¥å¢åŠ ä»·å€¼ã€‚æˆ‘ä»¬æ­£åœ¨è§£å†³å…·æœ‰æŒ‘æˆ˜æ€§çš„åœ°ä¸‹é—®é¢˜ï¼

+   æ‚¨å¯ä»¥é€šè¿‡ mpyrcz@austin.utexas.edu è”ç³»æˆ‘ã€‚

æˆ‘æ€»æ˜¯å¾ˆé«˜å…´è®¨è®ºã€‚

*è¿ˆå…‹å°”*

è¿ˆå…‹å°”Â·çš®å°”èŒ¨ï¼Œåšå£«ï¼ŒP.Eng. æ•™æˆï¼Œå¾·å…‹è¨æ–¯å¤§å­¦å¥¥æ–¯æ±€åˆ†æ ¡çš„ç§‘å…‹é›·å°”å·¥ç¨‹å­¦é™¢å’Œæ°å…‹é€Šåœ°çƒç§‘å­¦å­¦é™¢

æ›´å¤šèµ„æºå¯åœ¨ä»¥ä¸‹é“¾æ¥æ‰¾åˆ°ï¼š[Twitter](https://twitter.com/geostatsguy) | [GitHub](https://github.com/GeostatsGuy) | [ç½‘ç«™](http://michaelpyrcz.com) | [Google Scholar](https://scholar.google.com/citations?user=QVZ20eQAAAAJ&hl=en&oi=ao) | [åœ°ç»Ÿè®¡å­¦ä¹¦ç±](https://www.amazon.com/Geostatistical-Reservoir-Modeling-Michael-Pyrcz/dp/0199731446) | [YouTube](https://www.youtube.com/channel/UCLqEr-xV-ceHdXXXrTId5ig) | [Python ä¸­åº”ç”¨åœ°ç»Ÿè®¡å­¦ç”µå­ä¹¦](https://geostatsguy.github.io/GeostatsPyDemos_Book/intro.html) | [Python ä¸­åº”ç”¨æœºå™¨å­¦ä¹ ç”µå­ä¹¦](https://geostatsguy.github.io/MachineLearningDemos_Book/) | [LinkedIn](https://www.linkedin.com/in/michael-pyrcz-61a648a1)

## ç‰¹å¾æ’è¡¥çš„åŠ¨æœº

å¤§å¤šæ•°ç©ºé—´å’Œåœ°ä¸‹æ•°æ®é›†éƒ½ä¸å®Œæ•´ï¼Œæ•°æ®åº“ä¸­å­˜åœ¨ç¼ºå¤±å€¼ã€‚

+   è®¸å¤šæ•°æ®åˆ†æå’Œæœºå™¨å­¦ä¹ å·¥ä½œæµç¨‹éœ€è¦å®Œæ•´çš„æ•°æ®ï¼Œ$ğ‘¥_(1,ğ‘–),\dots,ğ‘¥_(ğ‘š,ğ‘–)$ å¯¹äºæ¯ä¸ªæ•°æ®æ ·æœ¬ $ğ‘– = 1,\ldots,ğ‘›$ã€‚

**æ¨ç†æœºå™¨å­¦ä¹ ** - éœ€è¦å®Œæ•´æ•°æ®çš„æ–¹æ³•ï¼Œä¾‹å¦‚ï¼Œ

1.  ä¸»æˆåˆ†åˆ†æ - éœ€è¦åæ–¹å·®çŸ©é˜µï¼Œè€Œåæ–¹å·®éœ€è¦æ‰€æœ‰ç‰¹å¾å€¼

1.  å¤šç»´å°ºåº¦åˆ†æ - æ²¡æœ‰æ‰€æœ‰ç‰¹å¾å¯ç”¨ï¼Œæˆ‘ä»¬æ— æ³•è®¡ç®—ç›¸ä¼¼æ€§çŸ©é˜µ

1.  èšç±»åˆ†æ - æ²¡æœ‰æ‰€æœ‰ç‰¹å¾å€¼ï¼Œæˆ‘ä»¬æ— æ³•åœ¨ç‰¹å¾ç©ºé—´ä¸­è®¡ç®—è·ç¦»

**é¢„æµ‹æœºå™¨å­¦ä¹ ** - æ€»æ˜¯éœ€è¦æ‰€æœ‰ç‰¹å¾æ¥è®­ç»ƒå’Œæµ‹è¯•æ¨¡å‹ï¼Œ

$$ y = f(X_1,\ldots,X_m) $$

å¤„ç†ç¼ºå¤±æ•°æ®æ˜¯ç‰¹å¾/æ•°æ®å·¥ç¨‹çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œæ˜¯æ•°æ®åˆ†æå’Œæœºå™¨å­¦ä¹ çš„å…ˆå†³æ¡ä»¶ã€‚

+   é¦–å…ˆäº†è§£ç¼ºå¤±æ•°æ®çš„åŸå› å’Œå½±å“æ˜¯å¾ˆé‡è¦çš„ã€‚

## ç¼ºå¤±ç‰¹å¾å€¼çš„åŸå› 

éšæœºç¼ºå¤±ï¼ˆMARï¼‰å¹¶ä¸å¸¸è§ä¸”éš¾ä»¥è¯„ä¼°ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ

+   å…¨çƒéšæœºé—æ¼å¯èƒ½ä¸ä¼šå¯¼è‡´æ•°æ®åå·®å’Œç»“æœæ¨¡å‹çš„åå·®

éšæœºç¼ºå¤±ï¼ˆMARï¼‰é€šå¸¸ä¸æ˜¯è¿™ç§æƒ…å†µï¼Œå› ä¸ºç¼ºå¤±æ•°æ®é€šå¸¸ä¸ä¸€ä¸ªæ··æ‚ç‰¹å¾ç›¸å…³ï¼Œä¾‹å¦‚ï¼Œ

+   **é‡‡æ ·æˆæœ¬** - ä¾‹å¦‚ï¼Œä½æ¸—é€ç‡æµ‹è¯•è€—æ—¶è¿‡é•¿

+   **å²©çŸ³æµå˜å­¦æˆ–å…¶ä»–æ ·æœ¬å­˜æ´»ç‡åå·®** - ä¾‹å¦‚ï¼Œæ— æ³•æ¢å¤æ³¥å²©æ ·æœ¬

+   **æ ·æœ¬è®¾è®¡** - é‡‡æ ·ä»¥å‡å°‘ä¸ç¡®å®šæ€§å¹¶æœ€å¤§åŒ–ç›ˆåˆ©æ€§ï¼Œè€Œä¸æ˜¯ç»Ÿè®¡ä»£è¡¨æ€§ï¼Œä¿¡æ¯ä¸ç”Ÿäº§åŒé‡ç›®çš„çš„æ ·æœ¬

+   **é‡‡æ ·å¯åŠæ€§** - åœ°ä¸‹ç©ºé—´ä¸­æœ‰ä¸€äº›åœ°æ–¹éš¾ä»¥æˆ–æ— æ³•é‡‡æ ·ï¼Œä¾‹å¦‚ï¼Œé è¿‘æ¹–æ³Šæˆ–ç¤¾åŒºï¼Œæˆ–ç”¨äºåœ°éœ‡æˆåƒçš„åº•ç›å±‚

## ç¼ºå¤±ç‰¹å¾å€¼çš„åæœ

è¿™å°†å¯¼è‡´ç¼ºå¤±å€¼åœ¨ä½ç½®å’Œç‰¹å¾ç©ºé—´ä¸­çš„èšç±»ã€‚

+   ç¼ºå¤±è¿™äº›ç‰¹å¾å€¼å¯èƒ½ä¼šåå…¨çƒç»Ÿè®¡ï¼Œå¹¶é™ä½å±€éƒ¨é¢„æµ‹çš„å‡†ç¡®æ€§

+   ä½¿ç”¨å…¨å±€åˆ†å¸ƒæ¥æ’è¡¥ç¼ºå¤±å€¼å¯èƒ½å¹¶ä¸åˆç†

ä¸ä»…ä»…æ˜¯å‡å°‘è®­ç»ƒå’Œæµ‹è¯•æ•°æ®é‡ï¼Œå¦‚æœç¼ºå¤±æ•°æ®ä¸æ˜¯å®Œå…¨éšæœºçš„ï¼Œå°†å¯¼è‡´ï¼š

+   åå·®çš„æ ·æœ¬ç»Ÿè®¡å¯¼è‡´æ¨¡å‹è®­ç»ƒå’Œæµ‹è¯•åå·®

+   åå·®æ¨¡å‹å…·æœ‰åå·®é¢„æµ‹ï¼Œå¯èƒ½æ²¡æœ‰ä»»ä½•åå·®æŒ‡ç¤ºï¼

å¦‚æœä½ é‡æ–°é˜…è¯»ä¸Šè¿°å†…å®¹å¯»æ‰¾è§£å†³æ–¹æ¡ˆï¼Œæˆ‘æä¾›æˆ‘çš„åŠ æ‹¿å¤§å¼â€œå¯¹ä¸èµ·â€ã€‚äº†è§£æˆ‘ä»¬çš„äººçŸ¥é“æˆ‘ä»¬ç»å¸¸è¯´â€œå¯¹ä¸èµ·â€ï¼Œå¹¶ä¸”å¯¹è¿™ä¸ªè¯æœ‰ç‹¬ç‰¹çš„å‘éŸ³ã€‚

æˆ‘ä»¥ä¸Šæ‰€è¿°ä»…ä¸ºä¸€ä¸ªè­¦ç¤ºæ€§çš„æé†’ï¼Œ

+   åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç”±äºæˆ‘ä»¬çš„æ•°æ®æŒ‘æˆ˜ï¼Œä¾‹å¦‚æ•°æ®ç¨€ç¼ºå’Œéå¹³ç¨³æ€§ï¼Œå®è·µä¸­å­˜åœ¨å·®è·ã€‚

+   æˆ‘å¯ä»¥èŠ±æ•´ä¸ªè¯¾ç¨‹çš„æ—¶é—´æ•™æˆè§£å†³è¿™äº›æŒ‘æˆ˜çš„æ–¹æ³•

+   è§£å†³æ–¹æ¡ˆæ•´åˆäº†æ•´ä¸ªåœ°ä¸‹ç©ºé—´ï¼Œç©ºé—´é¡¹ç›®å›¢é˜Ÿï¼Œå³é¢†åŸŸä¸“ä¸šçŸ¥è¯†è‡³å…³é‡è¦

+   æˆ‘å°†æ­¤ç•™äºæ„è¯†å±‚é¢

æˆ‘ä»¬å¿…é¡»è¶…è¶Šå¸¸ç”¨çš„ç±»ä¼¼åˆ é™¤ï¼Œåˆ é™¤æ‰€æœ‰å…·æœ‰ä»»ä½•ç¼ºå¤±ç‰¹å¾çš„æ ·æœ¬ã€‚

## åŠ è½½æ‰€éœ€çš„åº“

ä»¥ä¸‹ä»£ç åŠ è½½æ‰€éœ€çš„åº“ã€‚

+   è¿™äº›åº”è¯¥å·²ç»ä¸ Anaconda 3 ä¸€èµ·å®‰è£…ã€‚

```py
ignore_warnings = True                                        # ignore warnings?
import numpy as np                                            # ndarrays for gridded data
import pandas as pd                                           # DataFrames for tabular data
from sklearn.impute import SimpleImputer                      # basic imputation method
from sklearn.impute import KNNImputer                         # k-nearest neighbour imputation method
from sklearn.experimental import enable_iterative_imputer     # required for MICE imputation
from sklearn.impute import IterativeImputer                   # MICE imputation
import os                                                     # set working directory, run executables
import math                                                   # basic math operations
import random                                                 # for random numbers
import matplotlib.pyplot as plt                               # for plotting
from matplotlib.ticker import (MultipleLocator, AutoMinorLocator) # control of axes ticks
from matplotlib.colors import ListedColormap                  # custom color maps
import matplotlib.ticker as mtick                             # control tick label formatting
import seaborn as sns                                         # for matrix scatter plots
from scipy import stats                                       # summary statistics
import numpy.linalg as linalg                                 # for linear algebra
import scipy.spatial as sp                                    # for fast nearest neighbor search
import scipy.signal as signal                                 # kernel for moving window calculation
from numba import jit                                         # for numerical speed up
from statsmodels.stats.weightstats import DescrStatsW
plt.rc('axes', axisbelow=True)                                # plot all grids below the plot elements
if ignore_warnings == True:                                   
    import warnings
    warnings.filterwarnings('ignore')
cmap = plt.cm.inferno                                         # color map
seed = 73071                                                  # random seed
np.random.seed(seed=seed) 
```

## å£°æ˜å‡½æ•°

è¿™é‡Œæ˜¯ä¸€ä¸ªè¾…åŠ©ç»˜å›¾çš„å‡½æ•°ï¼š

+   **add_grid** - æ·»åŠ ä¸»ç½‘æ ¼çº¿å’Œå‰¯ç½‘æ ¼çº¿çš„ä¾¿åˆ©å‡½æ•°ï¼Œä»¥æé«˜ç»˜å›¾çš„å¯è§£é‡Šæ€§

è¿™é‡Œæ˜¯å‡½æ•°ï¼š

```py
def add_grid():                                               # add major and minor gridlines
    plt.gca().grid(True, which='major',linewidth = 1.0); plt.gca().grid(True, which='minor',linewidth = 0.2) # add y grids
    plt.gca().tick_params(which='major',length=7); plt.gca().tick_params(which='minor', length=4)
    plt.gca().xaxis.set_minor_locator(AutoMinorLocator()); plt.gca().yaxis.set_minor_locator(AutoMinorLocator()) # turn on minor ticks 
```

## è®¾ç½®å·¥ä½œç›®å½•

æˆ‘æ€»æ˜¯å–œæ¬¢è¿™æ ·åšï¼Œè¿™æ ·æˆ‘å°±ä¸ä¼šä¸¢å¤±æ–‡ä»¶ï¼Œå¹¶ä¸”ç®€åŒ–åç»­çš„è¯»å–å’Œå†™å…¥ï¼ˆé¿å…æ¯æ¬¡éƒ½åŒ…å«å®Œæ•´åœ°å€ï¼‰ã€‚

```py
#os.chdir("c:/PGE383")                                        # set the working directory 
```

æ‚¨å°†éœ€è¦æ›´æ–°å¼•å·å†…çš„éƒ¨åˆ†ä¸ºæ‚¨çš„è‡ªå·±çš„å·¥ä½œç›®å½•ï¼Œå¹¶ä¸”æ ¼å¼åœ¨ Mac ä¸Šä¸åŒï¼ˆä¾‹å¦‚ï¼šâ€œ~/PGEâ€ï¼‰ã€‚

## åŠ è½½è¡¨æ ¼æ•°æ®

è¿™æ˜¯å°†æˆ‘ä»¬çš„é€—å·åˆ†éš”æ•°æ®æ–‡ä»¶åŠ è½½åˆ° Pandas DataFrame å¯¹è±¡çš„å‘½ä»¤ã€‚

### æ•°æ®é›† 0ï¼Œéå¸¸è§„å¤šå…ƒ v4

è®©æˆ‘ä»¬åŠ è½½æä¾›çš„å¤šå…ƒæ•°æ®é›† [unconv_MV.csv](https://github.com/GeostatsGuy/GeoDataSets/blob/master/unconv_MV_v4.csv)ã€‚è¿™ä¸ªæ•°æ®é›†åŒ…å«æ¥è‡ª 1,000 ä¸ªéå¸¸è§„äº•çš„å˜é‡ï¼ŒåŒ…æ‹¬ï¼š

+   äº•å¹³å‡å­”éš™ç‡

+   æ¸—é€ç‡çš„å¯¹æ•°å˜æ¢ï¼ˆç”¨äºçº¿æ€§åŒ–ä¸å…¶ä»–å˜é‡çš„å…³ç³»ï¼‰

+   å£°é˜»æŠ—ï¼ˆkg/mÂ³ x m/s x 10â¶ï¼‰

+   å²©è„†æ€§æ¯”ï¼ˆ%ï¼‰

+   æ€»æœ‰æœºç¢³ï¼ˆ%ï¼‰

+   ç…¤å²©åå°„ç‡ï¼ˆ%ï¼‰

+   åˆå§‹äº§é‡ 90 å¤©å¹³å‡ï¼ˆMCFPDï¼‰ã€‚

### æ•°æ®é›† 1ï¼ŒåäºŒï¼Œ12

è®©æˆ‘ä»¬åŠ è½½æä¾›çš„å¤šå…ƒã€äºŒç»´ç©ºé—´æ•°æ®é›† [12_sample_data.csv](https://github.com/GeostatsGuy/GeoDataSets/blob/master/12_sample_data.csv)ã€‚è¿™ä¸ªæ•°æ®é›†åŒ…å«æ¥è‡ª 480 ä¸ªéå¸¸è§„äº•çš„å˜é‡ï¼ŒåŒ…æ‹¬ï¼š

+   Xï¼ˆmï¼‰ï¼ŒYï¼ˆmï¼‰ä½ç½®åæ ‡

+   è½¬æ¢å•ä½åçš„å­”éš™ç‡ï¼ˆ%ï¼‰

+   æ¸—é€ç‡ï¼ˆmDï¼‰

+   å£°é˜»æŠ—ï¼ˆkg/mÂ³ x m/s x 10â¶ï¼‰

### æ•°æ®é›† 2ï¼Œå‚¨å±‚ 21

è®©æˆ‘ä»¬åŠ è½½æä¾›çš„å¤šå…ƒã€ä¸‰ç»´ç©ºé—´æ•°æ®é›† [res21_wells.csv](https://github.com/GeostatsGuy/GeoDataSets/blob/master/res21_wells.csv)ã€‚è¿™ä¸ªæ•°æ®é›†åŒ…å«æ¥è‡ª 73 ä¸ªå‚ç›´äº•åœ¨ 10,000m x 10,000m x 50 m å‚¨å±‚å•å…ƒçš„å˜é‡ï¼š

+   äº•ï¼ˆIDï¼‰

+   Xï¼ˆmï¼‰ï¼ŒYï¼ˆmï¼‰ï¼Œæ·±åº¦ï¼ˆmï¼‰ä½ç½®åæ ‡

+   è½¬æ¢å•ä½åçš„å­”éš™ç‡ï¼ˆ%ï¼‰

+   æ¸—é€ç‡ï¼ˆmDï¼‰

+   è½¬æ¢å•ä½åçš„å£°é˜»æŠ—ï¼ˆkg/mÂ²s*10â¶ï¼‰

+   å²©æ€§ï¼ˆåˆ†ç±»ï¼‰- æœ‰åºçš„ï¼Œä»é¡µå²©ã€æ²™è´¨é¡µå²©ã€é¡µå²©è´¨ç ‚å²©åˆ°ç ‚å²©ã€‚

+   å¯†åº¦ï¼ˆg/cmÂ³ï¼‰

+   å¯å‹ç¼©æ³¢é€Ÿï¼ˆm/sï¼‰

+   æ¨æ°æ¨¡é‡ï¼ˆGPaï¼‰

+   å‰ªåˆ‡æ³¢é€Ÿï¼ˆm/sï¼‰

+   å‰ªåˆ‡æ¨¡é‡ï¼ˆGPaï¼‰

æˆ‘ä»¬ä½¿ç”¨ pandas çš„â€˜read_csvâ€™å‡½æ•°å°†è¡¨æ ¼æ•°æ®åŠ è½½åˆ°æˆ‘ä»¬ç§°ä¸ºâ€˜my_dataâ€™çš„ DataFrame ä¸­ï¼Œç„¶åé¢„è§ˆå®ƒä»¥ç¡®ä¿æ­£ç¡®åŠ è½½ã€‚

+   æˆ‘ä»¬è¿˜ç”¨æ•°æ®èŒƒå›´å’Œæ ‡ç­¾å¡«å……åˆ—è¡¨ï¼Œä»¥ä¾¿äºç»˜å›¾

```py
idata = 0

if idata == 0:
    df = pd.read_csv('https://raw.githubusercontent.com/GeostatsGuy/GeoDataSets/master/unconv_MV_v4.csv') # load data from Dr. Pyrcz's GitHub repository 
    df.drop('Prod',axis=1,inplace=True)

    features = df.columns.values.tolist()                          # store the names of the features

    xmin = [6.0,0.0,1.0,10.0,0.0,0.9]; xmax = [24.0,10.0,5.0,85.0,2.2,2.9] # set the minimum and maximum values for plotting

    flabel = ['Porosity (%)','Permeability (mD)','Acoustic Impedance (kg/m2s*10â¶)','Brittleness Ratio (%)', # set the names for plotting
             'Total Organic Carbon (%)','Vitrinite Reflectance (%)']

    ftitle = ['Porosity','Permeability','Acoustic Impedance','Brittleness Ratio', # set the units for plotting
             'Total Organic Carbon','Vitrinite Reflectance']

elif idata == 1:
    names = {'Porosity':'Por'}

    df = pd.read_csv('https://raw.githubusercontent.com/GeostatsGuy/GeoDataSets/master/12_sample_data.csv') # load data from Dr. Pyrcz's GitHub repository 
    df = df.rename(columns=names)
    df['Por'] = df['Por'] * 100.0; df['AI'] = df['AI'] / 1000.0; 
    df.drop('Unnamed: 0',axis=1,inplace=True) 

    features = df.columns.values.tolist()                          # store the names of the features

    xmin = [0.0,0.0,0.0,4.0,0.0,6.5,1.4,1600.0,10.0,1300.0,1.6]; xmax = [10000.0,10000.0,1.0,19.0,500.0,8.3,3.6,6200.0,50.0,2000.0,12.0] # set the minimum and maximum values for plotting

    flabel = ['Well (ID)','X (m)','Y (m)','Depth (m)','Porosity (fraction)','Permeability (mD)','Acoustic Impedance (kg/m2s*10â¶)','Facies (categorical)',
              'Density (g/cmÂ³)','Compressible velocity (m/s)','Youngs modulus (GPa)', 'Shear velocity (m/s)', 'Shear modulus (GPa)'] # set the names for plotting

    ftitle = ['Well','X','Y','Depth','Porosity','Permeability','Acoustic Impedance','Facies',
              'Density','Compressible velocity','Youngs modulus', 'Shear velocity', 'Shear modulus']

elif idata == 2:  
    df = pd.read_csv('https://raw.githubusercontent.com/GeostatsGuy/GeoDataSets/master/res21_2D_wells.csv') # load data from Dr. Pyrcz's GitHub repository 

    features = df.columns.values.tolist()                          # store the names of the features

    xmin = [1,0.0,0.0,4.0,0.0,6.5,1.4,1600.0,10.0,1300.0,1.6]; xmax = [73,10000.0,10000.0,19.0,500.0,8.3,3.6,6200.0,50.0,2000.0,12.0] # set the minimum and maximum values for plotting

    flabel = ['Well (ID)','X (m)','Y (m)','Depth (m)','Porosity (fraction)','Permeability (mD)','Acoustic Impedance (kg/m2s*10â¶)','Facies (categorical)',
              'Density (g/cmÂ³)','Compressible velocity (m/s)','Youngs modulus (GPa)', 'Shear velocity (m/s)', 'Shear modulus (GPa)'] # set the names for plotting

    ftitle = ['Well','X','Y','Depth','Porosity','Permeability','Acoustic Impedance','Facies',
              'Density','Compressible velocity','Youngs modulus', 'Shear velocity', 'Shear modulus'] 
```

+   æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºç»˜å›¾å»ºç«‹ç‰¹å¾èŒƒå›´ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç ç›´æ¥ä»æ•°æ®ä¸­è®¡ç®—ç‰¹å¾èŒƒå›´ï¼š

```py
Pormin = np.min(df['Por'].values)                             # extract ndarray of data table column
Pormax = np.max(df['Por'].values)                             # and calculate min and max 
```

ä½†æ˜¯ï¼Œè¿™ä¸ä¼šå¯¼è‡´æ˜“äºç†è§£çš„è‰²æ¡å’Œè½´åˆ»åº¦ï¼Œè®©æˆ‘ä»¬é€‰æ‹©æ–¹ä¾¿çš„æ•´æ•°ã€‚æˆ‘ä»¬è¿˜å°†å£°æ˜ç‰¹å¾æ ‡ç­¾ä»¥ç®€åŒ–ç»˜å›¾ã€‚

### æ•°æ®é›† 0ï¼Œéå¸¸è§„å¤šå…ƒ v4

è®©æˆ‘ä»¬åŠ è½½æä¾›çš„å¤šå…ƒæ•°æ®é›† [unconv_MV.csv](https://github.com/GeostatsGuy/GeoDataSets/blob/master/unconv_MV_v4.csv)ã€‚è¿™ä¸ªæ•°æ®é›†åŒ…å«æ¥è‡ª 1,000 ä¸ªéå¸¸è§„äº•çš„å˜é‡ï¼ŒåŒ…æ‹¬ï¼š

+   äº•å¹³å‡å­”éš™ç‡

+   æ¸—é€ç‡çš„å¯¹æ•°å˜æ¢ï¼ˆä»¥çº¿æ€§åŒ–ä¸å…¶ä»–å˜é‡çš„å…³ç³»ï¼‰

+   å£°é˜»æŠ—ï¼ˆkg/mÂ³ x m/s x 10â¶ï¼‰

+   å‰ªåˆ‡æ¯”ï¼ˆ%ï¼‰

+   æ€»æœ‰æœºç¢³ï¼ˆ%ï¼‰

+   ç»ç’ƒè´¨åå°„ç‡ï¼ˆ%ï¼‰

+   åˆå§‹ç”Ÿäº§ 90 å¤©å¹³å‡ï¼ˆMCFPDï¼‰ã€‚

### æ•°æ®é›† 1ï¼ŒåäºŒï¼Œ12

è®©æˆ‘ä»¬åŠ è½½æä¾›çš„å¤šå…ƒã€2D ç©ºé—´æ•°æ®é›† [12_sample_data.csv](https://github.com/GeostatsGuy/GeoDataSets/blob/master/12_sample_data.csv)ã€‚æ­¤æ•°æ®é›†åŒ…å«æ¥è‡ª 480 å£éå¸¸è§„äº•çš„å˜é‡ï¼ŒåŒ…æ‹¬ï¼š

+   X (m), Y (m) ä½ç½®åæ ‡

+   å•ä½è½¬æ¢åçš„å­”éš™ç‡ï¼ˆ%ï¼‰

+   æ¸—é€ç‡ï¼ˆmDï¼‰

+   å£°é˜»æŠ—ï¼ˆkg/mÂ³ x m/s x 10â¶ï¼‰

### æ•°æ®é›† 2ï¼Œå‚¨å±‚ 21

è®©æˆ‘ä»¬åŠ è½½æä¾›çš„å¤šå…ƒã€3D ç©ºé—´æ•°æ®é›† [res21_wells.csv](https://github.com/GeostatsGuy/GeoDataSets/blob/master/res21_wells.csv)ã€‚æ­¤æ•°æ®é›†åŒ…å«æ¥è‡ª 73 å£å‚ç›´äº•çš„å˜é‡ï¼Œè¦†ç›– 10,000m x 10,000m x 50 m çš„å‚¨å±‚å•å…ƒï¼š

+   äº•ï¼ˆIDï¼‰

+   X (m), Y (m), æ·±åº¦ï¼ˆmï¼‰ä½ç½®åæ ‡

+   å•ä½è½¬æ¢åçš„å­”éš™ç‡ï¼ˆ%ï¼‰

+   æ¸—é€ç‡ï¼ˆmDï¼‰

+   å•ä½è½¬æ¢åçš„å£°é˜»æŠ—ï¼ˆkg/m2s*10â¶ï¼‰

+   åœ°å±‚ï¼ˆåˆ†ç±»ï¼‰- ä»é¡µå²©ã€ç ‚è´¨é¡µå²©ã€é¡µå²©ç ‚åˆ°ç ‚å²©çš„é¡ºåºã€‚

+   å¯†åº¦ï¼ˆg/cmÂ³ï¼‰

+   å¯å‹ç¼©é€Ÿåº¦ï¼ˆm/sï¼‰

+   æ¨æ°æ¨¡é‡ï¼ˆGPaï¼‰

+   å‰ªåˆ‡æ³¢é€Ÿï¼ˆm/sï¼‰

+   å‰ªåˆ‡æ¨¡é‡ï¼ˆGPaï¼‰

æˆ‘ä»¬ä½¿ç”¨ pandas çš„â€˜read_csvâ€™å‡½æ•°å°†è¡¨æ ¼æ•°æ®åŠ è½½åˆ°åä¸ºâ€˜my_dataâ€™çš„ DataFrame ä¸­ï¼Œç„¶åé¢„è§ˆå®ƒä»¥ç¡®ä¿æ­£ç¡®åŠ è½½ã€‚

+   æˆ‘ä»¬è¿˜ç”¨æ•°æ®èŒƒå›´å’Œæ ‡ç­¾å¡«å……åˆ—è¡¨ï¼Œä»¥ä¾¿äºç»˜å›¾

```py
idata = 0

if idata == 0:
    df = pd.read_csv('https://raw.githubusercontent.com/GeostatsGuy/GeoDataSets/master/unconv_MV_v4.csv') # load data from Dr. Pyrcz's GitHub repository 
    df.drop('Prod',axis=1,inplace=True)

    features = df.columns.values.tolist()                          # store the names of the features

    xmin = [6.0,0.0,1.0,10.0,0.0,0.9]; xmax = [24.0,10.0,5.0,85.0,2.2,2.9] # set the minimum and maximum values for plotting

    flabel = ['Porosity (%)','Permeability (mD)','Acoustic Impedance (kg/m2s*10â¶)','Brittleness Ratio (%)', # set the names for plotting
             'Total Organic Carbon (%)','Vitrinite Reflectance (%)']

    ftitle = ['Porosity','Permeability','Acoustic Impedance','Brittleness Ratio', # set the units for plotting
             'Total Organic Carbon','Vitrinite Reflectance']

elif idata == 1:
    names = {'Porosity':'Por'}

    df = pd.read_csv('https://raw.githubusercontent.com/GeostatsGuy/GeoDataSets/master/12_sample_data.csv') # load data from Dr. Pyrcz's GitHub repository 
    df = df.rename(columns=names)
    df['Por'] = df['Por'] * 100.0; df['AI'] = df['AI'] / 1000.0; 
    df.drop('Unnamed: 0',axis=1,inplace=True) 

    features = df.columns.values.tolist()                          # store the names of the features

    xmin = [0.0,0.0,0.0,4.0,0.0,6.5,1.4,1600.0,10.0,1300.0,1.6]; xmax = [10000.0,10000.0,1.0,19.0,500.0,8.3,3.6,6200.0,50.0,2000.0,12.0] # set the minimum and maximum values for plotting

    flabel = ['Well (ID)','X (m)','Y (m)','Depth (m)','Porosity (fraction)','Permeability (mD)','Acoustic Impedance (kg/m2s*10â¶)','Facies (categorical)',
              'Density (g/cmÂ³)','Compressible velocity (m/s)','Youngs modulus (GPa)', 'Shear velocity (m/s)', 'Shear modulus (GPa)'] # set the names for plotting

    ftitle = ['Well','X','Y','Depth','Porosity','Permeability','Acoustic Impedance','Facies',
              'Density','Compressible velocity','Youngs modulus', 'Shear velocity', 'Shear modulus']

elif idata == 2:  
    df = pd.read_csv('https://raw.githubusercontent.com/GeostatsGuy/GeoDataSets/master/res21_2D_wells.csv') # load data from Dr. Pyrcz's GitHub repository 

    features = df.columns.values.tolist()                          # store the names of the features

    xmin = [1,0.0,0.0,4.0,0.0,6.5,1.4,1600.0,10.0,1300.0,1.6]; xmax = [73,10000.0,10000.0,19.0,500.0,8.3,3.6,6200.0,50.0,2000.0,12.0] # set the minimum and maximum values for plotting

    flabel = ['Well (ID)','X (m)','Y (m)','Depth (m)','Porosity (fraction)','Permeability (mD)','Acoustic Impedance (kg/m2s*10â¶)','Facies (categorical)',
              'Density (g/cmÂ³)','Compressible velocity (m/s)','Youngs modulus (GPa)', 'Shear velocity (m/s)', 'Shear modulus (GPa)'] # set the names for plotting

    ftitle = ['Well','X','Y','Depth','Porosity','Permeability','Acoustic Impedance','Facies',
              'Density','Compressible velocity','Youngs modulus', 'Shear velocity', 'Shear modulus'] 
```

+   æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºç»˜å›¾å»ºç«‹ç‰¹å¾èŒƒå›´ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç ç›´æ¥ä»æ•°æ®ä¸­è®¡ç®—ç‰¹å¾èŒƒå›´ï¼š

```py
Pormin = np.min(df['Por'].values)                             # extract ndarray of data table column
Pormax = np.max(df['Por'].values)                             # and calculate min and max 
```

ä½†æ˜¯ï¼Œè¿™ä¸ä¼šå¯¼è‡´æ˜“äºç†è§£çš„è‰²æ¡å’Œåæ ‡è½´åˆ»åº¦ï¼Œè®©æˆ‘ä»¬é€‰æ‹©æ–¹ä¾¿çš„æ•´æ•°ã€‚æˆ‘ä»¬è¿˜å°†å£°æ˜ç‰¹å¾æ ‡ç­¾ä»¥ä¾¿äºç»˜å›¾ã€‚

## å¯è§†åŒ– DataFrame

å¯è§†åŒ– DataFrame æ˜¯æ•°æ®çš„ç¬¬ä¸€æ­¥æ£€æŸ¥ã€‚

+   è®¸å¤šäº‹æƒ…å¯èƒ½ä¼šå‡ºé”™ï¼Œä¾‹å¦‚ï¼Œæˆ‘ä»¬åŠ è½½äº†é”™è¯¯çš„æ•°æ®ï¼Œæ‰€æœ‰ç‰¹å¾éƒ½æ²¡æœ‰åŠ è½½ï¼Œç­‰ç­‰ã€‚

æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨â€˜headâ€™ DataFrame æˆå‘˜å‡½æ•°æ¥é¢„è§ˆï¼ˆæ ¼å¼æ•´æ´ï¼Œè§ä¸‹æ–‡ï¼‰ã€‚

+   æ·»åŠ å‚æ•°â€˜n=13â€™ä»¥æŸ¥çœ‹æ•°æ®é›†çš„å‰ 13 è¡Œã€‚

```py
df.head(n=13)                                                 # DataFrame preview 
```

|  | äº• | å­” | æ¸— | AI | å‰ª | TOC | VR |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1 | 12.08 | 2.92 | 2.80 | 81.40 | 1.16 | 2.31 |
| 1 | 2 | 12.38 | 3.53 | 3.22 | 46.17 | 0.89 | 1.88 |
| 2 | 3 | 14.02 | 2.59 | 4.01 | 72.80 | 0.89 | 2.72 |
| 3 | 4 | 17.67 | 6.75 | 2.63 | 39.81 | 1.08 | 1.88 |
| 4 | 5 | 17.52 | 4.57 | 3.18 | 10.94 | 1.51 | 1.90 |
| 5 | 6 | 14.53 | 4.81 | 2.69 | 53.60 | 0.94 | 1.67 |
| 6 | 7 | 13.49 | 3.60 | 2.93 | 63.71 | 0.80 | 1.85 |
| 7 | 8 | 11.58 | 3.03 | 3.25 | 53.00 | 0.69 | 1.93 |
| 8 | 9 | 12.52 | 2.72 | 2.43 | 65.77 | 0.95 | 1.98 |
| 9 | 10 | 13.25 | 3.94 | 3.71 | 66.20 | 1.14 | 2.65 |
| 10 | 11 | 15.04 | 4.39 | 2.22 | 61.11 | 1.08 | 1.77 |
| 11 | 12 | 16.19 | 6.30 | 2.29 | 49.10 | 1.53 | 1.86 |
| 12 | 13 | 16.82 | 5.42 | 2.80 | 66.65 | 1.17 | 1.98 |

æ³¨æ„ï¼Œç¬¬ä¸€ä¸ªæ•°æ®é›† idata = 0ï¼Œæ²¡æœ‰ç¼ºå¤±æ•°æ®ï¼Œå¦‚æœä½ é€‰æ‹©äº†å®ƒï¼Œé‚£ä¹ˆä¸ºäº†ä¸‹é¢çš„æ¼”ç¤ºï¼Œè®©æˆ‘ä»¬åˆ é™¤ä¸€äº›æ•°æ®ã€‚

## åˆ é™¤ä¸€äº›æ•°æ®

è®©æˆ‘ä»¬é€‰æ‹©ä¸€ä¸ª NaN å€¼çš„æ¯”ä¾‹ï¼Œå°†è¿™äº›å€¼è®¾ç½®ä¸ºç¼ºå¤±å€¼ï¼Œ

```py
proportion_NaN = 0.1 
```

ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå¸ƒå°”æ•°ç»„

1.  åˆ›å»ºä¸€ä¸ªä¸ uniform[0,1]åˆ†å¸ƒçš„ DataFrame å…·æœ‰ç›¸åŒå½¢çŠ¶çš„ ndarrayï¼ˆè¡Œæ•°å’Œåˆ—æ•°ï¼‰

```py
np.random.random(df.shape) 
```

1.  æ£€æŸ¥å°äºè¯†åˆ«æ¯”ä¾‹çš„æ¡ä»¶ï¼Œä»¥åˆ›å»ºä¸€ä¸ªä¸ç›¸åŒå¤§å°çš„å¸ƒå°” ndarrayï¼Œå¦‚æœå°äºæ¯”ä¾‹åˆ™ä¸º trueã€‚ç»“æœå°†æ˜¯éšæœº true å€¼çš„æ­£ç¡®æ¯”ä¾‹ï¼ˆåœ¨è¯¯å·®èŒƒå›´å†…ï¼‰ã€‚

```py
remove = np.random.random(df.shape) < proportion_NaN 
```

1.  å°†æ©ç åº”ç”¨äº DataFrame ä»¥åˆ é™¤å·²è¯†åˆ«çš„å€¼

```py
df_mask = df.mask(remove) 
```

å®Œå…¨æŠ«éœ²ï¼Œå¯¹äºè¿™ä¸ªæ¼”ç¤ºï¼Œæˆ‘ä»¬çš„æ•°æ®æ˜¯éšæœºç¼ºå¤±çš„ï¼ŒMARï¼Œè¿™ç®€åŒ–äº†æˆ‘ä»¬çš„ä»»åŠ¡ã€‚

+   è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿä¸“æ³¨äºç‰¹å¾æ’è¡¥çš„æœºåˆ¶ï¼Œè€Œä¸éœ€è¦é¢å¤–çš„é¢†åŸŸä¸“ä¸šçŸ¥è¯†ã€‚è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ç¬¬ä¸€æ­¥ï¼

```py
if idata == 0 or idata == 1:
    proportion_NaN = 0.1                                          # proportion of values in DataFrame to remove
    np.random.seed(seed=seed)                                     # ensure repeatability
    remove = np.random.random(df.shape) < proportion_NaN          # make the boolean array for removal
    if idata == 1:
        remove[:,df.columns.get_loc('Facies')] = False            # avoid categoical imputation at this time 
    print('Fraction of removed values in mask ndarray = ' + str(round(remove.sum()/remove.size,3)) + '.')

    df_mask = df.mask(remove)
else:
    df_mask = df.copy(deep = True)

print('Fraction of nan values in the DataFrame = ' + str(round(df_mask.isnull().sum().sum()/(df_mask.shape[0]*df_mask.shape[1]),3)) + '.') 
```

```py
Fraction of removed values in mask ndarray = 0.093.
Fraction of nan values in the DataFrame = 0.093. 
```

æˆ‘ä»¬ç°åœ¨æœ‰ä¸€ä¸ªæ–°çš„åŒ…å«ä¸€äº›ç¼ºå¤±æ•°æ®çš„ DataFrameã€‚

+   è®©æˆ‘ä»¬ä½¿ç”¨.head()é¢„è§ˆæ¥è§‚å¯Ÿæ•°æ®é›†ä¸­æ•£å¸ƒçš„ NaN å€¼

```py
df_mask.head(n=13)                                            # DataFrame preview 
```

|  | Well | Por | Perm | AI | Brittle | TOC | VR |
| --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1.0 | 12.08 | 2.92 | 2.80 | 81.40 | 1.16 | 2.31 |
| 1 | 2.0 | 12.38 | 3.53 | NaN | 46.17 | 0.89 | 1.88 |
| 2 | NaN | 14.02 | 2.59 | 4.01 | 72.80 | 0.89 | 2.72 |
| 3 | 4.0 | 17.67 | 6.75 | 2.63 | 39.81 | 1.08 | 1.88 |
| 4 | 5.0 | 17.52 | 4.57 | 3.18 | 10.94 | 1.51 | 1.90 |
| 5 | 6.0 | 14.53 | 4.81 | 2.69 | 53.60 | 0.94 | 1.67 |
| 6 | 7.0 | 13.49 | 3.60 | NaN | 63.71 | 0.80 | 1.85 |
| 7 | 8.0 | 11.58 | 3.03 | NaN | 53.00 | 0.69 | 1.93 |
| 8 | 9.0 | NaN | 2.72 | NaN | 65.77 | 0.95 | 1.98 |
| 9 | 10.0 | NaN | 3.94 | 3.71 | 66.20 | 1.14 | 2.65 |
| 10 | 11.0 | 15.04 | 4.39 | 2.22 | NaN | 1.08 | 1.77 |
| 11 | NaN | 16.19 | 6.30 | 2.29 | 49.10 | 1.53 | 1.86 |
| 12 | 13.0 | NaN | 5.42 | 2.80 | 66.65 | 1.17 | 1.98 |

## æ•°æ®è¦†ç›–è¯„ä¼°

è®©æˆ‘ä»¬è®¡ç®—ç¼ºå¤±æ•°æ®çš„æ•°é‡ã€‚

```py
df_mask.describe().transpose()                                # DataFrame summary statistics 
```

|  | count | mean | std | min | 25% | 50% | 75% | max |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| Well | 182.0 | 102.653846 | 58.078019 | 1.00 | 53.2500 | 104.000 | 153.7500 | 200.00 |
| Por | 184.0 | 14.935978 | 3.002142 | 6.55 | 12.8900 | 15.055 | 17.4225 | 23.55 |
| Perm | 172.0 | 4.319419 | 1.684672 | 1.13 | 3.1300 | 4.010 | 5.1850 | 9.78 |
| AI | 184.0 | 2.991630 | 0.571569 | 1.28 | 2.5675 | 2.975 | 3.3950 | 4.63 |
| Brittle | 186.0 | 47.793817 | 13.781815 | 10.94 | 37.7450 | 48.830 | 58.0150 | 81.40 |
| TOC | 186.0 | 0.991882 | 0.481896 | -0.19 | 0.6225 | 1.020 | 1.3500 | 2.18 |
| VR | 176.0 | 1.969602 | 0.293877 | 0.93 | 1.7775 | 1.970 | 2.1100 | 2.87 |

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ¯ä¸ªç‰¹å¾çš„å¯ç”¨å€¼çš„è®¡æ•°ï¼Œç”±äºç¼ºå¤±å€¼ï¼Œå°‘äºæ ·æœ¬æ€»æ•°ã€‚

è®©æˆ‘ä»¬ç»˜åˆ¶ä¸€ä¸ªå›¾æ¥è¡¨ç¤ºæ¯ä¸ªç‰¹å¾çš„æ•°æ®å®Œæ•´æ€§

+   è¿™æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„æ€»ç»“

```py
plt.subplot(111)                                              # data completeness plot
(df_mask.isnull().sum()/len(df)).plot(kind = 'bar',color='darkorange',edgecolor='black') 
plt.xlabel('Feature'); plt.ylabel('Percentage of Missing Values'); plt.title('Data Completeness'); plt.ylim([0.0,1.0])
plt.plot([-0.5,df.shape[1]+0.5],[0.1,0.1],color='red',ls='--')
plt.subplots_adjust(left=0.0, bottom=0.0, right=1.0, top=0.8, wspace=0.2, hspace=0.2); add_grid(); plt.show() 
```

![_images/6ed9df1de493bc38166372b4dd6106367dd7d5e2888e1c4ef601987fcd269bdd.png](img/8141a96c3a1d36a395c9bf10b9abc9ec.png)

è¿™å¯¼è‡´äº†ç¬¬ä¸€ç§æ•°æ®æ’è¡¥æ–¹æ³•ï¼Œç‰¹å¾é€‰æ‹©ã€‚

## æ’è¡¥æ–¹æ³• #1 - ç‰¹å¾é€‰æ‹©

åœ¨ç‰¹å¾é€‰æ‹©ä¸­åº”è€ƒè™‘æ•°æ®å®Œæ•´æ€§ã€‚

+   å¦‚æœç‰¹å¾çš„æ•°æ®å®Œæ•´æ€§ä½ï¼Œç¼ºå¤±æ ·æœ¬æ¯”ä¾‹é«˜ï¼Œåˆ™è¯¥ç‰¹å¾å¯èƒ½ä¼šè¢«ç§»é™¤ã€‚

ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨.drop() DataFrame å‡½æ•°ã€‚

```py
df_test = df_mask.drop('VR',axis = 1) 
```

æˆ‘ä»¬ä½¿ç”¨ axis = 1 æ¥åˆ é™¤ç‰¹å¾ï¼ˆå¦‚ä¸Šæ‰€ç¤ºï¼‰ï¼Œä»¥åˆ é™¤è¶…è¿‡ 10%ç‰¹å¾å€¼ç¼ºå¤±çš„ç‰¹å¾ã€‚

```py
if idata == 0:
    drop_features = ['Perm','VR']
elif idata == 1:
    drop_features = []
elif idata == 2:
    drop_features = ['Youngs','Shear']

df_test = df_mask.drop(drop_features,axis = 1)

plt.subplot(111)
(df_test.isnull().sum()/len(df)).plot(kind = 'bar',color='darkorange',edgecolor='black')                # calculate DataFrame with percentage missing by feature
plt.xlabel('Feature'); plt.ylabel('Percentage of Missing Values'); plt.title('Data Completeness'); plt.ylim([0.0,1.0])
plt.plot([-0.5,df.shape[1]+0.5],[0.1,0.1],color='red',ls='--')
plt.subplots_adjust(left=0.0, bottom=0.0, right=1.0, top=0.8, wspace=0.2, hspace=0.2); add_grid(); plt.show() 
```

![å›¾ç‰‡é“¾æ¥](img/a9f7ba6bf3b50feec336b95e30cc7f10.png)

## æ’è¡¥æ–¹æ³• #2 - æ ·æœ¬é€‰æ‹©

å¯èƒ½å­˜åœ¨å…·æœ‰æ›´å¤šç¼ºå¤±ç‰¹å¾å€¼çš„æ ·æœ¬ã€‚

+   æŒ‡å®šçš„æ•°æ®ç‰ˆæœ¬ï¼Œä¾‹å¦‚ï¼Œæ—§æ•°æ®ï¼Œæˆ–ç»å†æ•°æ®æ”¶é›†é—®é¢˜çš„æ ·æœ¬ä½ç½®

è®©æˆ‘ä»¬æ£€æŸ¥ DataFrame ä¸­æŒ‰æ ·æœ¬çš„è¦†ç›–ç‡ã€‚

+   åœ¨æ±‚å’Œå‘½ä»¤ä¸­ä½¿ç”¨ axis=1 å‚æ•°æ¥å¯¹ DataFrame çš„è¡Œã€æ ·æœ¬ä¸­çš„ NaN å€¼è¿›è¡Œæ±‚å’Œã€‚

```py
(df_mask.isnull().sum(axis=1)/len(df.columns)).plot(kind = 'bar',color='darkorange',edgecolor='black')
plt.subplots_adjust(left=0.0, bottom=0.0, right=3.2, top=1.2, wspace=0.2, hspace=0.2) # plot formatting
plt.xlabel('Sample Index'); plt.ylabel('Percentage of Missing Records'); plt.title('Data Completeness')
plt.xticks(np.arange(0,len(df_mask),10),np.arange(0,len(df_mask),10))
plt.ylim([0,1.0])
plt.plot([-0.5,len(df)+0.5],[0.2,0.2],color='red',ls='--')
plt.subplots_adjust(left=0.0, bottom=0.0, right=3.0, top=0.8, wspace=0.2, hspace=0.2); add_grid(); plt.show() 
```

![å›¾ç‰‡é“¾æ¥](img/dd50b4d951d45dfccfe1a8f648f800e6.png)

å¦‚æœæˆ‘ä»¬è¯†åˆ«å‡ºæ•°æ®å®Œæ•´æ€§ä½ã€ç¼ºå¤±æ ·æœ¬æ¯”ä¾‹é«˜çš„æ ·æœ¬ï¼Œé‚£ä¹ˆè¯¥æ ·æœ¬å¯èƒ½ä¼šè¢«ç§»é™¤ã€‚

å†æ¬¡ä½¿ç”¨.drop() DataFrame å‡½æ•°ã€‚

```py
df_test = df_mask.drop('Water',axis = 1) 
```

è¿™æ¬¡æˆ‘ä»¬ä½¿ç”¨ axis = 0 æ¥åˆ é™¤æ ·æœ¬åˆ—è¡¨ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚

1.  æˆ‘ä»¬éœ€è¦åˆ¶ä½œä¸€ä¸ªåŒ…å«å¤ªå¤šç¼ºå¤±æ ·æœ¬çš„æ ·æœ¬ç´¢å¼•åˆ—è¡¨

```py
(df_mask.isnull().sum(axis=1)/len(df.columns)) > max_proportion_missing_by_sample 
```

1.  è¿™æ˜¯ä¸€ä¸ªå…ƒç»„ç±»å‹ï¼Œè®©æˆ‘ä»¬å°†å…¶è½¬æ¢ä¸º ndarrayï¼Œç„¶åæˆ‘ä»¬ç¡®ä¿å°†å…¶è½¬æ¢ä¸ºä»…åŒ…å« 1D å€¼çš„æ•°ç»„

```py
index_low_coverage_samples = np.asarray(np.where(low_coverage_samples == True))[0] 
```

1.  ç°åœ¨æˆ‘ä»¬å·²ç»å‡†å¤‡å¥½åº”ç”¨æˆ‘ä»¬çš„å¸ƒå°”æ•°ç»„ï¼Œé•¿åº¦ä¸ºæ ·æœ¬æ•°é‡ï¼Œå¯¹äºæœ‰å¤ªå¤šç¼ºå¤±å€¼çš„æ ·æœ¬ï¼Œé€šè¿‡ç´¢å¼•æ¥ç§»é™¤è¿™äº›æ ·æœ¬ã€‚

```py
df_test2 = df_mask.drop(index = index_low_coverage_samples,axis = 0) 
```

```py
max_proportion_missing_by_sample = 0.2

low_coverage_samples = (df_mask.isnull().sum(axis=1)/len(df.columns)) > max_proportion_missing_by_sample 
index_low_coverage_samples = np.asarray(np.where(low_coverage_samples == True))[0]

df_test2 = df_mask.drop(index = index_low_coverage_samples,axis = 0)

(df_test2.isnull().sum(axis=1)/len(df_test2.columns)).plot(kind = 'bar',color='darkorange',edgecolor='black')
plt.subplots_adjust(left=0.0, bottom=0.0, right=3.2, top=1.2, wspace=0.2, hspace=0.2) # plot formatting
plt.xlabel('Updated Sample Index'); plt.ylabel('Percentage of Missing Records'); plt.title('Data Completeness')
plt.xticks(np.arange(0,len(df_mask),10),np.arange(0,len(df_mask),10))
plt.ylim([0,1.0])
plt.plot([-0.5,len(df)+0.5],[0.2,0.2],color='red',ls='--')
plt.subplots_adjust(left=0.0, bottom=0.0, right=3.0, top=0.8, wspace=0.2, hspace=0.2); add_grid(); plt.show() 
```

![å›¾ç‰‡é“¾æ¥](img/31d7badd11c070c12bcfdd1d9682913c.png)

## æ’è¡¥æ–¹æ³• #3 - åˆ—åˆ é™¤

è¿™æ˜¯ç§»é™¤å…·æœ‰ä»»ä½•ç¼ºå¤±ç‰¹å¾å€¼çš„æ‰€æœ‰æ ·æœ¬çš„æ–¹æ³•ã€‚

+   è¿™ç§æ–¹æ³•ç¡®ä¿äº†å®Œæ•´çš„æ•°æ®ï¼ŒåŒæ—¶åœ¨æŠ€æœ¯ä¸Šé¿å…äº†æ’è¡¥çš„éœ€æ±‚

+   ä¸éœ€è¦ä½¿ç”¨æ’è¡¥æ¨¡å‹å†³ç­–

+   é€šå¸¸ä¼šåˆ é™¤é‡è¦ä¿¡æ¯

+   å¦‚æœä¿¡æ¯ä¸æ˜¯éšæœºç¼ºå¤±ï¼ˆMARï¼‰ï¼Œåˆ™æœ€å¤§åŒ–æ•°æ®åå·®

æˆ‘ä»¬å¿…é¡»è€ƒè™‘æ•°æ®å®Œæ•´æ€§ã€æ¯ä¸ªç‰¹å¾çš„è¦†ç›–ç‡ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºã€‚è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼Œ

+   ä¸€ä¸ªç‰¹å¾ä¸­çš„ç¼ºå¤±è®°å½•å¯èƒ½ä¸åŒäºå¦ä¸€ä¸ªç‰¹å¾ä¸­çš„ç¼ºå¤±ç‰¹å¾

+   æ‰€æœ‰ç‰¹å¾ä¸­ç¼ºå¤±å€¼çš„å¹¶é›†ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ¯”ç‰¹å¾ä¸­æœ€å¤§æ¯”ä¾‹çš„ç¼ºå¤±ä¸¢å¤±æ›´å¤šæ•°æ®ã€‚

æ­¤å¤–ï¼Œå¦‚æœç¼ºå¤±ä¸æ˜¯éšæœºçš„ï¼ˆMNARï¼‰ï¼Œåˆ™æ ·æœ¬åå·®æœ€å¤§åŒ–

+   è™½ç„¶ç±»ä¼¼åˆ é™¤é€šå¸¸è¢«åº”ç”¨ï¼Œä½†å¹¶ä¸æ¨èã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ dropna()å‡½æ•°ã€‚

+   ä½¿ç”¨ subset æ—¶ï¼Œæˆ‘ä»¬åªèƒ½è€ƒè™‘ä¸€ä¸ªç‰¹å¾åˆ—è¡¨

+   å¯ä»¥è®¾ç½®ä¸ºâ€˜anyâ€™ä»¥åœ¨å­˜åœ¨ä»»ä½•ç¼ºå¤±å€¼æ—¶åˆ é™¤ï¼Œå¦‚æœå…¨éƒ¨ç¼ºå¤±åˆ™è®¾ç½®ä¸ºâ€˜allâ€™åˆ é™¤

+   inplace true å°†è¦†ç›– DataFrame è€Œæ²¡æœ‰è¾“å‡ºï¼Œè€Œ false å°†ä¼ é€’æ–°çš„ DataFrame ä½œä¸ºå‰¯æœ¬

```py
df_listwise = df_mask.dropna(how='any',inplace=False)

sns.pairplot(df_listwise.iloc[:,:-1], plot_kws={'alpha':0.5,'s':20},corner=True)
plt.subplots_adjust(left=0.0, bottom=0.0, right=0.5, top=0.6, wspace=0.1, hspace=0.2)
# df_likewise.head(n = 13) 
```

![å›¾ç‰‡é“¾æ¥](img/dbce84c00782b7a258ef46bddbe35881.png)

## æ’è¡¥å»ºæ¨¡æ–¹æ³•

è¿™äº›æ˜¯å°†ç‰¹å¾æ’è¡¥è§†ä¸ºé¢„æµ‹é—®é¢˜çš„æ–¹æ³•ï¼Œå³ä½¿ç”¨å…¶ä»–å¯ç”¨æ•°æ®é¢„æµ‹ç¼ºå¤±çš„ç‰¹å¾å€¼ï¼Œä¾‹å¦‚ï¼Œ

+   ä½¿ç”¨å…¶ä»–å¯ç”¨çš„ç‰¹å¾å€¼

+   åœ¨å…¶ä»–æ ·æœ¬ä½ç½®å¯ç”¨çš„ç›¸åŒç‰¹å¾å€¼

åœ¨ç‰¹å¾æ’è¡¥ä¸­åº”ç”¨äº†è®¸å¤šé¢„æµ‹æ–¹æ³•ï¼Œ

+   æˆ‘ä»¬ä»æœ€ç®€å•çš„é¢„æµ‹æ¨¡å‹å¼€å§‹ï¼Œä½¿ç”¨å…¨å±€å‡å€¼è¿›è¡Œé¢„æµ‹ï¼Œç„¶åé€æ­¥è¿‡æ¸¡åˆ°æ›´å¤æ‚çš„æ¨¡å‹

ä¸ºäº†å¸®åŠ©æˆ‘ä»¬å¯è§†åŒ–ç»“æœï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªç‰¹å¾ï¼Œè¡¨ç¤ºç‰¹å®šæ ·æœ¬æ˜¯å¦æœ‰ä»»ä½•ç¼ºå¤±çš„ç‰¹å¾å€¼

+   è¿™æ ·æˆ‘ä»¬å¯ä»¥ä¸ºå·²ç»è¿›è¡Œç‰¹å¾æ’è¡¥çš„æ ·æœ¬è¿›è¡Œæ ‡è®°ï¼Œä»¥ä¾¿è¯„ä¼°å’Œå¯è§†åŒ–ç‰¹å¾æ’è¡¥çš„ç»“æœ

```py
df_mask['Imputed'] = (df_mask.isnull().sum(axis=1)) > 0
df_mask.head() 
```

|  | Well | Por | Perm | AI | Brittle | TOC | VR | Imputed |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1.0 | 12.08 | 2.92 | 2.80 | 81.40 | 1.16 | 2.31 | False |
| 1 | 2.0 | 12.38 | 3.53 | NaN | 46.17 | 0.89 | 1.88 | True |
| 2 | NaN | 14.02 | 2.59 | 4.01 | 72.80 | 0.89 | 2.72 | True |
| 3 | 4.0 | 17.67 | 6.75 | 2.63 | 39.81 | 1.08 | 1.88 | False |
| 4 | 5.0 | 17.52 | 4.57 | 3.18 | 10.94 | 1.51 | 1.90 | False |

## æ’è¡¥æ–¹æ³• #4 - ç”¨å¸¸æ•°æ›¿æ¢

è¿™æ˜¯ä¸€ç§å°†ç¼ºå¤±å€¼æ›¿æ¢ä¸ºå¸¸æ•°çš„æ’è¡¥æ–¹æ³•ã€‚

+   è¿™é‡Œæ˜¯ä¸€ä¸ªç”¨éå¸¸ä½çš„å€¼æ›¿æ¢ç¼ºå¤±ç‰¹å¾å€¼çš„ä¾‹å­

è¿™ä¼šå¯¼è‡´åå·®ï¼Œä¸åº”è¿™æ ·åšã€‚

```py
df_constant = df_mask.copy(deep=True)                         # make a deep copy of the DataFrame
constant_imputer = SimpleImputer(strategy='constant',fill_value = 0.01)
df_constant.iloc[:,:] = constant_imputer.fit_transform(df_constant)

sns.pairplot(df_constant.iloc[:,:], hue="Imputed", plot_kws={'alpha':0.15,'s':20}, palette = 'gnuplot', corner=True)
plt.subplots_adjust(left=0.0, bottom=0.0, right=0.5, top=0.6, wspace=0.1, hspace=0.2)
df_constant.head(n=5) 
```

|  | Well | Por | Perm | AI | Brittle | TOC | VR | Imputed |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1.00 | 12.08 | 2.92 | 2.80 | 81.40 | 1.16 | 2.31 | 0.0 |
| 1 | 2.00 | 12.38 | 3.53 | 0.01 | 46.17 | 0.89 | 1.88 | 1.0 |
| 2 | 0.01 | 14.02 | 2.59 | 4.01 | 72.80 | 0.89 | 2.72 | 1.0 |
| 3 | 4.00 | 17.67 | 6.75 | 2.63 | 39.81 | 1.08 | 1.88 | 0.0 |
| 4 | 5.00 | 17.52 | 4.57 | 3.18 | 10.94 | 1.51 | 1.90 | 0.0 |

![_images/26d51c63231cad2ab6a81f7ea33532841237c36c4d2ed2eadd7cc2d187de5b42.png](img/298f9bcf88d78b4cfab76adc592ff1cf.png)

## æ’è¡¥æ–¹æ³• #6 - ç”¨å¹³å‡å€¼æ›¿æ¢

è¿™æ˜¯ä¸€ç§å°†ç¼ºå¤±å€¼æ›¿æ¢ä¸ºç‰¹å¾çš„å¹³å‡å€¼ã€ç®—æœ¯å¹³å‡å€¼çš„æ’è¡¥æ–¹æ³•ã€‚

$$ ğ‘¥_ğ‘– = ğ¸\{ğ‘‹_ğ‘–\} $$

+   å…¨å±€å‡å€¼åœ¨å…¨å±€ä¸Šæ˜¯æ— åçš„ï¼Œä½†å¯èƒ½ä¼šå¯¼è‡´å±€éƒ¨åå·®ï¼Œå³ä½å€¼è¢«é«˜ä¼°ï¼Œé«˜å€¼è¢«ä½ä¼°

```py
df_mean = df_mask.copy(deep=True)                         # make a deep copy of the DataFrame
mean_imputer = SimpleImputer(strategy='mean')
df_mean.iloc[:,:] = mean_imputer.fit_transform(df_mean)

sns.pairplot(df_mean.iloc[:,:], hue="Imputed", plot_kws={'alpha':0.15,'s':20}, palette = 'gnuplot', corner=True)
plt.subplots_adjust(left=0.0, bottom=0.0, right=0.5, top=0.6, wspace=0.1, hspace=0.2)
df_constant.head(n=5)
df_mean.head(n=5) 
```

|  | Well | Por | Perm | AI | Brittle | TOC | VR | Imputed |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1.000000 | 12.08 | 2.92 | 2.80000 | 81.40 | 1.16 | 2.31 | 0.0 |
| 1 | 2.000000 | 12.38 | 3.53 | 2.99163 | 46.17 | 0.89 | 1.88 | 1.0 |
| 2 | 102.653846 | 14.02 | 2.59 | 4.01000 | 72.80 | 0.89 | 2.72 | 1.0 |
| 3 | 4.000000 | 17.67 | 6.75 | 2.63000 | 39.81 | 1.08 | 1.88 | 0.0 |
| 4 | 5.000000 | 17.52 | 4.57 | 3.18000 | 10.94 | 1.51 | 1.90 | 0.0 |

![_images/528e09249ebb432ddad9b71a908196dda11a47ea01b66b45c85c7f762352afbf.png](img/4299a66f1feb551c70f7ed3689f190e7.png)

## æ’è¡¥æ–¹æ³• #6 - ç”¨ä¼—æ•°æ›¿æ¢

è¿™æ˜¯ä½¿ç”¨ç‰¹å¾ä¸Šæœ€é¢‘ç¹çš„å€¼ï¼Œå³ä¼—æ•°ï¼Œæ›¿æ¢ç¼ºå¤±å€¼çš„æ–¹æ³•

+   åœ¨å­˜åœ¨å¼‚å¸¸å€¼çš„æƒ…å†µä¸‹ï¼Œå¹³å‡å€¼å¯èƒ½ä¸å¯é ã€‚æˆ‘çš„å»ºè®®æ˜¯åœ¨ç‰¹å¾æ’è¡¥ä¹‹å‰é¦–å…ˆå¤„ç†å¼‚å¸¸å€¼

```py
df_mode = df_mask.copy(deep=True)                         # make a deep copy of the DataFrame
mode_imputer = SimpleImputer(strategy='most_frequent')
df_mode.iloc[:,:] = mode_imputer.fit_transform(df_mode)

sns.pairplot(df_mode.iloc[:,:], hue="Imputed", plot_kws={'alpha':0.15,'s':20}, palette = 'gnuplot', corner=True)
plt.subplots_adjust(left=0.0, bottom=0.0, right=0.5, top=0.6, wspace=0.1, hspace=0.2)
df_constant.head(n=5)
df_mode.head(n=5) 
```

|  | Well | Por | Perm | AI | Brittle | TOC | VR | Imputed |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1.0 | 12.08 | 2.92 | 2.80 | 81.40 | 1.16 | 2.31 | 0.0 |
| 1 | 2.0 | 12.38 | 3.53 | 2.45 | 46.17 | 0.89 | 1.88 | 1.0 |
| 2 | 1.0 | 14.02 | 2.59 | 4.01 | 72.80 | 0.89 | 2.72 | 1.0 |
| 3 | 4.0 | 17.67 | 6.75 | 2.63 | 39.81 | 1.08 | 1.88 | 0.0 |
| 4 | 5.0 | 17.52 | 4.57 | 3.18 | 10.94 | 1.51 | 1.90 | 0.0 |

![_images/5eaf7ed5b2d8fcf4a6bb53f0d7efe3463b5e18b51a7c7f09b044e579fb936aca.png](img/d0bd84a25bcc7b4485a3fc45fa350dfa.png)

## è¡¥å……æ–¹æ³• #7 - ä½¿ç”¨ n è¿‘é‚»ä¼°è®¡æ›¿æ¢

è¿™æ˜¯åŸºäºå…¶ä»–å¯ç”¨åŒä½ç‰¹å¾å€¼ä½¿ç”¨ k è¿‘é‚»é¢„æµ‹æ¨¡å‹æ›¿æ¢ç¼ºå¤±å€¼çš„æ–¹æ³•

+   åœ¨æœ¬ç”µå­ä¹¦ä¸­æŸ¥çœ‹ k è¿‘é‚»ç« èŠ‚ï¼Œä»¥äº†è§£æ–¹æ³•çš„è§£é‡Šã€å‡è®¾å’Œè¶…å‚æ•°

+   å¯ç”¨æ•°æ®åº”ç”¨äºé¢„æµ‹ç‰¹å¾ç©ºé—´ä¸­çš„ç¼ºå¤±å€¼

ç”±äº k è¿‘é‚»æ–¹æ³•æ˜¯ä¸€ç§æ‡’æƒ°å­¦ä¹ å™¨ï¼Œæ’è¡¥å€¼æ˜¯åœ¨å¯¹ç¼ºå¤±å€¼è¿›è¡Œå•æ¬¡éå†ä¸­è®¡ç®—çš„

+   æ²¡æœ‰å•ç‹¬çš„åŸ¹è®­å’Œé¢„æµ‹æ­¥éª¤

æ­¤æ–¹æ³•åº”å…·æœ‰å…¨å±€æ— åæ€§ï¼Œå¹¶å°†ç›¸å¯¹äºå…¨å±€å¹³å‡ç‰¹å¾æ’è¡¥å‡å°‘å±€éƒ¨åå·®

```py
df_knn = df_mask.copy(deep=True)                         # make a deep copy of the DataFrame
knn_imputer = KNNImputer(n_neighbors=2, weights="uniform")
df_knn.iloc[:,:] = knn_imputer.fit_transform(df_knn)

sns.pairplot(df_knn.iloc[:,:], hue="Imputed", plot_kws={'alpha':0.15,'s':20}, palette = 'gnuplot', corner=True)
plt.subplots_adjust(left=0.0, bottom=0.0, right=0.5, top=0.6, wspace=0.1, hspace=0.2)
df_constant.head(n=5)
df_mode.head(n=5) 
```

|  | Well | Por | Perm | AI | Brittle | TOC | VR | Imputed |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1.0 | 12.08 | 2.92 | 2.80 | 81.40 | 1.16 | 2.31 | 0.0 |
| 1 | 2.0 | 12.38 | 3.53 | 2.45 | 46.17 | 0.89 | 1.88 | 1.0 |
| 2 | 1.0 | 14.02 | 2.59 | 4.01 | 72.80 | 0.89 | 2.72 | 1.0 |
| 3 | 4.0 | 17.67 | 6.75 | 2.63 | 39.81 | 1.08 | 1.88 | 0.0 |
| 4 | 5.0 | 17.52 | 4.57 | 3.18 | 10.94 | 1.51 | 1.90 | 0.0 |

![_images/8f2542fc3c97e9623022bacaddaa28bf89c6d3f36b68ff0c6b0be81b5ade76b2.png](img/a00ad8045d28e8e20b2a119a285a84e9.png)

## è¡¥å……æ–¹æ³• #8 - é€šè¿‡é“¾å¼æ–¹ç¨‹è¿›è¡Œå¤šé‡æ’è¡¥

è¿™æ˜¯ä½¿ç”¨ k è¿‘é‚»é¢„æµ‹æ¨¡å‹æ›¿æ¢ç¼ºå¤±å€¼çš„æ–¹æ³•

1.  ç”¨ $ğ¹_{ğ‘‹_{ğ‘–=1,\ldots,ğ‘š}}(ğ‘‹_{ğ‘–=1,\ldots,ğ‘š})$ ä¸­çš„éšæœºå€¼æ›¿æ¢ç¼ºå¤±å€¼

1.  ä¾æ¬¡é¢„æµ‹å…·æœ‰å…¶ä»–ç‰¹å¾çš„ç¼ºå¤±å€¼

1.  è¿­ä»£ç›´åˆ°æ”¶æ•›æ ‡å‡†ï¼Œé€šå¸¸æ˜¯å¤šå…ƒç»Ÿè®¡

1.  å¯¹æ•°æ®é›†çš„å¤šä¸ªå®ç°è¿›è¡Œé‡å¤

é»˜è®¤é¢„æµ‹å™¨æ˜¯ BayesianRidge()

+   æˆ‘ä»¬å¯ä»¥æŒ‡å®šæœ€å¤§è¿­ä»£æ¬¡æ•°ã€‚è¿”å›æœ€åè®¡ç®—çš„æ’è¡¥å€¼ã€‚

```py
df_mice = df_mask.copy(deep=True)                         # make a deep copy of the DataFrame
mice_imputer = IterativeImputer()
df_mice.iloc[:,:] = mice_imputer.fit_transform(df_mice)

sns.pairplot(df_mice.iloc[:,:], hue="Imputed", plot_kws={'alpha':0.15,'s':20}, palette = 'gnuplot', corner=True)
plt.subplots_adjust(left=0.0, bottom=0.0, right=0.5, top=0.6, wspace=0.1, hspace=0.2)
df_constant.head(n=5)
df_mode.head(n=5) 
```

|  | Well | Por | Perm | AI | Brittle | TOC | VR | Imputed |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0 | 1.0 | 12.08 | 2.92 | 2.80 | 81.40 | 1.16 | 2.31 | 0.0 |
| 1 | 2.0 | 12.38 | 3.53 | 2.45 | 46.17 | 0.89 | 1.88 | 1.0 |
| 2 | 1.0 | 14.02 | 2.59 | 4.01 | 72.80 | 0.89 | 2.72 | 1.0 |
| 3 | 4.0 | 17.67 | 6.75 | 2.63 | 39.81 | 1.08 | 1.88 | 0.0 |
| 4 | 5.0 | 17.52 | 4.57 | 3.18 | 10.94 | 1.51 | 1.90 | 0.0 |

![å›¾ç‰‡](img/feb8877973dcdfd81b91cf2afeff7039.png)

## ä¿å­˜æ¨æ–­çš„ DataFrame

è¾“å‡ºæ¨æ–­æ•°æ®æ–‡ä»¶ã€‚

```py
save_imputed = False                                          # save the imputed DataFrame?

if save_imputed == True:
    df_imputed = df_knn.copy(deep = True)                     # select the imputation method

    df_imputed.drop('Imputed',axis=1,inplace=True) 
    file_name = r'dataframe_imputed.csv'

    df_imputed.to_csv(file_name, index=False) 
```

## è¯„è®º

è¿™æ˜¯å¯¹ç‰¹å¾æ’è¡¥çš„åŸºæœ¬å¤„ç†ã€‚å¯ä»¥åšå’Œè®¨è®ºçš„è¿˜æœ‰å¾ˆå¤šï¼Œæˆ‘æœ‰å¾ˆå¤šæ›´å¤šçš„èµ„æºã€‚æŸ¥çœ‹æˆ‘çš„ [èµ„æºå…±äº«æ¸…å•](https://michaelpyrcz.com/my-resources) å’Œæœ¬ç« å¼€å¤´æä¾›çš„ YouTube è®²åº§é“¾æ¥ï¼Œå…¶ä¸­åŒ…å«è§†é¢‘æè¿°ä¸­çš„èµ„æºé“¾æ¥ã€‚

å¸Œæœ›è¿™æœ‰æ‰€å¸®åŠ©ï¼Œ

*è¿ˆå…‹å°”*

## å…³äºä½œè€…

![å›¾ç‰‡](img/eb709b2c0a0c715da01ae0165efdf3b2.png)

å¾·å…‹è¨æ–¯å¤§å­¦å¥¥æ–¯æ±€åˆ†æ ¡ 40 è‹±äº©æ ¡å›­å†…è¿ˆå…‹å°”Â·çš®å°”å¥‡çš„åŠå…¬å®¤ã€‚

è¿ˆå…‹å°”Â·çš®å°”å¥‡ï¼ˆMichael Pyrczï¼‰æ˜¯å¾·å…‹è¨æ–¯å¤§å­¦å¥¥æ–¯æ±€åˆ†æ ¡ [Cockrell å·¥ç¨‹å­¦é™¢](https://cockrell.utexas.edu/faculty-directory/alphabetical/p) å’Œ [Jackson åœ°çƒç§‘å­¦å­¦é™¢](https://www.jsg.utexas.edu/researcher/michael_pyrcz/) çš„æ•™æˆï¼Œä»–åœ¨è¯¥æ ¡ç ”ç©¶å¹¶æ•™æˆåœ°ä¸‹ã€ç©ºé—´æ•°æ®åˆ†æã€åœ°ç»Ÿè®¡å­¦å’Œæœºå™¨å­¦ä¹ ã€‚è¿ˆå…‹å°”è¿˜ï¼Œ

+   æ˜¯ [èƒ½æºåˆ†æ](https://fri.cns.utexas.edu/energy-analytics) æ–°ç”Ÿç ”ç©¶é¡¹ç›®çš„é¦–å¸­ç ”ç©¶å‘˜ï¼Œå¹¶åœ¨å¾·å…‹è¨æ–¯å¤§å­¦å¥¥æ–¯æ±€åˆ†æ ¡è‡ªç„¶ç§‘å­¦é™¢çš„æœºå™¨å­¦ä¹ å®éªŒå®¤æ‹…ä»»æ ¸å¿ƒæ•™å‘˜ã€‚

+   [è®¡ç®—æœºä¸åœ°çƒç§‘å­¦](https://www.sciencedirect.com/journal/computers-and-geosciences/about/editorial-board) çš„å‰¯ç¼–è¾‘ï¼Œä»¥åŠå›½é™…æ•°å­¦åœ°çƒç§‘å­¦åä¼š [æ•°å­¦åœ°çƒç§‘å­¦](https://link.springer.com/journal/11004/editorial-board) çš„è‘£äº‹ä¼šæˆå‘˜ã€‚

è¿ˆå…‹å°”å·²ç»æ’°å†™äº†è¶…è¿‡ 70 ç¯‡ [åŒè¡Œè¯„å®¡å‡ºç‰ˆç‰©](https://scholar.google.com/citations?user=QVZ20eQAAAAJ&hl=en)ï¼Œä¸€ä¸ªç”¨äºç©ºé—´æ•°æ®åˆ†æçš„ [Python åŒ…](https://pypi.org/project/geostatspy/)ï¼Œåˆè‘—äº†ä¸€æœ¬å…³äºç©ºé—´æ•°æ®åˆ†æçš„æ•™ç§‘ä¹¦ [åœ°ç»Ÿè®¡å­¦å‚¨å±‚å»ºæ¨¡](https://www.amazon.com/Geostatistical-Reservoir-Modeling-Michael-Pyrcz/dp/0199731446)ï¼Œå¹¶æ˜¯ä¸¤æœ¬æœ€è¿‘å‘å¸ƒçš„ç”µå­ä¹¦çš„ä½œè€…ï¼Œ[Python ä¸­çš„åº”ç”¨åœ°ç»Ÿè®¡å­¦ï¼šGeostatsPy å®æˆ˜æŒ‡å—](https://geostatsguy.github.io/GeostatsPyDemos_Book/intro.html) å’Œ [Python ä¸­çš„åº”ç”¨æœºå™¨å­¦ä¹ ï¼šå®æˆ˜æŒ‡å—ä¸ä»£ç ](https://geostatsguy.github.io/MachineLearningDemos_Book/intro.html)ã€‚

è¿ˆå…‹å°”çš„æ‰€æœ‰å¤§å­¦è®²åº§éƒ½å¯åœ¨ä»–çš„ [YouTube é¢‘é“](https://www.youtube.com/@GeostatsGuyLectures) ä¸Šæ‰¾åˆ°ï¼Œå…¶ä¸­åŒ…å« 100 å¤šä¸ª Python äº¤äº’å¼ä»ªè¡¨æ¿å’Œ 40 å¤šä¸ªå­˜å‚¨åº“ä¸­çš„è¯¦ç»†æ–‡æ¡£å·¥ä½œæµç¨‹ï¼Œè¿™äº›å­˜å‚¨åº“ä½äºä»–çš„ [GitHub è´¦æˆ·](https://github.com/GeostatsGuy)ï¼Œä»¥æ”¯æŒä»»ä½•æ„Ÿå…´è¶£çš„å­¦ç”Ÿå’Œä¸“ä¸šäººå£«ï¼Œæä¾›æŒç»­æ›´æ–°çš„å†…å®¹ã€‚è¦äº†è§£æ›´å¤šå…³äºè¿ˆå…‹å°”çš„å·¥ä½œå’Œå…±äº«æ•™è‚²èµ„æºçš„ä¿¡æ¯ï¼Œè¯·è®¿é—®ä»–çš„ç½‘ç«™ã€‚

## æƒ³è¦ä¸€èµ·å·¥ä½œå—ï¼Ÿ

æˆ‘å¸Œæœ›è¿™ä»½å†…å®¹å¯¹é‚£äº›æƒ³è¦äº†è§£æ›´å¤šå…³äºåœ°ä¸‹å»ºæ¨¡ã€æ•°æ®åˆ†æä»¥åŠæœºå™¨å­¦ä¹ çš„äººæœ‰æ‰€å¸®åŠ©ã€‚å­¦ç”Ÿå’Œåœ¨èŒä¸“ä¸šäººå£«éƒ½æ¬¢è¿å‚ä¸ã€‚

+   æƒ³é‚€è¯·æˆ‘åˆ°è´µå…¬å¸è¿›è¡ŒåŸ¹è®­ã€è¾…å¯¼ã€é¡¹ç›®å®¡æŸ¥ã€å·¥ä½œæµç¨‹è®¾è®¡å’Œ/æˆ–å’¨è¯¢å—ï¼Ÿæˆ‘å¾ˆä¹æ„æ‹œè®¿å¹¶ä¸æ‚¨åˆä½œï¼

+   æƒ³è¦åˆä½œã€æ”¯æŒæˆ‘çš„ç ”ç©¶ç”Ÿç ”ç©¶æˆ–æˆ‘çš„åœ°ä¸‹æ•°æ®åˆ†æä¸æœºå™¨å­¦ä¹ è”ç›Ÿï¼ˆå…±åŒè´Ÿè´£äººæ˜¯çº¦ç¿°Â·ç¦æ–¯ç‰¹æ•™æˆï¼‰å—ï¼Ÿæˆ‘çš„ç ”ç©¶å°†æ•°æ®åˆ†æã€éšæœºå»ºæ¨¡å’Œæœºå™¨å­¦ä¹ ç†è®ºä¸å®è·µç›¸ç»“åˆï¼Œä»¥å¼€å‘æ–°çš„æ–¹æ³•å’Œå·¥ä½œæµç¨‹ï¼Œå¢åŠ ä»·å€¼ã€‚æˆ‘ä»¬æ­£åœ¨è§£å†³å…·æœ‰æŒ‘æˆ˜æ€§çš„åœ°ä¸‹é—®é¢˜ï¼

+   æ‚¨å¯ä»¥é€šè¿‡ mpyrcz@austin.utexas.edu è”ç³»åˆ°æˆ‘ã€‚

æˆ‘æ€»æ˜¯å¾ˆé«˜å…´è®¨è®ºï¼Œ

*è¿ˆå…‹å°”*

è¿ˆå…‹å°”Â·çš®å°”èŒ¨ï¼Œåšå£«ï¼ŒP.Eng. æ•™æˆï¼Œå¾·å…‹è¨æ–¯å¤§å­¦å¥¥æ–¯æ±€åˆ†æ ¡ Cockrell å·¥ç¨‹å­¦é™¢å’Œ Jackson åœ°çƒç§‘å­¦å­¦é™¢

æ›´å¤šèµ„æºè¯·è®¿é—®ï¼š[Twitter](https://twitter.com/geostatsguy) | [GitHub](https://github.com/GeostatsGuy) | [ç½‘ç«™](http://michaelpyrcz.com) | [Google Scholar](https://scholar.google.com/citations?user=QVZ20eQAAAAJ&hl=en&oi=ao) | [åœ°ç»Ÿè®¡å­¦ä¹¦ç±](https://www.amazon.com/Geostatistical-Reservoir-Modeling-Michael-Pyrcz/dp/0199731446) | [YouTube](https://www.youtube.com/channel/UCLqEr-xV-ceHdXXXrTId5ig) | [Python ä¸­åº”ç”¨åœ°ç»Ÿè®¡å­¦ç”µå­ä¹¦](https://geostatsguy.github.io/GeostatsPyDemos_Book/intro.html) | [Python ä¸­åº”ç”¨æœºå™¨å­¦ä¹ ç”µå­ä¹¦](https://geostatsguy.github.io/MachineLearningDemos_Book/) | [LinkedIn](https://www.linkedin.com/in/michael-pyrcz-61a648a1)
